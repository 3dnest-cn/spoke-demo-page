(function(t){function e(e){for(var r,a,u=e[0],c=e[1],s=e[2],h=0,f=[];h<u.length;h++)a=u[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,u=1;u<n.length;u++){var c=n[u];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0096":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},1227:function(t,e,n){},4072:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"CENTER",(function(){return H})),n.d(r,"CURRENT_POINTER",(function(){return I}));var i={};n.r(i),n.d(i,"PI",(function(){return V})),n.d(i,"ROUND",(function(){return z}));var o={};n.r(o),n.d(o,"fromTwoPoint",(function(){return Z})),n.d(o,"dot",(function(){return Q})),n.d(o,"multiply",(function(){return tt})),n.d(o,"cross",(function(){return et})),n.d(o,"getLength",(function(){return nt})),n.d(o,"rotate90",(function(){return rt})),n.d(o,"normalize",(function(){return it})),n.d(o,"invert",(function(){return ot})),n.d(o,"clone",(function(){return at})),n.d(o,"rotate",(function(){return ut})),n.d(o,"project",(function(){return ct}));var a={};n.r(a),n.d(a,"getDistanceToSegment",(function(){return X})),n.d(a,"translate",(function(){return B})),n.d(a,"toLeftOfSegment",(function(){return st})),n.d(a,"rotate",(function(){return lt})),n.d(a,"project",(function(){return ht}));var u={};n.r(u),n.d(u,"differ",(function(){return ft})),n.d(u,"normalize",(function(){return dt}));var c={};n.r(c),n.d(c,"fromSegment",(function(){return $t})),n.d(c,"toStandard",(function(){return St})),n.d(c,"intersectLine",(function(){return Ct}));var s={};n.r(s),n.d(s,"intersectSegment",(function(){return Nt})),n.d(s,"translate",(function(){return Lt}));var l={};n.r(l),n.d(l,"containsPoint",(function(){return Dt}));var h={};n.r(h),n.d(h,"Vertex",(function(){return Rt})),n.d(h,"HalfEdge",(function(){return At})),n.d(h,"Face",(function(){return _t}));var f={};n.r(f),n.d(f,"allHalfEdgeOfVertex",(function(){return Xt})),n.d(f,"allHalfEdgeOfPath",(function(){return Ut}));var d={};n.r(d),n.d(d,"Struct",(function(){return h})),n.d(d,"Iterator",(function(){return f})),n.d(d,"createVertex",(function(){return Gt})),n.d(d,"getVertexHalfEdgeList",(function(){return Bt})),n.d(d,"hasNoHalfEdge",(function(){return Kt})),n.d(d,"hasOnlyOneHalfEdge",(function(){return qt})),n.d(d,"getAngleOfHalfEdge",(function(){return Jt})),n.d(d,"isPathContainsHalfEdge",(function(){return Zt})),n.d(d,"isPathContainsVertex",(function(){return Qt})),n.d(d,"isTwinInSamePath",(function(){return te})),n.d(d,"getPathOfHalfEdge",(function(){return ee})),n.d(d,"isOuterPath",(function(){return re})),n.d(d,"isInnerPath",(function(){return ie})),n.d(d,"splitHalfEdgeByVertex",(function(){return oe})),n.d(d,"getPolygonFromFaceOuter",(function(){return ue})),n.d(d,"getFaceOfPoint",(function(){return le})),n.d(d,"createGlobalFace",(function(){return he})),n.d(d,"queryChildFaceList",(function(){return se}));var v={};n.r(v),n.d(v,"register",(function(){return No})),n.d(v,"Wall",(function(){return Lo}));var p={};n.r(p),n.d(p,"register",(function(){return zo})),n.d(p,"Room",(function(){return qo}));var g={};n.r(g),n.d(g,"IDLE",(function(){return Ya})),n.d(g,"PICKING_FROM",(function(){return Ua})),n.d(g,"PICKING_TO",(function(){return Ga}));var y={};n.r(y),n.d(y,"STAGE",(function(){return g})),n.d(y,"plugin",(function(){return eu}));var b={};n.r(b),n.d(b,"Drawing",(function(){return On})),n.d(b,"use",(function(){return Ge})),n.d(b,"PIXI",(function(){return k})),n.d(b,"SCALE_MODE",(function(){return r})),n.d(b,"Wall",(function(){return v})),n.d(b,"Room",(function(){return p})),n.d(b,"StructureTool",(function(){return y}));var m={};n.r(m),n.d(m,"SingleDoor",(function(){return gs})),n.d(m,"DoubleDoor",(function(){return ys})),n.d(m,"SlidingDoor",(function(){return bs})),n.d(m,"ParentDoor",(function(){return ms})),n.d(m,"Bealock",(function(){return ws}));var w={};n.r(w),n.d(w,"BasicWindow",(function(){return Os})),n.d(w,"BoilerWindow",(function(){return xs})),n.d(w,"FloorWindow",(function(){return $s})),n.d(w,"LWindow",(function(){return Ts})),n.d(w,"UWindow",(function(){return js})),n.d(w,"LBoilerWindow",(function(){return ks})),n.d(w,"UBoilerWindow",(function(){return Es}));n("fd85"),n("15db"),n("c026"),n("4031"),n("1227");var O=n("e832"),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("framework",{staticClass:"h-100"})},$=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex text-monospace",staticStyle:{"font-size":"12px","user-select":"none"}},[n("div",{staticClass:"d-flex flex-column",staticStyle:{width:"300px"}},[n("core-state",{attrs:{drawing:t.drawing}}),n("div",{staticClass:"h-100 overflow-auto"},t._l(t.componentList,(function(e,r){return n("b-card",{key:r,attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{staticClass:"py-0 text-left",attrs:{block:"",variant:"info"},on:{click:function(e){return t.toggleState(r)}}},[t._v(t._s(e.title))])],1),n("b-collapse",{attrs:{visible:t.stateShowingList[r]}},[n(e.stateComponent,{tag:"component",attrs:{drawing:t.drawing}})],1)],1)})),1)],1),n("div",{ref:"drawing",staticClass:"overflow-hidden",staticStyle:{flex:"1"}}),n("div",{staticStyle:{width:"300px"}},[n("core-tool",{attrs:{drawing:t.drawing}}),n("div",t._l(t.componentList,(function(e,r){return n("b-card",{key:r,attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{staticClass:"py-0 text-left",attrs:{block:"",variant:"dark"},on:{click:function(e){return t.toggleTool(r)}}},[t._v(t._s(e.title))])],1),n("b-collapse",{attrs:{visible:t.toolShowingList[r]}},[n(e.toolComponent,{tag:"component",attrs:{drawing:t.drawing}})],1)],1)})),1)],1)])},j=[],k=(n("966c"),n("241c"),n("dddc"),n("9c6a")),E=n("3338"),S=function(){return{}},C=function(t){var e={data:S,created:E["c"],methods:{},getters:{},proxy:function(){return this}},n=t.data,r=void 0===n?e.data:n,i=t.created,o=void 0===i?e.created:i,a=t.methods,u=void 0===a?e.methods:a,c=t.getters,s=void 0===c?e.getters:c,l=t.proxy,h=void 0===l?e.proxy:l;for(var f in E["e"].Not.Function(r)&&E["a"].Throw.TypeError("Invalid `.data`, a function as constructor expected."),E["e"].Not.Function(o)&&E["a"].Throw.TypeError("Invalid `.created`, a function expected."),E["e"].Not.Object(u)&&E["a"].Throw.TypeError("Invalid `.methods`, an object expected."),u)E["e"].Not.Function(u[f])&&E["a"].Throw.TypeError("Invalid `.methods.".concat(f,"`, a function expected."));for(var d in E["e"].Not.Object(s)&&E["a"].Throw.TypeError("Invalid `.getters`, an object expected."),s)E["e"].Not.Function(s[d])&&E["a"].Throw.TypeError("Invalid `.getters.".concat(d,"`, a function expected."));return E["e"].Not.Function(h)&&E["a"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.data=r,e.created=o,e.methods=u,e.getters=s,e.proxy=h,e},F=function(){return{}},N=function(t){var e={groupIndex:0,interative:!1,hoverable:!1,focusable:!1,selectable:!1,draggable:!1,state:F,render:null,created:E["c"],destroy:E["c"],methods:{},getters:{},proxy:function(){return this}},n=t.groupIndex,r=void 0===n?e.groupIndex:n,i=t.interative,o=void 0===i?e.interative:i,a=t.hoverable,u=void 0===a?e.hoverable:a,c=t.focusable,s=void 0===c?e.focusable:c,l=t.selectable,h=void 0===l?e.selectable:l,f=t.draggable,d=void 0===f?e.draggable:f,v=t.state,p=void 0===v?e.state:v,g=t.render,y=void 0===g?e.render:g,b=t.created,m=void 0===b?e.created:b,w=t.destroy,O=void 0===w?e.destroy:w,x=t.methods,$=void 0===x?e.methods:x,T=t.getters,j=void 0===T?e.getters:T,k=t.proxy,S=void 0===k?e.proxy:k;for(var C in E["e"].Not.Number(r)&&E["a"].Throw.TypeError("Invalid `.elements[].groupIndex`, a number expected."),E["e"].Not.Boolean(o)&&E["a"].Throw.TypeError("Invalid `.elements[].interative`, a boolean expected."),E["e"].Not.Boolean(u)&&E["a"].Throw.TypeError("Invalid `.elements[].hoverable`, a boolean expected."),E["e"].Not.Boolean(s)&&E["a"].Throw.TypeError("Invalid `.elements[].focusable`, a boolean expected."),E["e"].Not.Boolean(h)&&E["a"].Throw.TypeError("Invalid `.elements[].selectable`, a boolean expected."),E["e"].Not.Boolean(d)&&E["a"].Throw.TypeError("Invalid `.elements[].draggable`, a boolean expected."),E["e"].Not.Function(p)&&E["a"].Throw.TypeError("Invalid `.elements[].state`, a function expected."),E["e"].Not.Function(y)&&E["e"].Not.Null(y)&&E["a"].Throw.TypeError("Invalid `.elements[].render`, a function or null expected."),E["e"].Not.Function(m)&&E["a"].Throw.TypeError("Invalid `.elements[].created`, a function expected."),E["e"].Not.Function(O)&&E["a"].Throw.TypeError("Invalid `.elements[].destroy`, a function expected."),E["e"].Not.Object($)&&E["a"].Throw.TypeError("Invalid `.elements[].methods`, an object as function map expected"),$)E["e"].Not.Function($[C])&&E["a"].Throw.TypeError("Invalid `.elements[].methods.".concat(C,"`, a function expected."));for(var N in E["e"].Not.Object(j)&&E["a"].Throw.TypeError("Invalid `.elements[].getters`, an object as function map expected"),j)E["e"].Not.Function(j[N])&&E["a"].Throw.TypeError("Invalid `.elements[].getters.".concat(N,"`, a function expected."));return E["e"].Not.Function(S)&&E["a"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.groupIndex=r,e.interative=o,e.hoverable=u,e.focusable=s,e.selectable=h,e.draggable=d,e.state=p,e.render=y,e.created=m,e.destroy=O,e.methods=$,e.getters=j,e.proxy=S,e},W=n("68d6"),M=n("57d2"),P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={namespace:null,version:null,dependencies:[],plugin:{},elements:{}},n=t.id,r=t.version,i=t.namespace,o=void 0===i?e.namespace:i,a=t.dependencies,u=void 0===a?e.dependencies:a,c=t.plugin,s=void 0===c?e.plugin:c,l=t.elements,h=void 0===l?e.elements:l;if(E["e"].Not.String(n)&&E["a"].Throw.TypeError("Invalid `.id`, a string expected."),E["e"].Not.String(r)&&E["a"].Throw.TypeError("Invalid `.version`, string expected."),E["e"].Not.String(o)&&E["e"].Not.Null(o)&&E["a"].Throw.TypeError("Invalid `.namespace`, a string or null expected."),E["e"].Not.Array(u))E["a"].Throw.TypeError("Invalid `.dependencies`, an array expected.");else{var f,d=Object(M["a"])(u);try{for(d.s();!(f=d.n()).done;){var v=Object(W["a"])(f.value,2),p=v[0],g=v[1];E["e"].Not.String(p)&&E["a"].Throw.TypeError("Invalid `.dependencies[".concat(g,"]`, a string expected."))}}catch(b){d.e(b)}finally{d.f()}}for(var y in E["e"].Not.Object(h)&&E["a"].Throw.TypeError("Invalid `.elements`, an object as map expected."),e.id=n,e.version=r,e.namespace=o,e.dependencies=u,e.plugin=C(s),h)e.elements[y]=N(h[y]);return e},H=0,I=1,L=n("862b"),D=n("c812"),R=n("98ad"),A=n("e82c"),_=(n("862d"),n("bbfc"),n("22f4"),n("e0d3"),n("2631"),Math),V=_.PI,z=2*V,X=function(t,e){},Y=[0,0],U=0,G=1,B=function(t,e,n,r){return Y[U]=t+n,Y[G]=e+r,Y},K=0,q=1,J=[0,0],Z=function(t,e,n,r){return J[K]=n-t,J[q]=r-e,J},Q=function(t,e,n,r){return t*n+e*r},tt=function(t,e,n){return J[K]=t*n,J[q]=e*n,J},et=function(t,e,n,r){return t*r-e*n},nt=function(t,e){return E["b"].sqrt(Q(t,e,t,e))},rt=function(t,e){return J[K]=-e,J[q]=t,J},it=function(t,e){var n=nt(t,e);return 0===n&&E["a"].throwError("Zero Vector CAN NOT be normalized."),J[K]=t/n,J[q]=e/n,J},ot=function(t,e){return J[K]=-t,J[q]=-e,J},at=(n("581e"),function(t){return t.slice(0)}),ut=function(t,e,n){var r=E["b"].cos(n),i=E["b"].sin(n);return J[K]=t*r-e*i,J[q]=t*i+e*r,J},ct=function(t,e,n,r){var i=it(n,r);return tt.apply(void 0,Object(A["a"])(i).concat([Q.apply(void 0,[t,e].concat(Object(A["a"])(i)))]))},st=function(t,e,n,r,i,a){return et.apply(o,Object(A["a"])(Z(n,r,i,a)).concat(Object(A["a"])(Z(i,a,t,e))))>0},lt=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return B.apply(void 0,Object(A["a"])(ut.apply(o,Object(A["a"])(Z(r,i,t,e)).concat([n]))).concat([r,i]))},ht=function(t,e,n,r,i,a){if(t===n&&e===r)return Y[U]=t,Y[G]=e,Y;var u=Z(t,e,n,r);if(0===et.apply(o,Object(A["a"])(u).concat([i,a])))return Y[U]=n,Y[G]=r,Y;var c=Q.apply(o,Object(A["a"])(u).concat([i,a]));return B.apply(void 0,[t,e].concat(Object(A["a"])(tt(i,a,c))))},ft=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(n?1:-1)*(t-e);return r>=0?r:r+z},dt=function(t){},vt=[0,0,1,0],pt=0,gt=1,yt=2,bt=3,mt=it,wt=Z,Ot=rt,xt=ot,$t=function(t,e,n,r){var i=Ot.apply(void 0,Object(A["a"])(mt.apply(void 0,Object(A["a"])(wt(t,e,n,r))))),o=Object(W["a"])(i,2),a=o[0],u=o[1];if(vt[pt]=t,vt[gt]=e,Q(a,u,t,e)>=0){var c=xt(a,u),s=Object(W["a"])(c,2),l=s[0],h=s[1];vt[yt]=l,vt[bt]=h}else vt[yt]=a,vt[bt]=u;return vt},Tt=[0,0,0],jt=0,kt=1,Et=2,St=function(t,e,n,r){return Tt[jt]=n,Tt[kt]=r,Tt[Et]=Q(n,r,t,e),Tt},Ct=function(t,e,n,r,i,o,a,u){var c=St(t,e,n,r),s=Object(W["a"])(c,3),l=s[0],h=s[1],f=s[2],d=St(i,o,a,u),v=Object(W["a"])(d,3),p=v[0],g=v[1],y=v[2],b=l*g-h*p,m=f*g-h*y,w=l*y-f*p;return 0===b?null:(0===h?(Y[U]=f/l,Y[G]=w/b):0===g?(Y[U]=y/p,Y[G]=w/b):0===l?(Y[U]=m/b,Y[G]=f/h):0===p?(Y[U]=m/b,Y[G]=y/g):(Y[U]=m/b,Y[G]=w/b),Y)},Ft=function(t,e,n,r,i,o){return(t-i)*(r-o)-(e-o)*(n-i)},Nt=function(t,e,n,r,i,o,a,u){var c=Ft(t,e,n,r,i,o),s=Ft(t,e,n,r,a,u);if(c*s>=0)return null;var l=Ft(i,o,a,u,t,e),h=l+c-s;if(l*h>=0)return null;var f=l/(s-c);return Y[U]=t+f*(n-t),Y[G]=e+f*(r-e),Y},Wt=[0,0,0,0],Mt=0,Pt=1,Ht=2,It=3,Lt=function(t,e,n,r,i,o){return Wt[Mt]=t+i,Wt[Pt]=e+o,Wt[Ht]=n+i,Wt[It]=r+o,Wt},Dt=function(t,e){for(var n=!1,r=t.length,i=0,o=r-1;i<r;o=i++){var a=t[i],u=t[o],c=a.y>e.y!==u.y>e.y&&e.x<(e.y-a.y)/(u.y-a.y)*(u.x-a.x)+a.x;c&&(n=!n)}return n},Rt=Object(D["a"])((function t(e,n){Object(L["a"])(this,t),this.x=e,this.y=n,this.incidentEdge=null})),At=Object(D["a"])((function t(){Object(L["a"])(this,t),this.origin=null,this.twin=null,this.incidentFace=null,this.next=null,this.previous=null})),_t=Object(D["a"])((function t(){Object(L["a"])(this,t),this.outerComponent=null,this.innerComponents=[]})),Vt=(n("c1c3"),9999),zt=regeneratorRuntime.mark(Xt);function Xt(t){var e,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=t.incidentEdge,!E["e"].Not.Null(e)){i.next=8;break}n=e,r=0;case 3:return i.next=5,n;case 5:n=n.twin.next,r++;case 7:if(n!==e&&r<Vt){i.next=3;break}case 8:case"end":return i.stop()}}),zt)}var Yt=regeneratorRuntime.mark(Ut);function Ut(t){var e,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e=t,n=0;case 1:return r.next=3,e;case 3:e=e.next,n++;case 5:if(e!==t&&n<Vt){r.next=1;break}case 6:case"end":return r.stop()}}),Yt)}var Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Rt(t,e)},Bt=function(t){var e,n=[],r=Object(M["a"])(Xt(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n},Kt=function(t){return E["e"].isNull(t.incidentEdge)},qt=function(t){return!Kt(t)&&t.incidentEdge===t.incidentEdge.twin.next},Jt=function(t){var e=t.origin,n=e.x,r=e.y,i=t.twin.origin,o=i.x,a=i.y;return Math.atan2(a-r,o-n)},Zt=function(t,e){var n,r=Object(M["a"])(Ut(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i===e)return!0}}catch(o){r.e(o)}finally{r.f()}return!1},Qt=function(t,e){var n,r=Object(M["a"])(Ut(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.origin===e)return!0}}catch(o){r.e(o)}finally{r.f()}return!1},te=function(t){return Zt(t,t.twin)},ee=function(t){var e,n=[],r=Object(M["a"])(Ut(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n},ne=(n("6495"),n("7e9e"),function(t){var e,n,r=null,i=-1/0;e=n=Number.MAX_SAFE_INTEGER;var o,a=Object(M["a"])(Ut(t));try{for(a.s();!(o=a.n()).done;){var u=o.value,c=u.origin,s=c.x,l=c.y,h=u.next.origin,f=h.x,d=h.y,v=(d-l)/(f-s);(s<e||s===e&&l<n||s===e&&l===n&&v>i)&&(e=s,n=l,i=v,r=u)}}catch(p){a.e(p)}finally{a.f()}return r}),re=function(t){var e=ne(t),n=e.previous.twin;return n!==e&&ft(Jt(n),Jt(e))<Math.PI},ie=function(t){return!re(t)},oe=function(t,e){var n=t,r=n.twin,i=new At,o=new At;e.incidentEdge=i,i.origin=o.origin=e,i.incidentFace=n.incidentFace,o.incidentFace=r.incidentFace,i.twin=r,r.twin=i,o.twin=n,n.twin=o;var a=n.next,u=r.next;return i.next=a,n.next=i,i.previous=n,a.previous=i,o.next=u,r.next=o,o.previous=r,u.previous=o,i},ae=function(t){return t.origin},ue=function(t){var e=t.outerComponent;return E["e"].isNull(e)?[]:ee(e).map(ae)},ce=(n("5e5b"),function(t,e,n){var r=t.twin.incidentFace;e.includes(r)||(e.push(r),n.push(r))}),se=function(t){var e,n=[t],r=[],i=Object(M["a"])(t.innerComponents);try{for(i.s();!(e=i.n()).done;){var o,a=e.value,u=Object(M["a"])(Ut(a));try{for(u.s();!(o=u.n()).done;){var c=o.value;ce(c,n,r)}}catch(p){u.e(p)}finally{u.f()}while(r.length){var s,l=Object(M["a"])(r.splice(0));try{for(l.s();!(s=l.n()).done;){var h,f=s.value,d=Object(M["a"])(Ut(f.outerComponent));try{for(d.s();!(h=d.n()).done;){var v=h.value;ce(v,n,r)}}catch(p){d.e(p)}finally{d.f()}}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){i.e(p)}finally{i.f()}return n.shift(),n},le=function t(e,n){var r=!!E["e"].isNull(e.outerComponent)||Dt(ue(e),n);if(r){var i,o=Object(M["a"])(se(e));try{for(o.s();!(i=o.n()).done;){var a=i.value,u=t(a,n);if(E["e"].Not.Null(u))return u}}catch(c){o.e(c)}finally{o.f()}return e}return null},he=function(){return new _t},fe=function(t){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid `className`, a string excepted.")},de=["x","y"],ve=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in de)E["e"].Not.Number(e[r])&&E["a"].Throw.TypeError("Invalid `".concat(de[r],"`, a number excepted."))},pe=function(t,e){var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n].call(this)}})};for(var r in e)n(r)},ge=function(t,e){var n=function(n){var r=e[n];t[n]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.call.apply(r,[this].concat(e))}};for(var r in e)n(r)},ye=n("d3de"),be=n("0879"),me=n("c95d"),we=(n("5a85"),n("aa83"),n("534d"),n("d50c"),n("4743")),Oe=n("dcb4"),xe=(n("0ffc"),n("68e1"),n("e0ca")),$e=n("3feb"),Te=(n("46b7"),n("46c3"),new Set),je=new k["Container"],ke=new WeakMap,Ee=function(t){return ke.get(t)},Se=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this),r.plugin=t,r.context=null,r.graphics=null,r.isDirty=!1,r._update=E["c"],r.collection.add(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"renderable",get:function(){return!1}},{key:"interactive",get:function(){return!1}},{key:"hoverable",get:function(){return!1}},{key:"focusable",get:function(){return!1}},{key:"selectable",get:function(){return!1}},{key:"draggable",get:function(){return!1}},{key:"drawing",get:function(){return this.plugin.drawing}},{key:"selecting",get:function(){return this.drawing.state.selecting===this}},{key:"hovering",get:function(){return this.drawing.state.hovering===this}},{key:"holding",get:function(){return this.drawing.state.holding===this}},{key:"focusing",get:function(){return this.drawing.state.focusing===this}},{key:"hover",value:function(){E["e"].isNull(this.drawing.state.holding)&&(this.drawing.setHovering(this),this.setDirty())}},{key:"cancelHover",value:function(){this.drawing.setHovering(),this.setDirty()}},{key:"focus",value:function(){var t=this.drawing.state.focusing;t!==this&&(this.drawing.setFocusing(this),Ce(this,"focus"),this.setDirty())}},{key:"emitBlur",value:function(){Ce(this,"blur"),this.setDirty()}},{key:"hold",value:function(){this.drawing.setHolding(this),this.setDirty()}},{key:"release",value:function(){this.drawing.setHolding(),this.setDirty()}},{key:"group",get:function(){return je}},{key:"application",get:function(){return this.drawing.application}},{key:"collection",get:function(){return Te}},{key:"show",value:function(){this.graphics.visible=!0}},{key:"hide",value:function(){this.graphics.visible=!1}},{key:"setDirty",value:function(){this.isDirty||(this.isDirty=!0,Ce(this,"dirty"))}},{key:"getBounds",value:function(){return this.graphics.getBounds()}},{key:"update",value:function(){this.isDirty&&(this.isDirty=!1,this.graphics.clear(),this._update(this.graphics),Ce(this,"render"))}},{key:"destroy",value:function(){E["e"].Not.Null(this.graphics)&&(this.graphics.destroy(),this.application.ticker.remove(this.observer)),this.collection.delete(this),Ce(this,"destroy"),Oe["a"].destroy(this)}}]),n}(Oe["a"].Emitter),Ce=function(t,e){t.emit(e,t.drawing.globalEvent)},Fe=Se,Ne=function(){function t(){Object(L["a"])(this,t),this.$proxy=this,this.$state=E["d"].freeze({})}return Object(D["a"])(t,[{key:"$data",get:function(){return Ee(this).plugin.context.$data}},{key:"$drawing",get:function(){return Ee(this).drawing.proxy}},{key:"$selecting",get:function(){return Ee(this).selecting}},{key:"$focusing",get:function(){return Ee(this).focusing}},{key:"$hovering",get:function(){return Ee(this).hovering}},{key:"$holding",get:function(){return Ee(this).holding}},{key:"$visable",get:function(){return Ee(this).graphics.visible}},{key:"$isDirty",get:function(){return Ee(this).isDirty}},{key:"$getBounds",value:function(){return Ee(this).getBounds()}},{key:"$show",value:function(){Ee(this).show()}},{key:"$hide",value:function(){Ee(this).hide()}},{key:"$setDirty",value:function(){Ee(this).setDirty()}},{key:"$destroy",value:function(){Ee(this).destroy()}},{key:"$on",value:function(t,e){return We(t),Me(e),Ee(this).on(t,e),this}},{key:"$off",value:function(t,e){return We(t),Me(e),Ee(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=Ee(this)).emit.apply(e,[t].concat(r)),this}},{key:"$focus",value:function(){var t=Ee(this);t.focusable&&t.focus()}},{key:"$toCanvas",value:function(t,e){return ve(t,e),Ee(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return ve(t,e),Ee(this).drawing.coordinate.toGeometry(t,e)}}]),t}(),We=function(t){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid event `type`, a string expected.")},Me=function(t){E["e"].Not.Function(t)&&E["a"].Throw.TypeError("Invalid event `listener`, a function expected.")},Pe=Ne,He=function(t,e){var n=E["e"].Not.Null(e.render),r=function(r){Object(be["a"])(a,r);var o=Object(me["a"])(a);function a(r){var u,c;Object(L["a"])(this,a),c=o.call(this,r);var s=new i;if(n){var l=new k["Graphics"];c.observer=function(){return c.update()},c.application.ticker.add(c.observer),c.group.addChild(l),c.graphics=l,c.graphics.name=t,c.graphics.interactive=e.interative,e.interative&&(l.on("pointermove",(function(){return Ce(Object(ye["a"])(c),"pointermove")})).on("pointerover",(function(){return Ce(Object(ye["a"])(c),"pointerover")})).on("pointerout",(function(){return Ce(Object(ye["a"])(c),"pointerout")})).on("pointerdown",(function(){return Ce(Object(ye["a"])(c),"pointerdown")})).on("pointerup",(function(){return Ce(Object(ye["a"])(c),"pointerup")})),e.hoverable&&l.on("pointerover",(function(){return c.hover()})).on("pointerout",(function(){return c.cancelHover()})),e.draggable&&l.on("pointerdown",(function(){return c.hold()})).on("pointerup",(function(){return c.release()})),e.focusable&&l.on("pointerdown",we["b"].stopPropagation).on("pointerdown",(function(){return c.focus()}))),c._update=e.render.bind(s)}c.context=s,ke.set(s,Object(ye["a"])(c));for(var h=arguments.length,f=new Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];return(u=e.created).call.apply(u,[s].concat(f)),c.setDirty(),c}return Object(D["a"])(a,[{key:"renderable",get:function(){return n}},{key:"interactive",get:function(){return this.renderable&&e.interative}},{key:"hoverable",get:function(){return this.interactive&&e.hoverable}},{key:"focusable",get:function(){return this.interactive&&e.focusable}},{key:"selectable",get:function(){return this.interactive&&e.selectable}},{key:"draggable",get:function(){return this.interactive&&e.draggable}},{key:"group",get:function(){return this.plugin.drawing.groupMap.get(a)}},{key:"collection",get:function(){return this.plugin.elementCollectionMap[t]}}]),a}(Fe),i=function(n){Object(be["a"])(i,n);var r=Object(me["a"])(i);function i(){var t;return Object(L["a"])(this,i),t=r.call(this),t.$proxy=e.proxy.call(Object(ye["a"])(t)),t.$state=E["d"].seal(e.state.call(Object(ye["a"])(t))),E["d"].freeze(Object(ye["a"])(t)),t}return Object(D["a"])(i,[{key:"$name",get:function(){return t}},{key:"$data",get:function(){return this.$plugin.$data}},{key:"$plugin",get:function(){return Ee(this).plugin.context}},{key:"$destroy",value:function(){Object(xe["a"])(Object($e["a"])(i.prototype),"$destroy",this).call(this),e.destroy.call(this)}}]),i}(Pe);return pe(i.prototype,e.getters),ge(i.prototype,e.methods),r},Ie=n("c812d"),Le=new WeakMap,De=function(t){return Le.get(t)},Re=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this),r.context=null,r.drawing=t,r.elementCollectionMap={},r}return Object(D["a"])(n,[{key:"forceUpdate",value:function(){for(var t in this.elementCollectionMap){var e,n=Object(M["a"])(this.elementCollectionMap[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.setDirty()}}catch(i){n.e(i)}finally{n.f()}}}}]),n}(Oe["a"].Emitter),Ae=Re,_e=function(){function t(e,n){Object(L["a"])(this,t),this.$id=e,this.$version=n,this.$proxy=this,this.$data=E["d"].freeze({})}return Object(D["a"])(t,[{key:"$drawing",get:function(){return De(this).drawing.proxy}},{key:"$getElementList",value:function(t){fe(t);var e=De(this).elementCollectionMap[t];E["e"].isUndefined(e)&&E["a"].throwError("The Element named `".concat(t,"` is NOT existed in this Plugin."));var n,r=[],i=Object(M["a"])(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o.context)}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"$hideElement",value:function(t){fe(t);var e=De(this).elementCollectionMap;if(t in e){var n,r=Object(M["a"])(e[t]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hide()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"$showElement",value:function(t){fe(t);var e=De(this).elementCollectionMap;if(t in e){var n,r=Object(M["a"])(e[t]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.show()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"$hideAll",value:function(){for(var t in De(this).elementCollectionMap)this.$hideElement(t)}},{key:"$showAll",value:function(){for(var t in De(this).elementCollectionMap)this.$showElement(t)}},{key:"$forceUpdate",value:function(){De(this).forceUpdate()}},{key:"$toCanvas",value:function(t,e){return ve(t,e),De(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return ve(t,e),De(this).drawing.coordinate.toGeometry(t,e)}},{key:"$on",value:function(t,e){return Ve(t),ze(e),De(this).on(t,e),this}},{key:"$off",value:function(t,e){return Ve(t),ze(e),De(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=De(this)).emit.apply(e,[t].concat(r)),this}}]),t}(),Ve=function(t){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid event `type`, a string expected.")},ze=function(t){E["e"].Not.Function(t)&&E["a"].Throw.TypeError("Invalid event `listener`, a function expected.")},Xe=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var i;for(var a in Object(L["a"])(this,n),i=e.call(this,t),r)i.elementCollectionMap[a]=new Set;return Le.set(i.context=new o,Object(ye["a"])(i)),i}return Object(D["a"])(n)}(Ae),o=function(i){Object(be["a"])(a,i);var o=Object(me["a"])(a);function a(){var r;return Object(L["a"])(this,a),r=o.call(this,t,e),r.$proxy=n.proxy.call(Object(ye["a"])(r)),r.$data=E["d"].seal(n.data()),E["d"].freeze(Object(ye["a"])(r)),r}return Object(D["a"])(a,[{key:"$createElement",value:function(t){fe(t);var e=r[t].Element;E["e"].isUndefined(e)&&E["a"].throwError("The Element named `".concat(t,"` is NOT existed in this Plugin."));for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=Object(Ie["a"])(e,[De(this)].concat(i)).context;return this.$emit("element-created",a.$proxy,t),a}}]),a}(_e);return ge(o.prototype,n.methods),pe(o.prototype,n.getters),i},Ye=new Map,Ue=[],Ge=function(t){var e=P(t),n=e.id,r=e.namespace,i=e.version,o=e.plugin,a=e.elements;Ue.some((function(t){return t.id===n}))&&E["a"].throwError("A Plugin id=".concat(n," is used."));var u={};for(var c in a)u[c]={index:a[c].groupIndex,Element:He(c,a[c])};var s=Xe(n,i,o,u);Ye.set(s,o.created),Ue.push({id:n,namespace:r,Plugin:s,Elements:Object.freeze(u)})},Be=function(t){var e,n=[],r=Object(M["a"])(Ue);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.id,a=i.namespace,u=i.Plugin,c=i.Elements,s=new u(t),l=t.Plugin.Proxy[o]=s.context.$proxy;for(var h in t.Plugin.Context[o]=s.context,E["e"].isString(a)&&(E["e"].isUndefined(t.proxy[a])?t.proxy[a]=l:console.warn('Registering namespace "'.concat(a,'" is duplicated.'))),c){var f=new k["Container"],d=c[h];f.name="".concat(h,"-group"),t.groupMap.set(d.Element,f),n.push({container:f,index:d.index})}n.sort((function(t,e){return t.index-e.index}));var v,p=Object(M["a"])(n);try{for(p.s();!(v=p.n()).done;){var g=v.value;t.application.stage.addChild(g.container)}}catch(y){p.e(y)}finally{p.f()}Ye.get(u).call(s.context)}}catch(y){r.e(y)}finally{r.f()}},Ke={antialias:!0},qe=100,Je={button:0,buttons:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},Ze=function(t){return E["e"].isNull(t)?null:t.context.$proxy};function Qe(t,e){return E["d"].freeze({get drawing(){return t.proxy},get button(){return Je.button},get buttons(){return Je.buttons},get ctrlKey(){return Je.ctrlKey},get shiftKey(){return Je.shiftKey},get altKey(){return Je.altKey},get metaKey(){return Je.metaKey},get pointerX(){return e.pointer.x},get pointerY(){return e.pointer.y},get virtualX(){return e.virtual.x},get virtualY(){return e.virtual.y},get hovering(){return Ze(e.hovering)},get focusing(){return Ze(e.focusing)},get selecting(){return Ze(e.selecting)},get holding(){return Ze(e.holding)}})}["mousedown","mouseup"].forEach((function(t){we["a"].addEventListener(we["c"].WINDOW,t,(function(t){Je.button=t.button,Je.buttons=t.buttons}))})),["keydown","keyup"].forEach((function(t){we["a"].addEventListener(we["c"].WINDOW,t,(function(t){Je.ctrlKey=t.ctrlKey,Je.shiftKey=t.shiftKey,Je.altKey=t.altKey,Je.metaKey=t.metaKey}))}));var tn=25,en=100,nn=100,rn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nn;Object(L["a"])(this,t),this.scale=tn,this.originX=e,this.originY=n}return Object(D["a"])(t,[{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn;this.scale=t}},{key:"move",value:function(t,e){this.originX=E["b"].round(t),this.originY=E["b"].round(e)}},{key:"toGeometry",value:function(t,e){var n=this.scale,r=this.originX,i=this.originY;return[(t-r)*n,(i-e)*n]}},{key:"toCanvas",value:function(t,e){var n=this.scale,r=this.originX,i=this.originY;return[r+t/n,i-e/n]}}]),t}(),on=function(){return{x:0,y:0}},an=function(){return{capturing:!0,capturedAt:null,pointer:on(),virtual:on(),hovering:null,focusing:null,selecting:null,holding:null}},un=(n("9588"),n("e28c"),function(){function t(){Object(L["a"])(this,t),this.disabledMap={},this.store=new Set}return Object(D["a"])(t,[{key:"register",value:function(t){this.store.add(t)}},{key:"remove",value:function(t){this.store.has(t)&&this.store.delete(t)}},{key:"from",value:function(t,e){var n=!1,r=[t,e],i=Array.from(this.store).filter(sn).sort(cn),o=function(t,e){E["e"].Not.Number(t)&&E["a"].Throw.TypeError("Invalid `x`, a number expected."),E["e"].Not.Number(e)&&E["a"].Throw.TypeError("Invalid `y`, a number expected."),r[0]=t,r[1]=e,n=!0};while(!n&&i.length>0)i.pop().handle(t,e,o);return r}}]),t}()),cn=function(t,e){return t.priority-e.priority},sn=function(t){return t.active},ln=new WeakMap,hn=function(t){return ln.get(t)},fn=["keydown","keyup"];function dn(t){we["a"].addEventListener(we["c"].WINDOW,t,this.keyboardEventListener)}function vn(t){we["a"].removeEventListener(we["c"].WINDOW,t,this.keyboardEventListener)}for(var pn,gn=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;Object(L["a"])(this,n),r=e.call(this,t),ln.set(t,Object(ye["a"])(r));var i=an(),o=Qe(Object(ye["a"])(r),i),a=new k["Application"](Ke),u=new un;return a.stage.interactive=!0,a.stage.hitArea=new k["Rectangle"],a.ticker.add((function(){return r.watchSnap()})).add((function(){return r.watchSize()})),a.stage.on("pointerdown",(function(){return yn(Object(ye["a"])(r),"pointerdown")})).on("pointerdown",(function(){return r.setFocusing()})).on("pointerup",(function(){return yn(Object(ye["a"])(r),"pointerup")})).on("pointerup",(function(){return r.setHolding()})).on("pointermove",(function(t){if(r.state.capturing){var e=t.data.global,n=e.x,o=e.y,a=i.pointer;a.x===n&&a.y===o||r.setPointer(n,o)}})),r.destroyed=!1,r.proxy=t,r.state=i,r.application=a,r.coordinate=new rn,r.globalEvent=o,r.snapManager=u,r.keyboardEventListener=function(t){return yn(Object(ye["a"])(r),t.type)},r.groupMap=new Map,r.Plugin={Proxy:{},Context:{}},Be(Object(ye["a"])(r)),E["d"].freeze(r.Plugin.Proxy),fn.forEach(dn,Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"canvasElement",get:function(){return this.application.view}},{key:"watchSize",value:function(){var t=this.application.view,e=t.parentElement;t.height===e.offsetHeight&&t.width===e.offsetWidth||(this.resize(),this.forceUpdateAll())}},{key:"watchSnap",value:function(){var t=this.state,e=t.capturedAt,n=t.virtual,r=t.pointer;if(!E["e"].isNull(e)){var i=Date.now();if(i-e>qe){var o=this.snapManager.from(r.x,r.y),a=Object(W["a"])(o,2);n.x=a[0],n.y=a[1],yn(this,"pointermove"),yn(this,"snap"),this.state.capturedAt=null}}}},{key:"mount",value:function(t){we["a"].appendChild(t,this.canvasElement),this.application.resizeTo=t,yn(this,"mount"),this.resize()}},{key:"destroy",value:function(){fn.forEach(vn,this),this.keyboardEventListener=null,we["a"].removeFromParent(this.canvasElement),Oe["a"].destroy(this),this.destroyed=!0}},{key:"resize",value:function(){var t=this.application,e=t.stage,n=t.view;this.application.resize(),e.hitArea.width=n.offsetWidth,e.hitArea.height=n.offsetHeight,yn(this,"resize")}},{key:"setPointer",value:function(t,e){this.state.pointer.x=this.state.virtual.x=t,this.state.pointer.y=this.state.virtual.y=e,this.state.capturedAt=Date.now(),yn(this,"pointermove")}},{key:"setHovering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.hovering=t}},{key:"setFocusing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.state.focusing;this.state.focusing=t,E["e"].Not.Null(e)&&e.emitBlur()}},{key:"setHolding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.holding=t}},{key:"forceUpdateAll",value:function(){for(var t in this.Plugin.Context)this.Plugin.Context[t].$forceUpdate()}}]),n}(Oe["a"].Emitter),yn=function(t,e){t.emit(e,t.globalEvent)},bn=function(t){return E["e"].isNull(t)?null:t.context.$proxy},mn=function(t){return[t.x,t.y]},wn=(pn={},Object(R["a"])(pn,H,(function(t,e){t.setScale(e)})),Object(R["a"])(pn,I,(function(t,e){t.setScaleByReference.apply(t,[e].concat(Object(A["a"])(t.pointer)))})),pn),On=function(){function t(){Object(L["a"])(this,t),new gn(this),E["d"].freeze(this)}return Object(D["a"])(t,[{key:"hovering",get:function(){return bn(hn(this).state.hovering)}},{key:"selecting",get:function(){return bn(hn(this).state.selecting)}},{key:"focusing",get:function(){return bn(hn(this).state.focusing)}},{key:"holding",get:function(){return bn(hn(this).state.holding)}},{key:"plugins",get:function(){return hn(this).Plugin.Proxy}},{key:"pointer",get:function(){return mn(hn(this).state.pointer)}},{key:"virtual",get:function(){return mn(hn(this).state.virtual)}},{key:"origin",get:function(){var t=hn(this).coordinate,e=t.originX,n=t.originY;return[e,n]}},{key:"scale",get:function(){return hn(this).coordinate.scale}},{key:"width",get:function(){return hn(this).application.view.width}},{key:"height",get:function(){return hn(this).application.view.height}},{key:"mount",value:function(t){E["a"].instanceOf(t,HTMLElement)||E["a"].Throw.TypeError("Invalid `element`, a HTMLElement expected."),hn(this).mount(t)}},{key:"resize",value:function(){hn(this).resize()}},{key:"destroy",value:function(){hn(this).destroy()}},{key:"setPointer",value:function(t,e){ve(t,e),hn(this).setPointer(t,e)}},{key:"setOrigin",value:function(t,e){ve(t,e);var n=hn(this);n.coordinate.move(t,e),n.forceUpdateAll()}},{key:"setScale",value:function(t){(E["e"].Not.Number(t)||t<0)&&E["a"].Throw.TypeError("Invalid scale, a number >0 expected.");var e=hn(this);e.coordinate.setScale(t),e.forceUpdateAll()}},{key:"setScaleByReference",value:function(t,e,n){var r,i;ve(e,n);var u=hn(this),c=this.origin,s=u.coordinate.toGeometry(e,n);this.setScale(t);var l=(r=u.coordinate).toCanvas.apply(r,Object(A["a"])(s)),h=o.fromTwoPoint.apply(o,Object(A["a"])(l).concat([e,n]));(i=u.coordinate).move.apply(i,Object(A["a"])(a.translate.apply(a,Object(A["a"])(c).concat(Object(A["a"])(h))))),u.forceUpdateAll()}},{key:"setScaleInMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;E["d"].values(r).includes(e)?wn[e](this,t):E["a"].Throw.TypeError("Invalid `mode`, a value of SCALE_MODE expected.")}},{key:"startCapture",value:function(){hn(this).state.capturing=!1}},{key:"stopCapture",value:function(){hn(this).state.capturing=!0}},{key:"on",value:function(t,e){return hn(this).on(t,e),this}},{key:"off",value:function(t,e){return hn(this).off(t,e),this}},{key:"registerSnap",value:function(t){hn(this).snapManager.register(t)}},{key:"removeSanp",value:function(t){hn(this).snapManager.remove(t)}}]),t}(),xn=new WeakMap,$n=function(t){return xn.get(t)},Tn=function(){function t(e){Object(L["a"])(this,t),xn.set(this,e)}return Object(D["a"])(t,[{key:"on",value:function(t,e){return jn(t),kn(e),$n(this).$on(t,e),this}},{key:"off",value:function(t,e){return jn(t),kn(e),$n(this).$off(t,e),this}}]),t}(),jn=function(t){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid event `type`, a string expected.")},kn=function(t){E["e"].Not.Function(t)&&E["a"].Throw.TypeError("In valid event `listener`, a function expected.")},En=new WeakMap,Sn=function(t){return En.get(t)},Cn=function(){function t(e){Object(L["a"])(this,t),En.set(this,e)}return Object(D["a"])(t,[{key:"on",value:function(t,e){return Fn(t),Nn(e),Sn(this).$on(t,e),this}},{key:"off",value:function(t,e){return Fn(t),Nn(e),Sn(this).$off(t,e),this}}]),t}(),Fn=function(t){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid event `type`, a string expected.")},Nn=function(t){E["e"].Not.Function(t)&&E["a"].Throw.TypeError("In valid event `listener`, a function expected.")},Wn=function(t){return C(t)},Mn=function(t){return N(t)},Pn=function(t){return P(t)},Hn=n("90a7"),In=(n("cbc2"),n("32ec"),n("6991"),function(t,e){var n,r=null,o=i.ROUND,a=Object(M["a"])(d.Iterator.allHalfEdgeOfVertex(t));try{for(a.s();!(n=a.n()).done;){var c=n.value,s=u.differ(e,d.getAngleOfHalfEdge(c),!1);s<o&&(o=s,r=c)}}catch(l){a.e(l)}finally{a.f()}return r}),Ln=function(t,e,n){if(E["e"].Not.Null(t.incidentEdge)){var r=t.x,i=t.y,o=n.x,a=n.y,u=Math.atan2(a-i,o-r),c=In(t,u),s=c.twin;e.previous=s,e.twin.next=s.next,s.next.previous=e.twin,s.next=e}e.origin=t,t.incidentEdge=e},Dn=function(t,e){var n,r=Object(M["a"])(d.Iterator.allHalfEdgeOfPath(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;i.incidentFace=e}}catch(o){r.e(o)}finally{r.f()}},Rn=function(t,e){t.twin=e,e.twin=t,t.next=e,e.next=t,t.previous=e,e.previous=t},An=function(t,e,n){var r=E["e"].isNull(t.incidentEdge)&&E["e"].isNull(e.incidentEdge),i=new d.Struct.HalfEdge,o=new d.Struct.HalfEdge;Rn(i,o),Ln(t,i,e),Ln(e,o,t);var a=r?d.getFaceOfPoint(n,t):i.previous.incidentFace||i.next.incidentFace,u=a.outerComponent,c=a.innerComponents;if(d.isTwinInSamePath(i)){i.incidentFace=o.incidentFace=a;var s=c.splice(0);d.isPathContainsHalfEdge(i,u)?a.outerComponent=i:c.push(i);var l,h=Object(M["a"])(s);try{for(h.s();!(l=h.n()).done;){var f=l.value;d.isPathContainsHalfEdge(i,f)||c.push(f)}}catch(j){h.e(j)}finally{h.f()}}else{var v=new d.Struct.Face,p=d.isOuterPath(o),g=d.isOuterPath(i),y=p?i:o,b=y.twin;Dn(b,v),y.incidentFace=a,v.outerComponent=b;var m=a.innerComponents.splice(0);g===p?a.outerComponent=y:a.innerComponents.push(y);var w,O=Object(M["a"])(m);try{for(O.s();!(w=O.n()).done;){var x=w.value,$=x.origin;if(!d.isPathContainsVertex(y,$)&&!d.isPathContainsHalfEdge(b,x)){var T=d.getFaceOfPoint(v,$)?v:a;x.incidentFace!==T&&Dn(x,T),T.innerComponents.push(x)}}}catch(j){O.e(j)}finally{O.f()}}return i},_n=function(t){t.incidentEdge=null,t.x=0,t.y=0},Vn=function(t){t.origin=null,t.twin=null,t.previous=null,t.next=null,t.incidentFace=null},zn=function(t){return t.outerComponent=null,t.innerComponents.length=0,t},Xn=function(t){var e=t.twin,n=t.previous,r=t.origin,i=null;return e===n?_n(r):(n.next=r.incidentEdge=e.next,i=e.next.previous=n),i},Yn=function(t){var e=t.incidentFace,n=t.twin,r=d.isTwinInSamePath(t),i=d.isOuterPath(t),o=Xn(t),a=Xn(n);if(r){var u,c=e.innerComponents,s=c.splice(0),l=[o,a].filter(E["e"].Not.Null).filter((function(t){var n=d.isOuterPath(t);return n?e.outerComponent=t:c.push(t),!n})),h=Object(M["a"])(s);try{var f=function(){var e=u.value;e!==t&&e!==n&&l.every((function(t){return!d.isPathContainsHalfEdge(t,e)}))&&c.push(e)};for(h.s();!(u=h.n()).done;)f()}catch($){h.e($)}finally{h.f()}}else{var v,p,g=o.incidentFace,y=a.incidentFace;if(i?(v=y,p=g):(v=g,p=y),d.isOuterPath(o))v.outerComponent=o;else{var b=v.innerComponents,m=v.innerComponents.splice(0).concat(p.innerComponents);b.push(o);var w,O=Object(M["a"])(m);try{for(O.s();!(w=O.n()).done;){var x=w.value;x===t||x===n||d.isPathContainsHalfEdge(o,x)||b.push(x)}}catch($){O.e($)}finally{O.f()}}Dn(o,v),zn(p)}Vn(t),Vn(n)},Un=function(t){return d.getVertexHalfEdgeList(t).forEach(Yn),t.incidentEdge=null,t},Gn=function(t){var e=t.incidentEdge.twin,n=e.next.twin,r=e.next.next,i=n.next.next;return Vn(e.twin),Vn(n.twin),_n(t),e.twin=n,n.twin=e,e.next=r,n.next=i,r.previous=e,i.previous=n,e},Bn="c",Kn="d",qn="D",Jn="Rg",Zn="_D",Qn="_Rg",tr=new WeakMap,er=function(t){return tr.get(t)},nr=function(t,e,n,r,i){function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(L["a"])(this,o),tr.set(t,this),this[Bn]=e}return Object(D["a"])(o,[{key:t,get:function(){return E["e"].isNull(this[Bn])}},{key:e,value:function(){this[Bn]=null,this[Zn]()}},{key:n,value:function(){this[Qn]()}},{key:r,value:function(){}},{key:i,value:function(){}}]),o}(Kn,qn,Jn,Zn,Qn),rr=function(){function t(){Object(L["a"])(this,t)}return Object(D["a"])(t,[{key:"mesh",get:function(){var t=er(this);return t[Kn]?null:t[Bn].$}},{key:"destroyed",get:function(){return er(this)[Kn]}}]),t}(),ir="v",or="F",ar="H",ur="E",cr="M",sr="e",lr="v",hr="f",fr="g",dr="mv",vr="mf",pr="mh",gr="CV",yr="M",br="L",mr="S",wr="G",Or="LV",xr="RV",$r="RE",Tr="HV",jr="HE",kr="HF",Er="TV",Sr="TH",Cr="TF",Fr="PF",Nr="AE",Wr="AV",Mr="AF",Pr="F",Hr="FV",Ir="FE",Lr="FF",Dr="l",Rr="VC",Ar="VD",_r="EC",Vr="ED",zr="FC",Xr="FD",Yr="HC",Ur="HD",Gr="t",Br="he",Kr="v",qr="e",Jr="f",Zr="n",Qr="p",ti="b",ei=new WeakMap,ni=function(t){return ei.get(t)},ri=function(t){return t[qr]},ii=function(t,e,n,r,i,o,a){Object(be["a"])(c,t);var u=Object(me["a"])(c);function c(t,e,n,r){var i;return Object(L["a"])(this,c),i=u.call(this,t,e),ei.set(t,Object(ye["a"])(i)),i.$=t,i[ir]=d.createVertex(n,r),i[Jn](),i}return Object(D["a"])(c,[{key:e,value:function(){var t=this[Bn];t[lr].add(this),t[dr].set(this[ir],this)}},{key:n,value:function(){this[ir]=null}},{key:r,value:function(){return d.getVertexHalfEdgeList(this[ir]).map(this[Bn][Sr])}},{key:i,value:function(){return this[ar]().map(ri)}},{key:o,value:function(){var t,e=new Set,n=Object(M["a"])(d.Iterator.allHalfEdgeOfVertex(this[ir]));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.add(r.incidentFace)}}catch(i){n.e(i)}finally{n.f()}return Array.from(e).map(this[Bn][Cr])}},{key:a,value:function(t,e){this[ir].x=t,this[ir].y=e}}]),c}(nr,Qn,Zn,ar,ur,or,cr),oi=function(t){return t.$},ai=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t,r,i){var o;return Object(L["a"])(this,n),o=e.call(this),new ii(Object(ye["a"])(o),t,r,i),Object.seal(Object(ye["a"])(o)),o}return Object(D["a"])(n,[{key:"x",get:function(){return ni(this)[ir].x}},{key:"y",get:function(){return ni(this)[ir].y}},{key:"move",value:function(t,e){return E["e"].Not.Number(t)&&E["a"].Throw.TypeError("Vertex.x MUST be a number."),E["e"].Not.Number(e)&&E["a"].Throw.TypeError("Vertex.y MUST be a number."),ni(this)[cr](t,e),this}},{key:"getFaceList",value:function(){return ni(this)[or]().map(oi)}},{key:"getHalfEdgeList",value:function(){return ni(this)[ar]().map(oi)}},{key:"getEdgeList",value:function(){return ni(this)[ur]().map(oi)}}]),n}(rr),ui="if",ci="af",si="iv",li="av",hi="ih",fi="ah",di=new WeakMap,vi=function(t){return di.get(t)},pi=function(t,e,n,r,i,o,a,u){Object(be["a"])(s,t);var c=Object(me["a"])(s);function s(t,e,n){var r;return Object(L["a"])(this,s),r=c.call(this,t,e),di.set(t,Object(ye["a"])(r)),r.$=t,r[hi]=n,n[qr]=n[ti][qr]=Object(ye["a"])(r),r[Jn](),r}return Object(D["a"])(s,[{key:e,value:function(){this[Bn][sr].add(this)}},{key:n,value:function(){this[hi]=null}},{key:r,get:function(){return this[hi][Jr]}},{key:i,get:function(){return this[fi][Jr]}},{key:o,get:function(){return this[hi][Kr]}},{key:a,get:function(){return this[fi][Kr]}},{key:u,get:function(){return this[hi][ti]}}]),s}(nr,Qn,Zn,ui,ci,si,li,fi),gi=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t,r){var i;return Object(L["a"])(this,n),i=e.call(this),new pi(Object(ye["a"])(i),t,r),Object.freeze(Object(ye["a"])(i)),i}return Object(D["a"])(n,[{key:"thisFace",get:function(){return vi(this)[ui].$}},{key:"thatFace",get:function(){return vi(this)[ci].$}},{key:"thisVertex",get:function(){return vi(this)[si].$}},{key:"thatVertex",get:function(){return vi(this)[li].$}},{key:"thisHalfEdge",get:function(){return vi(this)[hi].$}},{key:"thatHalfEdge",get:function(){return vi(this)[fi].$}}]),n}(rr),yi="f",bi="H",mi="C",wi="O",Oi="P",xi=new WeakMap,$i=function(t){return xi.get(t)},Ti=function(t,e,n,r,i,o,a){Object(be["a"])(c,t);var u=Object(me["a"])(c);function c(t,e,n){var r;return Object(L["a"])(this,c),r=u.call(this,t,e),xi.set(t,Object(ye["a"])(r)),r.$=t,r[yi]=n,r}return Object(D["a"])(c,[{key:e,value:function(){var t=this[Bn];t[hr].add(this),t[vr].set(this[yi],this)}},{key:n,value:function(){this[yi]=null}},{key:r,value:function(){return d.getPathOfHalfEdge(this[yi].outerComponent)}},{key:i,value:function(){return this[bi]().map(this[Bn][Sr])}},{key:o,value:function(){return d.queryChildFaceList(this[yi]).map(this[Bn][Cr])}},{key:a,value:function(t,e){var n=d.getPolygonFromFaceOuter(this[yi]);return l.containsPoint(n,{x:t,y:e})}}]),c}(nr,Qn,Zn,bi,wi,mi,Oi),ji=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t,r){var i;return Object(L["a"])(this,n),i=e.call(this),new Ti(Object(ye["a"])(i),t,r),Object.freeze(Object(ye["a"])(i)),i}return Object(D["a"])(n,[{key:"getChildFaceList",value:function(){return $i(this)[mi]().map(oi)}},{key:"getOuterHalfEdgeList",value:function(){return $i(this)[wi]().map(oi)}},{key:"containsPoint",value:function(t,e){return $i(this)[Oi](t,e)}}]),n}(rr),ki=function(t){return new ji(t,d.createGlobalFace())},Ei=new WeakMap,Si=function(t){return Ei.get(t)},Ci=function(t,e,n,r,i,o,a,u,c){Object(be["a"])(l,t);var s=Object(me["a"])(l);function l(t,e,n){var r;return Object(L["a"])(this,l),r=s.call(this,t,e),Ei.set(t,Object(ye["a"])(r)),r.$=t,r[Br]=n,r[qr]=null,r[Qn](),r}return Object(D["a"])(l,[{key:e,value:function(){this[Bn][pr].set(this[Br],this)}},{key:n,value:function(){this[Br]=null,this[qr]=null}},{key:r,get:function(){return this[Br].twin}},{key:i,get:function(){return this[Bn][Er](this[Br].origin)}},{key:o,get:function(){return this[Bn][Cr](this[Br].incidentFace)}},{key:a,get:function(){return this[Bn][Sr](this[Br].next)}},{key:u,get:function(){return this[Bn][Sr](this[Br].previous)}},{key:c,get:function(){return this[Bn][Sr](this[Gr])}}]),l}(nr,Qn,Zn,Gr,Kr,Jr,Zr,Qr,ti),Fi=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t,r){var i;return Object(L["a"])(this,n),i=e.call(this),new Ci(Object(ye["a"])(i),t,r),Object.freeze(Object(ye["a"])(i)),i}return Object(D["a"])(n,[{key:"vertex",get:function(){return Si(this)[Kr].$}},{key:"edge",get:function(){return Si(this)[qr].$}},{key:"face",get:function(){return Si(this)[Jr].$}},{key:"next",get:function(){return Si(this)[Zr].$}},{key:"previous",get:function(){return Si(this)[Qr].$}},{key:"back",get:function(){return Si(this)[ti].$}}]),n}(rr),Ni=new WeakMap,Wi=function(t){return Ni.get(t)},Mi=function(t,e,n,r,i,o,a,u,c,s,l,h,f,v,p,g,y,b,m){function w(t){var e;Object(L["a"])(this,w),Ni.set(t,this),this.$=t,this[sr]=new Set,this[lr]=new Set;var n=this[dr]=new Map,r=this[fr]=$i(ki(this));this[hr]=new Set;var i=this[vr]=new Map,o=this[pr]=new Map;this[Sr]=function(t){return o.get(t)};var a=r[yi];this[Cr]=function(t){return a===t?r:i.get(t)},this[Er]=function(t){return n.get(t)},this[Dr]=(e={},Object(R["a"])(e,Rr,E["c"]),Object(R["a"])(e,Ar,E["c"]),Object(R["a"])(e,_r,E["c"]),Object(R["a"])(e,Vr,E["c"]),Object(R["a"])(e,zr,E["c"]),Object(R["a"])(e,Xr,E["c"]),Object(R["a"])(e,Yr,E["c"]),Object(R["a"])(e,Ur,E["c"]),e)}return Object(D["a"])(w,[{key:t,value:function(t,e){var n=new ai(this,t,e);return this[Dr][Rr](n),n}},{key:e,value:function(t,e,n){t[cr](e,n)}},{key:n,value:function(t,e){var n=this[fr][yi],r=t[ir],i=e[ir],o=An(r,i,n),a=o.twin,u=o.incidentFace,c=a.incidentFace;if(u!==c){var s=this[Cr](u)?c:u,l=new ji(this,s);$i(l)[Jn](),this[Dr][zr](l)}var h=new Fi(this,o),f=new Fi(this,a),d=new gi(this,Si(h));return this[Dr][Yr](h),this[Dr][Yr](f),this[Dr][_r](d),d}},{key:r,value:function(t,e){var n=d.splitHalfEdgeByVertex(t[hi][Br],e[ir]),r=t[hi][Gr],i=new Fi(this,n),o=new Fi(this,r),a=new gi(this,Si(i));return t[fi][qr]=t,this[Dr][Yr](i),this[Dr][Yr](o),this[Dr][_r](a),a}},{key:i,value:function(t){var e=t[ir],n=d.getVertexHalfEdgeList(e);2!==n.length&&E["a"].throwError("The MeshHalfEdge number of this MeshVertex is NOT 2.");var r=this[Sr](e.incidentEdge.twin.next)[qr],i=this[Sr](e.incidentEdge)[qr],o=this[Sr](Gn(e));o[ti][qr]=i,i[hi]=o,r[hi]=n[0];var a,u=Object(M["a"])(n);try{for(u.s();!(a=u.n()).done;){var c=a.value;this[Sr](c)[qr]=r}}catch(s){u.e(s)}finally{u.f()}return this[Ir](),this[dr].delete(t[ir]),this[lr].delete(t),this[Dr][Ar](t.$),i}},{key:o,value:function(t){Un(t[ir]),this[Ir](),this[Lr]()}},{key:a,value:function(t){this[Or](t),t[qn](),this[dr].delete(t[ir]),this[lr].delete(t),this[Dr][Ar](t.$)}},{key:u,value:function(t){Yn(t[hi][Br]),this[Pr]()}},{key:c,value:function(t){return this[lr].has(t)}},{key:s,value:function(t){return this[sr].has(t)}},{key:l,value:function(t){return this[hr].has(t)}},{key:h,value:function(){return Array.from(this[sr])}},{key:f,value:function(){return Array.from(this[hr])}},{key:v,value:function(){return Array.from(this[lr])}},{key:p,value:function(t,e){var n=this[fr],r=n[yi],i=d.getFaceOfPoint(r,{x:t,y:e});return i===r?n:this[Cr](i)}},{key:g,value:function(){this[Hr](),this[Ir](),this[Lr]()}},{key:y,value:function(){var t,e=this[dr],n=this[lr],r=[],i=Object(M["a"])(e);try{for(i.s();!(t=i.n()).done;){var o=Object(W["a"])(t.value,2),a=o[0],u=o[1];E["e"].isNull(a.incidentEdge)&&(n.delete(u),u[qn](),r.push(a),this[Dr][Ar](u.$))}}catch(h){i.e(h)}finally{i.f()}for(var c=0,s=r;c<s.length;c++){var l=s[c];e.delete(l)}}},{key:b,value:function(){var t,e=this[pr],n=this[sr],r=[],i=new Set,o=Object(M["a"])(e);try{for(o.s();!(t=o.n()).done;){var a=Object(W["a"])(t.value,2),u=a[0],c=a[1];if(E["e"].isNull(u.twin)){var s=c[qr];n.delete(s),s[qn](),c[qn](),r.push(u),i.add(s),this[Dr][Ur](c.$)}}}catch(g){o.e(g)}finally{o.f()}for(var l=0,h=r;l<h.length;l++){var f=h[l];e.delete(f)}var d,v=Object(M["a"])(i);try{for(v.s();!(d=v.n()).done;){var p=d.value;this[Dr][Vr](p.$)}}catch(g){v.e(g)}finally{v.f()}}},{key:m,value:function(){var t,e=this[vr],n=this[hr],r=[],i=Object(M["a"])(e);try{for(i.s();!(t=i.n()).done;){var o=Object(W["a"])(t.value,2),a=o[0],u=o[1];E["e"].isNull(a.outerComponent)&&(n.delete(u),u[qn](),r.push(a),this[Dr][Xr](u.$))}}catch(h){i.e(h)}finally{i.f()}for(var c=0,s=r;c<s.length;c++){var l=s[c];e.delete(l)}}}]),w}(gr,yr,br,mr,wr,Or,xr,$r,Tr,jr,kr,Nr,Mr,Wr,Fr,Pr,Hr,Ir,Lr),Pi=function(){function t(){Object(L["a"])(this,t),new Mi(this),E["d"].seal(this)}return Object(D["a"])(t,[{key:"globalFace",get:function(){return Wi(this)[fr].$}},{key:"createVertex",value:function(t,e){return E["e"].Not.Number(t)&&E["a"].throwError("The `x` MUST be a number."),E["e"].Not.Number(e)&&E["a"].throwError("The `y` MUST be a number."),Wi(this)[gr](t,e)}},{key:"moveVertex",value:function(t,e,n){E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),E["e"].Not.Number(e)&&E["a"].Throw.TypeError("Vertex.x MUST be a number."),E["e"].Not.Number(n)&&E["a"].Throw.TypeError("Vertex.y MUST be a number.");var r=Wi(this),i=ni(t);return r[Tr](i)||E["a"].throwError("The `vertex` does NOT belong to this mesh."),r[yr](i,e,n)}},{key:"link",value:function(t,e){E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `thisVertex` MUST be a MeshVertex."),E["a"].instanceOf(e,ai)||E["a"].Throw.TypeError("The `thatVertex` MUST be a MeshVertex.");var n=Wi(this),r=ni(t),i=ni(e);return n[Tr](r)||E["a"].throwError("The `thisVertex` does NOT belong to this mesh."),n[Tr](i)||E["a"].throwError("The `thatVertex` does NOT belong to this mesh."),n[br](r,i)}},{key:"split",value:function(t,e){E["a"].instanceOf(t,gi)||E["a"].Throw.TypeError("The `edge` MUST be a MeshEdge."),E["a"].instanceOf(e,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var n=Wi(this),r=vi(t),i=ni(e);return n[jr](r)||E["a"].throwError("The `edge` does NOT belong to this mesh."),n[Tr](i)||E["a"].throwError("The `vertex` does NOT belong to this mesh."),n[mr](r,i)}},{key:"merge",value:function(t){E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=Wi(this)[wr](ni(t));return E["e"].isNull(e)?null:e.$}},{key:"clearVertex",value:function(t){E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=Wi(this),n=ni(t);e[Tr](n)||E["a"].throwError("The `vertex` does NOT belong to this mesh."),e[Or](n)}},{key:"removeVertex",value:function(t){E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=Wi(this),n=ni(t);e[Tr](n)||E["a"].throwError("The `vertex` does NOT belong to this mesh."),e[xr](n)}},{key:"removeEdge",value:function(t){E["a"].instanceOf(t,gi)||E["a"].Throw.TypeError("The `edge` MUST be a MeshEdge.");var e=Wi(this),n=vi(t);e[jr](n)||E["a"].throwError("The `edge` does NOT belong to this mesh."),e[$r](n)}},{key:"getAllVertexList",value:function(){return Wi(this)[Wr]().map(oi)}},{key:"getAllEdgeList",value:function(){return Wi(this)[Nr]().map(oi)}},{key:"getAllFaceList",value:function(){return Wi(this)[Mr]().map(oi)}},{key:"hasVertex",value:function(t){return E["a"].instanceOf(t,ai)||E["a"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),Wi(this)[Tr](ni(t))}},{key:"hasEdge",value:function(t){return E["a"].instanceOf(t,gi)||E["a"].Throw.TypeError("The `edge` MUST be a MeshEdge."),Wi(this)[jr](vi(t))}},{key:"hasFace",value:function(t){return E["a"].instanceOf(t,ji)||E["a"].Throw.TypeError("The `face` MUST be a MeshFace."),Wi(this)[kr]($i(t))}},{key:"getFaceOfPoint",value:function(t,e){return E["e"].Not.Number(t)&&E["a"].Throw.TypeError("The `x` MUST be a number."),E["e"].Not.Number(e)&&E["a"].Throw.TypeError("The `y` MUST be a number."),Wi(this)[Fr](t,e).$}},{key:"flush",value:function(){Wi(this)[Pr]()}},{key:"flushVertex",value:function(){Wi(this)[Hr]()}}]),t}(),Hi=function(){var t=Object(W["a"])(Li[Ii],2),e=t[0],n=t[1];E["d"].defineProperty(Pi.prototype,e,{get:function(){return Wi(this)[Dr][n]},set:function(t){E["e"].Not.Function(t)&&E["a"].Throw.TypeError("listener MUST be a function."),Wi(this)[Dr][n]=t}})},Ii=0,Li=[["onVertexCreate",Rr],["onVertexDestroy",Ar],["onEdgeCreate",_r],["onEdgeDestroy",Vr],["onFaceCreate",zr],["onFaceDestroy",Xr],["onHalfEdgeCreate",Yr],["onHalfEdgeDestroy",Ur]];Ii<Li.length;Ii++)Hi();var Di=["x","y"],Ri=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in Di)E["e"].Not.Number(e[r])&&E["a"].Throw.TypeError("Invalid `".concat(Di[r],"`, a number excepted."))},Ai=new WeakMap,_i=function(t){return Ai.get(t)},Vi=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Ai.set(Object(ye["a"])(r),t),E["d"].freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"x",get:function(){return _i(this).x}},{key:"y",get:function(){return _i(this).y}},{key:"move",value:function(t,e){return Ri(t,e),_i(this).move(t,e),this}},{key:"remove",value:function(){return _i(this).remove(),this}}]),n}(Tn),zi=new WeakMap,Xi=function(t){return zi.get(t)},Yi=function(){function t(e){Object(L["a"])(this,t),zi.set(this,e),E["d"].freeze(this)}return Object(D["a"])(t,[{key:"thickness",get:function(){return Xi(this).$state.thickness}},{key:"thisSurface",get:function(){return Xi(this).thisSurface.$proxy}},{key:"thatSurface",get:function(){return Xi(this).thatSurface.$proxy}},{key:"setThickness",value:function(t){(E["e"].Not.Number(t)||t<=0)&&E["a"].Throw.TypeError("Invalid `thickness`, a number >0 expected."),Xi(this).setThickness(t)}},{key:"remove",value:function(){Xi(this).remove()}}]),t}(),Ui=new WeakMap,Gi=function(t){return Ui.get(t)},Bi=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Ui.set(Object(ye["a"])(r),t),E["d"].freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"createCorner",value:function(t,e){return Ri(t,e),Gi(this).createCorner(t,e).$proxy}},{key:"removeCorner",value:function(t){return E["a"].instanceOf(t,Vi)||E["a"].Throw.TypeError("Invalid `corner`, a CornerProxy expected."),Gi(this).removeCorner(_i(t))}},{key:"createWall",value:function(t,e){return Ji(t,e),Gi(this).createWall(_i(t),_i(e)).$proxy}},{key:"removeWall",value:function(t){return E["a"].instanceOf(t,Yi)||E["a"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),Gi(this).removeWall(Xi(t))}},{key:"split",value:function(t,e,n){return Ri(e,n),E["a"].instanceOf(t,Yi)||E["a"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),Gi(this).split(Xi(t),e,n).$proxy}},{key:"merge",value:function(t){E["a"].instanceOf(t,Vi)||E["a"].Throw.TypeError("Invalid `corner`, a CornerProxy expected.");var e=_i(t);return 2!==e.length&&E["a"].throwError("The Wall number of this Corner is NOT 2."),Gi(this).merge(e).$proxy}},{key:"removeRoom",value:function(){}},{key:"getAllWallList",value:function(){return Gi(this).$getElementList("Wall").map(Ki)}},{key:"getAllRoomList",value:function(){return Gi(this).$getElementList("Room").map(Ki)}},{key:"getRoomByPoint",value:function(t,e){Ri(t,e)}},{key:"queryCorner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Ri(t,e),(E["e"].Not.Number(n)||n<=0)&&E["a"].Throw.TypeError("Invalid `range`, a number >0 expected.");var r=Gi(this).queryCorner(t,e,n);return E["e"].isNull(r)?null:r.$proxy}},{key:"mergeAll",value:function(){}},{key:"clearEmplyCorner",value:function(){}}]),n}(Cn),Ki=function(t){return t.$proxy},qi=["from","to"],Ji=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in qi)E["a"].instanceOf(e[r],Vi)||E["a"].Throw.TypeError("Invalid `".concat(qi[r],"`, a CornerProxy excepted."))},Zi=Wn({data:function(){return{mesh:new Pi,vertexToCorner:new Map,edgeToWall:new Map,faceToRoom:new Map,halfEdgeToSurface:new Map}},created:function(){var t=this,e=this.$data,n=e.mesh,r=e.vertexToCorner,i=e.edgeToWall,o=e.halfEdgeToSurface,a=e.faceToRoom;n.onFaceCreate=function(e){t.$createElement("Room",e)},n.onEdgeCreate=function(e){t.$createElement("Wall",e)},n.onVertexCreate=function(e){t.$createElement("Corner",e)},n.onHalfEdgeCreate=function(e){t.$createElement("Surface",e)},n.onFaceDestroy=function(t){a.get(t).$destroy(),a.delete(t)},n.onVertexDestroy=function(t){r.get(t).$destroy(),r.delete(t)},n.onEdgeDestroy=function(t){i.get(t).$destroy(),i.delete(t)},n.onHalfEdgeDestroy=function(t){o.get(t).$destroy(),o.delete(t)},this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}))},methods:{createCorner:function(t,e){var n=this.$data,r=n.mesh,i=n.vertexToCorner;return i.get(r.createVertex(t,e))},removeCorner:function(t){return t.remove()},createWall:function(t,e){var n=this.$data,r=n.mesh,i=n.edgeToWall;return i.get(r.link(t.vertex,e.vertex))},removeWall:function(t){t.remove()},split:function(t,e,n){var r=t.thisSurface.corner,i=t.thatSurface.corner,o=this.$data,a=o.mesh,u=o.edgeToWall,c=this.createCorner(e,n),s=a.split(t.$state.edge,c.vertex);return r.updateSurface(),i.updateSurface(),u.get(s)},merge:function(t){var e=this.$data,n=e.mesh,r=e.edgeToWall,i=n.merge(t.vertex),o=r.get(i);return o.thisSurface.corner.updateSurface(),o.thatSurface.corner.updateSurface(),o},queryCorner:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=Object(M["a"])(this.$data.vertexToCorner);try{for(i.s();!(n=i.n()).done;){var a=Object(W["a"])(n.value,2),u=a[0],c=a[1],s=o.fromTwoPoint(u.x,u.y,t,e);if(o.getLength.apply(o,Object(A["a"])(s))<r)return c}}catch(l){i.e(l)}finally{i.f()}return null}},proxy:function(){return new Bi(this)}}),Qi=6,to=function(t,e,n,r,i){var a=o.fromTwoPoint(t,e,n,r),u=o.normalize.apply(o,Object(A["a"])(a)),c=o.rotate90.apply(o,Object(A["a"])(u)),s=o.multiply.apply(o,Object(A["a"])(c).concat([i]));return o.clone(s)},eo=function(t){return[t.x,t.y]},no=function(t){return t.back.vertex},ro=function(t){return t.updateSurface()};function io(t){return this.get(t)}var oo=Mn({groupIndex:1e3,interative:!0,focusable:!0,hoverable:!0,draggable:!0,render:function(t){var e=this.$state.vertex,n=e.x,r=e.y,i=this.$toCanvas(n,r),o=Object(W["a"])(i,2),a=o[0],u=o[1];t.beginFill(65280).drawCircle(0,0,Qi).endFill(),t.x=a,t.y=u},created:function(t){this.$data.vertexToCorner.set(this.$state.vertex=t,this)},state:function(){return{vertex:null}},getters:{x:function(){return this.vertex.x},y:function(){return this.vertex.y},vertex:function(){return this.$state.vertex},length:function(){return 2}},methods:{move:function(t,e){this.$setDirty(),this.$state.vertex.move(t,e).getHalfEdgeList().map(no).map(io,this.$data.vertexToCorner).concat([this]).forEach(ro)},remove:function(){var t=this.$state.vertex,e=this.$data,n=e.mesh,r=e.vertexToCorner,i=t.getHalfEdgeList().map(no).map(io,r);n.removeVertex(t);var o,a=Object(M["a"])(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;u.updateSurface()}}catch(c){a.e(c)}finally{a.f()}return this},updateSurface:function(){var t=this.$data,e=t.edgeToWall,n=t.halfEdgeToSurface,r=this.$state.vertex,i=r.getHalfEdgeList(),u=i.length;for(var l in i){var h=i[(l+u-1)%u],f=i[l],d=e.get(h.edge),v=e.get(f.edge),p=f.vertex,g=f.next,y=f.previous,b=eo(y.vertex),m=eo(p),w=eo(g.vertex),O=to.apply(void 0,Object(A["a"])(b).concat(Object(A["a"])(m),[d.$state.thickness/2])),x=to.apply(void 0,Object(A["a"])(m).concat(Object(A["a"])(w),[v.$state.thickness/2])),$=o.clone(a.translate.apply(a,Object(A["a"])(m).concat(Object(A["a"])(O)))),T=o.clone(a.translate.apply(a,Object(A["a"])(m).concat(Object(A["a"])(x)))),j=[].concat(Object(A["a"])(a.translate.apply(a,Object(A["a"])(b).concat(Object(A["a"])(O)))),Object(A["a"])($)),k=[].concat(Object(A["a"])(T),Object(A["a"])(a.translate.apply(a,Object(A["a"])(w).concat(Object(A["a"])(x))))),S=s.intersectSegment.apply(s,Object(A["a"])(j).concat(Object(A["a"])(k))),C=n.get(f),F=n.get(y);if(E["e"].isNull(S)){var N=c.intersectLine.apply(c,Object(A["a"])($).concat(Object(A["a"])(O),Object(A["a"])(T),Object(A["a"])(x)));E["e"].isNull(N)?(F.setTarget.apply(F,Object(A["a"])($)),C.setOrigin.apply(C,Object(A["a"])(T))):(F.setTarget.apply(F,Object(A["a"])(N)),C.setOrigin.apply(C,Object(A["a"])(N)))}else F.setTarget.apply(F,Object(A["a"])(S)),C.setOrigin.apply(C,Object(A["a"])(S));v.$setDirty()}}},proxy:function(){return new Vi(this)}},Zi),ao=10066329,uo=3394815,co=Mn({groupIndex:900,interative:!0,selectable:!0,hoverable:!0,render:function(t){var e,n,r,i=this.$state.edge,o=i.thisVertex,a=i.thatVertex,u=[o.x,o.y],c=[a.x,a.y],s=this.thisSurface,l=this.thatSurface;(e=(n=(r=t.beginFill(this.$hovering?uo:ao)).drawPolygon.apply(r,Object(A["a"])(this.$toCanvas.apply(this,u)).concat(Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(s.origin))),Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(s.target))),Object(A["a"])(this.$toCanvas.apply(this,c)),Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(l.origin))),Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(l.target))))).endFill().lineStyle(1,16711680)).moveTo.apply(n,Object(A["a"])(this.$toCanvas.apply(this,u)))).lineTo.apply(e,Object(A["a"])(this.$toCanvas.apply(this,c)))},created:function(t){var e=this,n=t.thisVertex,r=t.thatVertex,i=this.$data,o=i.edgeToWall,a=i.vertexToCorner;o.set(this.$state.edge=t,this),a.get(n).updateSurface(),a.get(r).updateSurface(),this.$on("dirty",(function(){var t=e.thisSurface,n=e.thatSurface,r=t.room,i=n.room;E["e"].Not.Null(r)&&r.$setDirty(),E["e"].Not.Null(i)&&i.$setDirty(),t.emitChange(),n.emitChange()}))},state:function(){return{type:0,thickness:300,edge:null}},getters:{thisSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thisHalfEdge)},thatSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thatHalfEdge)}},methods:{setThickness:function(t){this.$state.thickness=t,this.$setDirty()},remove:function(){var t=this.thisSurface.corner,e=this.thatSurface.corner;return this.$data.mesh.removeEdge(this.$state.edge),t.updateSurface(),e.updateSurface(),this.$proxy}},proxy:function(){return new Yi(this)}},Zi),so=new WeakMap,lo=function(t){return so.get(t)},ho=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),so.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"back",get:function(){return lo(this).back.$proxy}},{key:"previous",get:function(){return lo(this).previous.$proxy}},{key:"next",get:function(){return lo(this).next.$proxy}},{key:"corner",get:function(){return lo(this).corner.$proxy}},{key:"wall",get:function(){return lo(this).wall.$proxy}},{key:"room",get:function(){return lo(this).room.$proxy}},{key:"origin",get:function(){return lo(this).origin}},{key:"target",get:function(){return lo(this).target}},{key:"originSafe",get:function(){return this.origin.slice(0)}},{key:"targetSafe",get:function(){return this.target.slice(0)}}]),n}(Tn),fo=function(t,e,n){n[0]=t,n[1]=e},vo=Mn({groupIndex:0,state:function(){return{halfEdge:null,origin:[0,0],target:[0,0]}},created:function(t){this.$data.halfEdgeToSurface.set(this.$state.halfEdge=t,this)},getters:{next:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.next)},previous:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.previous)},back:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.back)},corner:function(){return this.$data.vertexToCorner.get(this.$state.halfEdge.vertex)},wall:function(){return this.$data.edgeToWall.get(this.$state.halfEdge.edge)},room:function(){var t=this.$state.halfEdge.face,e=this.$data.faceToRoom.get(t);return E["e"].isUndefined(e)?null:e},origin:function(){return this.$state.origin},target:function(){return this.$state.target}},methods:{setOrigin:function(t,e){return fo(t,e,this.$state.origin),this},setTarget:function(t,e){return fo(t,e,this.$state.target),this},emitChange:function(){this.$emit("change")}},proxy:function(){return new ho(this)}},Zi),po=n("7a28"),go=new WeakMap,yo=function(t){return go.get(t)},bo=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),go.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"area",get:function(){return 0}},{key:"bounds",get:function(){return yo(this).$getBounds()}},{key:"setFloor",value:function(t){return yo(this).setFloor(t)}}]),n}(Tn),mo=k;function wo(t){return this.get(t)}var Oo=Mn({groupIndex:800,interative:!0,selectable:!0,hoverable:!0,render:function(t){var e,n=[],r=this.$drawing,i=r.origin,o=r.scale,a=this.$state.face.getOuterHalfEdgeList().map(wo,this.$data.halfEdgeToSurface),u=Object(M["a"])(a);try{for(u.s();!(e=u.n()).done;){var c=e.value;n.push.apply(n,Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(c.origin))).concat(Object(A["a"])(this.$toCanvas.apply(this,Object(A["a"])(c.target)))))}}catch(s){u.e(s)}finally{u.f()}this.$state.floor&&t.beginTextureFill({texture:this.$state.floor,matrix:new mo.Matrix(5/o,0,0,5/o,i[0],i[1])}),t.drawPolygon(n).endFill()},state:function(){return{face:null,floor:null}},created:function(t){this.$data.faceToRoom.set(this.$state.face=t,this)},methods:{setFloor:function(t){var e=this;return Object(po["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,mo.Texture.fromURL(t);case 2:e.$state.floor=n.sent,e.$setDirty();case 4:case"end":return n.stop()}}),n)})))()}},proxy:function(){return new bo(this)}},Zi),xo="com.3dnest.spoke.structure",$o="structure",To=Pn({id:xo,namespace:$o,version:Hn["a"],plugin:Zi,elements:{Corner:oo,Wall:co,Surface:vo,Room:Oo}}),jo=n("cd4a"),ko=new WeakMap,Eo=function(t){return ko.get(t)},So=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),ko.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"createHollow",value:function(t,e,n){return Eo(this).createHollow(t,e,n)}}]),n}(Cn),Co=Wn({methods:{createHollow:function(t,e,n){return this.$createElement("Hollow",t,e,n)}},proxy:function(){return new So(this)}}),Fo={},No=function(t,e,n){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid `name`, a string expected."),E["e"].Not.Function(e.render)&&E["a"].Throw.TypeError("Invalid `material`, a function expected."),t in Fo&&console.warn('Duplicated material name="'.concat(t,'". The original is replaced.')),Fo[t]=e},Wo=function(t){return Fo[t]},Mo=new WeakMap,Po=function(t){return Mo.get(t)},Ho=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Mo.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"surface",get:function(){return Po(this).surface}},{key:"width",get:function(){return Po(this).width}},{key:"offset",get:function(){return Po(this).offset}},{key:"flip",value:function(){Po(this).flip()}},{key:"toggleSurface",value:function(){Po(this).toggleSurface()}},{key:"setSurface",value:function(t){Po(this).setSurface(t)}},{key:"setMaterial",value:function(t){Po(this).setMaterial(t)}},{key:"setOffset",value:function(t){Po(this).setOffset(t)}},{key:"setWidth",value:function(t){Po(this).setWidth(t)}},{key:"remove",value:function(){Po(this).remove()}}]),n}(Tn),Io=Mn({groupIndex:1100,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,offset:0,materialName:"",fliped:!1,width:0,listener:E["c"]}},getters:{surface:function(){return this.$state.surface},width:function(){return this.$state.width},offset:function(){return this.$state.offset}},created:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.$state.listener=function(){return n.$setDirty()},this.setMaterial(t),this.setSurface(e),this.setOffset(r),this.setWidth(Wo(t).width)},destroy:function(){var t=this.$state.surface;t.off&&t.off("change",this.$state.listener)},render:function(t){var e=this.$state,n=e.surface,r=e.width,i=e.fliped,u=e.offset,c=e.materialName,s=this.$drawing.scale,l=n.corner,h=n.back.corner,f={width:r/s,height:n.wall.thickness/s,fliped:i,scale:s,hover:this.$hovering,focus:this.$focusing,hold:this.$holding};Wo(c).render(t,f);var d=this.$toCanvas(l.x,l.y),v=this.$toCanvas(h.x,h.y),p=o.normalize.apply(o,Object(A["a"])(o.fromTwoPoint.apply(o,Object(A["a"])(d).concat(Object(A["a"])(v))))),g=Object(W["a"])(p,2),y=g[0],b=g[1],m=a.translate.apply(a,Object(A["a"])(d).concat(Object(A["a"])(o.multiply(y,b,u/s)))),w=Object(W["a"])(m,2);t.x=w[0],t.y=w[1],t.rotation=E["b"].atan2(b,y)},methods:{flip:function(){this.$state.fliped=!this.$state.fliped,this.$setDirty()},toggleSurface:function(){var t=this.$state.surface.corner,e=this.$state.surface.back.corner,n=o.getLength.apply(o,Object(A["a"])(o.fromTwoPoint(t.x,t.y,e.x,e.y)));this.setOffset(n-this.$state.offset),this.setSurface(this.$state.surface.back)},setSurface:function(t){var e=this.$state.surface;e&&e.off&&this.$state.surface.off("change",this.$state.listener),t&&t.on&&t.on("change",this.$state.listener),this.$state.surface=t,this.$setDirty()},setMaterial:function(t){this.$state.materialName=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},remove:function(){this.$destroy()}},proxy:function(){return new Ho(this)}},Co),Lo={id:"com.3dnest.spoke.wall",namespace:"wall",version:jo["a"],plugin:Co,elements:{Hollow:Io}},Do=new WeakMap,Ro=function(t){return Do.get(t)},Ao=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Do.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"createFurniture",value:function(t,e,n,r,i,o){return Ro(this).createFurniture(t,e,n,r,i,o)}}]),n}(Cn),_o=Wn({methods:{createFurniture:function(t,e,n,r,i,o){return this.$createElement("Furniture",t,e,n,r,i,o)}},proxy:function(){return new Ao(this)}}),Vo=(n("0b89"),{}),zo=function(t,e){E["e"].Not.String(t)&&E["a"].Throw.TypeError("Invalid `name`, a string expected."),E["e"].Not.Function(e)&&E["a"].Throw.TypeError("Invalid `material`, a function expected."),t in Vo&&we["c"].Console.warn('Duplicated material name="'.concat(t,'". The original is replaced.')),Vo[t]=e},Xo=function(t){return t in Vo||we["c"].Console.warn('material name="'.concat(t,'" is not exist.')),Vo[t]},Yo=new WeakMap,Uo=function(t){return Yo.get(t)},Go=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Yo.set(Object(ye["a"])(r),t),Object.freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"width",get:function(){return Uo(this).width}},{key:"height",get:function(){return Uo(this).height}},{key:"rotation",get:function(){return Uo(this).rotation}},{key:"x",get:function(){return Uo(this).x}},{key:"y",get:function(){return Uo(this).y}},{key:"setFill",value:function(t){Uo(this).setFill(t)}},{key:"setRoom",value:function(t){Uo(this).setRoom(t)}},{key:"setWidth",value:function(t){Uo(this).setWidth(t)}},{key:"setHeight",value:function(t){Uo(this).setHeight(t)}},{key:"setOffset",value:function(t,e){Uo(this).setOffet(t,e)}},{key:"setRotation",value:function(t){Uo(this).setRotation(t)}},{key:"setPosition",value:function(t,e){Uo(this).setPosition(t,e)}}]),n}(Tn),Bo=Mn({groupIndex:1200,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{fill:"",width:0,height:0,room:null,offsetX:0,offsetY:0,x:0,y:0,rotation:0,listener:E["c"]}},getters:{width:function(){return this.$state.width},height:function(){return this.$state.height},rotation:function(){return this.$state.rotation},x:function(){return this.$state.x},y:function(){return this.$state.y}},created:function(t,e,n,r,i,o){var a=this;this.setRoom(o),this.setWidth(t),this.setHeight(e),this.setFill(i),this.setPosition(n,r),o.on("dirty",this.$state.listener=function(){return a.$setDirty()})},destroy:function(){this.$state.room.off("dirty",this.$state.listener)},render:function(t){var e=this.$state,n=e.width,r=e.height,i=e.rotation,o=e.fill,a=this.$drawing.scale,u={width:n/a,height:r/a};t.drawRect(0,0,u.width,u.height),t.pivot.x=u.width/2,t.pivot.y=u.height/2;var c=Xo(o);c&&c(t,u);var s=this.$toCanvas(this.$state.x,this.$state.y),l=Object(W["a"])(s,2);t.x=l[0],t.y=l[1],t.rotation=i},methods:{setFill:function(t){this.$state.fill=t,this.$setDirty()},setRoom:function(t){this.$state.room=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},setPosition:function(t,e){var n=this.$state.room.bounds,r=this.$toGeometry(n.left,n.bottom),i=Object(W["a"])(r,2),o=i[0],a=i[1];this.$state.x=t,this.$state.y=e,this.$state.offsetX=t-o,this.$state.offsetY=e-a,this.$setDirty()},setOffset:function(t,e){var n=this.$state.room.bounds,r=this.$toGeometry(n.left,n.bottom),i=Object(W["a"])(r,2),o=i[0],a=i[1];this.$state.offsetX=t,this.$state.offsetY=e;var u=[o+t,a+e];this.$state.x=u[0],this.$state.y=u[1],this.$setDirty()}},proxy:function(){return new Go(this)}},_o),Ko=n("ca8e"),qo=Pn({id:"com.3dnest.spoke.room",namespace:"room",version:Ko["a"],plugin:_o,elements:{Furniture:Bo}}),Jo=n("afc2"),Zo=new WeakMap,Qo=function(t){return Zo.get(t)},ta=function(){function t(e){Object(L["a"])(this,t),Zo.set(this,e),E["d"].freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){Qo(this).setShowing(!0)}},{key:"hide",value:function(){Qo(this).setShowing(!1)}}]),t}(),ea=Wn({data:function(){return{showing:!1,layerList:[]}},created:function(){var t=this.$createElement("RectangularGrid");this.$data.layerList.push(t)},methods:{setShowing:function(t){this.$data.showing=t,this.$forceUpdate()}},proxy:function(){return new ta(this)}}),na=(n("c0e6"),n("2252"),new WeakMap),ra=Object(D["a"])((function t(e){Object(L["a"])(this,t),na.set(this,e),E["d"].freeze(this)})),ia=[5,2,1],oa=50;function aa(t){return this>=t}var ua=function(t){var e=oa*t,n=E["b"].pow(10,E["b"].floor(E["b"].log10(e)));return ia.find(aa,E["b"].round(e/n))*n},ca=function(t,e,n){return t.moveTo(0,e).lineTo(n,e)},sa=function(t,e,n){return t.moveTo(e,0).lineTo(e,n)},la=Mn({groupIndex:0,state:function(){return{active:!0}},render:function(t){var e=this.$drawing,n=e.width,r=e.height,i=e.scale,o=e.origin,a=Object(W["a"])(o,2),u=a[0],c=a[1],s=ua(i),l=function(t){return s*t/i};t.lineStyle(1,255,1,0);var h=0,f=0;for(h=1;(f=l(h))<u;h++)sa(t,E["b"].round(u-f),r);for(h=1;(f=l(h))<n-u;h++)sa(t,E["b"].round(u+f),r);for(h=1;(f=l(h))<c;h++)ca(t,E["b"].round(c-f),n);for(h=1;(f=l(h))<r-c;h++)ca(t,E["b"].round(c+f),n);t.lineStyle(1,16711680,1,0).moveTo(0,c).lineTo(n,c).moveTo(u,0).lineTo(u,r)},created:function(){var t=this;this.$drawing.registerSnap({name:"grid-point",priority:-1/0,get active(){return t.$state.active},handle:function(e,n,r){var i=ua(t.$drawing.scale),o=t.$toGeometry(e,n),a=o.map(ha,i),u=t.$toCanvas.apply(t,Object(A["a"])(a));r.apply(void 0,Object(A["a"])(u))}})},proxy:function(){return new ra(this)}},ea);function ha(t){return E["b"].round(t/this)*this}var fa=4,da=Mn({groupIndex:1e4,created:function(){var t=this;this.$drawing.on("snap",(function(){return t.$setDirty()}))},render:function(t){t.lineStyle(1,13421772).moveTo(-fa,-fa).lineTo(fa,fa).moveTo(fa,-fa).lineTo(-fa,fa);var e=Object(W["a"])(this.$drawing.virtual,2);t.x=e[0],t.y=e[1]}},ea),va=Pn({id:"com.3dnest.spoke.grid",namespace:"grid",version:Jo["a"],plugin:ea,elements:{RectangularGrid:la,Crosshair:da}}),pa=n("de44"),ga=50,ya=function(t,e){var n=t.corner,r=t.back.corner,i=o.normalize.apply(o,Object(A["a"])(o.fromTwoPoint(n.x,n.y,r.x,r.y))),u=Object(W["a"])(i,2),c=u[0],s=u[1],l=a.translate.apply(a,[n.x,n.y].concat(Object(A["a"])(o.multiply(c,s,e)))),h=Object(W["a"])(l,2),f=h[0],d=h[1];return[f,d]},ba=function(t,e,n){var r=t.corner,i=t.back.corner;return a.project.apply(a,[e,n].concat(Object(A["a"])(c.fromSegment(r.x,r.y,i.x,i.y))))},ma=function(t,e,n){var r=t.corner,i=ba(t,e,n);return o.getLength.apply(o,Object(A["a"])(o.fromTwoPoint.apply(o,[r.x,r.y].concat(Object(A["a"])(i)))))},wa=function(t,e,n,r,i){var u=null,c=null,s=0;if(t.forEach((function(t){var r=ba(t.thisSurface,e,n),i=Object(W["a"])(r,2),a=i[0],u=i[1],l=Math.min(t.thisSurface.corner.x,t.thatSurface.corner.x),h=Math.max(t.thisSurface.corner.x,t.thatSurface.corner.x),f=Math.min(t.thisSurface.corner.y,t.thatSurface.corner.y),d=Math.max(t.thisSurface.corner.y,t.thatSurface.corner.y);if(!(a<l||a>h||u<f||u>d)){var v=o.getLength.apply(o,Object(A["a"])(o.fromTwoPoint(e,n,a,u)));(!c||v<s)&&(c=t,s=v)}})),!c||s/r>ga)i.corner.x=e,i.corner.y=n,i.back.corner.x=e+10,i.back.corner.y=n,u=i;else{var l=c.thisSurface,h=c.thatSurface;u=a.toLeftOfSegment(e,n,h.corner.x,h.corner.y,l.corner.x,l.corner.y)?h:l}return u},Oa=function(t,e,n){this.name="virtual",this.corner={x:t,y:e},this.back={corner:{x:t+10,y:e}},this.wall={thickness:n}},xa=new WeakMap,$a=function(t){return xa.get(t)},Ta=function(){function t(e){Object(L["a"])(this,t),xa.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"activate",value:function(){return $a(this).activate()}},{key:"deactivate",value:function(){return $a(this).deactivate()}},{key:"createHollow",value:function(t){return $a(this).createHollow(t)}}]),t}(),ja=Wn({created:function(){var t=this,e=this.$data.headHandler=this.$createElement("HeadHandler"),n=this.$data.rearHandler=this.$createElement("RearHandler");this.$drawing.wall.on("element-created",(function(r){t.bindHollow(r),r.on("focus",(function(e){t.$data.currentHollow=e.focusing,t.activate()})).on("blur",(function(r){var i=r.holding;i!==e.$proxy&&i!==n.$proxy&&t.deactivate()}))}))},data:function(){return{currentHollow:null,headHandler:null,rearHandler:null,virtualSurface:new Oa(0,0,200),creatingHollow:null}},methods:{activate:function(){this.$data.headHandler.show(),this.$data.rearHandler.show()},deactivate:function(){this.$data.currentHollow=null,this.$data.headHandler.hide(),this.$data.rearHandler.hide()},bindHollow:function(t){var e=this;t.on("pointerdown",(function(n){e.hollowAdjust(t,n)}))},hollowAdjust:function(t,e){var n=this,r=this.$drawing,i=e?ma.apply(void 0,[t.surface].concat(Object(A["a"])(this.$toGeometry(e.pointerX,e.pointerY))))-t.offset:0,o=r.structure.getAllWallList(),a=function(e){var r=n.$toGeometry(e.pointerX,e.pointerY),a=wa.apply(void 0,[o].concat(Object(A["a"])(r),[n.$drawing.scale,n.$data.virtualSurface]));if("virtual"===a.name)return t.setSurface(a),void t.setOffset(0);var u=ma.apply(void 0,[a].concat(Object(A["a"])(r)))-i,c=ma.apply(void 0,[a].concat(Object(A["a"])(a.originSafe))),s=ma.apply(void 0,[a].concat(Object(A["a"])(a.targetSafe))),l=ma.apply(void 0,[a].concat(Object(A["a"])(a.back.originSafe))),h=ma.apply(void 0,[a].concat(Object(A["a"])(a.back.targetSafe))),f=Math.max(c,h)+t.width/2,d=Math.min(s,l)-t.width/2,v=u<f?f:u>d?d:u;t.setSurface(a),t.setOffset(v)},u=function t(){r.off("pointermove",a),window.removeEventListener("mouseup",t),window.removeEventListener("keydown",c),n.$data.creatingHollow=null},c=function(t){"Escape"===t.code&&n.$data.creatingHollow&&(n.$data.creatingHollow.remove(),u())};r.on("pointermove",a),window.addEventListener("mouseup",u),window.addEventListener("keydown",c)},createHollow:function(t){var e=this.$data.virtualSurface;e.corner.x=1e5,e.back.corner.x=100001;var n=this.$data.creatingHollow=this.$drawing.wall.createHollow(t,e);return n.setOffset(-n.$state.width),this.hollowAdjust(n.$proxy),n}},proxy:function(){return new Ta(this)}}),ka=new WeakMap,Ea=function(t){return ka.get(t)},Sa=function(){function t(e){Object(L["a"])(this,t),ka.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){return Ea(this).show()}},{key:"hide",value:function(){return Ea(this).hide()}}]),t}(),Ca=Mn({groupIndex:1200,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,offset:0}},created:function(){var t=this;this.$on("pointerdown",(function(){return t.beginAdjust()})).$on("blur",(function(e){var n=t.$data,r=n.headHandler,i=n.rearHandler,o=e.focusing;o!==r.$proxy&&o!==i.$proxy&&t.$plugin.deactivate()}))},destroy:function(){},render:function(t){if(this.$data.currentHollow){var e=this.$state,n=e.surface,r=e.offset,i=this.$toCanvas.apply(this,Object(A["a"])(ya(n,r))),o=Object(W["a"])(i,2),a=o[0],u=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawCircle(a,u,5)}},methods:{show:function(){var t=this,e=this.$data.currentHollow;e.on("dirty",(function(n){n.holding!==e&&n.focusing!==e||t.hollowChange(e)})),this.hollowChange(e)},hide:function(){this.setSurface(null),this.setOffset(0)},hollowChange:function(t){var e=t.surface,n=t.offset,r=t.width;this.setSurface(e),this.setOffset(n-r/2)},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentHollow,n=e.offset,r=e.width,i=function(i){var o=t.$toGeometry(i.pointerX,i.pointerY),a=ma.apply(void 0,[t.$state.surface].concat(Object(A["a"])(o))),u=n-r/2-a;t.setOffset(a),e.setWidth(r+u),e.setOffset(n-u/2)},o=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",o)}},proxy:function(){return new Sa(this)}},ja),Fa=new WeakMap,Na=function(t){return Fa.get(t)},Wa=function(){function t(e){Object(L["a"])(this,t),Fa.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){return Na(this).show()}},{key:"hide",value:function(){return Na(this).hide()}}]),t}(),Ma=Mn({groupIndex:1200,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,offset:0}},created:function(){var t=this;this.$on("pointerdown",(function(){return t.beginAdjust()})).$on("blur",(function(e){var n=t.$data,r=n.headHandler,i=n.rearHandler,o=e.focusing;o!==r.$proxy&&o!==i.$proxy&&t.$plugin.deactivate()}))},destroy:function(){},render:function(t){if(this.$data.currentHollow){var e=this.$state,n=e.surface,r=e.offset,i=this.$toCanvas.apply(this,Object(A["a"])(ya(n,r))),o=Object(W["a"])(i,2),a=o[0],u=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawRect(a-5,u-5,10,10)}},methods:{show:function(){var t=this,e=this.$data.currentHollow;e.on("dirty",(function(n){n.holding!==e&&n.focusing!==e||t.hollowChange(e)})),this.hollowChange(e)},hide:function(){this.setSurface(null),this.setOffset(0)},hollowChange:function(t){var e=t.surface,n=t.offset,r=t.width;this.setSurface(e),this.setOffset(n+r/2)},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentHollow,n=e.offset,r=e.width,i=function(i){var o=t.$toGeometry(i.pointerX,i.pointerY),a=ma.apply(void 0,[t.$state.surface].concat(Object(A["a"])(o))),u=a-n-r/2;t.setOffset(a),e.setWidth(r+u),e.setOffset(n+u/2)},o=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",o)}},proxy:function(){return new Wa(this)}},ja),Pa=Pn({id:"com.3dnest.spoke.wall.tool",namespace:"wallTool",version:pa["a"],plugin:ja,elements:{HeadHandler:Ca,RearHandler:Ma}}),Ha=n("0096"),Ia=new WeakMap,La=function(t){return Ia.get(t)},Da=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Ia.set(Object(ye["a"])(r),t),E["d"].freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"WallBuilder",get:function(){return La(this).$data.builder.$proxy}}]),n}(Cn),Ra=Wn({data:function(){return{builder:null}},created:function(){var t=this;this.$data.builder=this.$createElement("WallBuilder"),this.$drawing.structure.on("corner-created",(function(e){return t.bindCorner(e)})).on("wall-created",(function(e){return t.bindWall(e)}))},methods:{bindCorner:function(t){var e=this;t.on("pointerdown",(function(){var n=function(n){t.move.apply(t,Object(A["a"])(e.$toGeometry(n.virtualX,n.virtualY)))},r=function t(){e.$drawing.off("pointermove",n),we["a"].removeEventListener(we["c"].WINDOW,"mouseup",t)};e.$drawing.on("pointermove",n),we["a"].addEventListener(we["c"].WINDOW,"mouseup",r)}))},bindWall:function(t){this.$drawing}},proxy:function(){return new Da(this)}}),Aa=new WeakMap,_a=function(t){return Aa.get(t)},Va=function(t){Object(be["a"])(n,t);var e=Object(me["a"])(n);function n(t){var r;return Object(L["a"])(this,n),r=e.call(this,t),Aa.set(Object(ye["a"])(r),t),E["d"].freeze(Object(ye["a"])(r)),r}return Object(D["a"])(n,[{key:"from",get:function(){return _a(this).$state.from.slice(0)}},{key:"to",get:function(){return _a(this).$state.to.slice(0)}},{key:"stage",get:function(){return _a(this).$state.stage}},{key:"begin",value:function(){return _a(this).begin(),this}},{key:"cancel",value:function(){return _a(this).cancel(),this}},{key:"setFrom",value:function(t,e){Xa(t,e);var n=_a(this);return n.moveFrom(t,e),n.setFrom(),this}},{key:"buildTo",value:function(t,e){Xa(t,e);var n=_a(this);return n.moveTo(t,e),n.build(),this}}]),n}(Tn),za=["x","y"],Xa=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in za)E["e"].Not.Number(e[r])&&E["a"].Throw.TypeError("Invalid `".concat(za[r],"`, a number excepted."))},Ya=0,Ua=1,Ga=8,Ba=function(t){return[t.virtualX,t.virtualY]},Ka=5,qa=65280,Ja=10,Za=Mn({groupIndex:1200,state:function(){return{stage:Ya,from:[0,0],to:[100,100],thickness:200,listener:{moveFrom:E["c"],moveTo:E["c"],setFrom:E["c"],build:E["c"]}}},render:function(t){var e,n=this.$state,r=n.from,i=n.to,o=n.stage;if(o!==Ya){var a=this.$toCanvas.apply(this,Object(A["a"])(r));if((e=t.beginFill(qa)).drawCircle.apply(e,Object(A["a"])(a).concat([Ka])).endFill(),o===Ga){var u,c,s,l=this.$toCanvas.apply(this,Object(A["a"])(i));(u=(c=(s=t.beginFill(qa)).drawCircle.apply(s,Object(A["a"])(l).concat([Ka])).endFill().lineStyle(1,65535)).moveTo.apply(c,Object(A["a"])(a))).lineTo.apply(u,Object(A["a"])(l))}}},created:function(){var t=this;this.$hide();var e=this.$state,n=function(e){return t.moveFrom.apply(t,Object(A["a"])(t.$toGeometry.apply(t,Object(A["a"])(Ba(e)))))},r=function(e){return t.moveTo.apply(t,Object(A["a"])(t.$toGeometry.apply(t,Object(A["a"])(Ba(e)))))},i=function(){return t.setFrom()},o=function(){return t.build()};E["d"].assign(e.listener,{moveFrom:n,moveTo:r,setFrom:i,build:o})},methods:{emitEvent:function(t){return this.$emit(t,this.$proxy)},begin:function(){this.$state.stage!==Ya&&E["a"].throwError("It MUST begin from STAGE.IDLE."),this.$show();var t=this.$state.listener,e=t.moveFrom,n=t.setFrom;this.$state.stage=Ua,this.$drawing.on("pointermove",e).on("pointerdown",n),this.emitEvent("begin")},setFrom:function(){this.$state.stage!==Ua&&E["a"].throwError("It MUST setFrom in STAGE.PICKING_FROM.");var t=this.$state.listener,e=t.moveTo,n=t.build;this.removeAllListener(),this.$state.stage=Ga,this.$drawing.on("pointermove",e).on("pointerdown",n),this.emitEvent("from-set")},build:function(){this.$state.stage!==Ga&&E["a"].throwError("It MUST setFrom in STAGE.PICKING_TO.");var t=this.$state,e=this.$drawing,n=e.structure,r=t.from,i=t.to,o=this.queryOrCreateCorner.apply(this,Object(A["a"])(r).concat([n])),a=this.queryOrCreateCorner.apply(this,Object(A["a"])(i).concat([n]));n.createWall(o,a),this.removeAllListener(),t.stage=Ya,this.$hide(),this.emitEvent("end").emitEvent("build")},cancel:function(){this.$state.stage===Ya&&E["a"].throwError("It MUST not cancel in STAGE.IDLE."),this.removeAllListener(),this.$state.stage=Ya,this.$hide(),this.emitEvent("end").emitEvent("cancel")},removeAllListener:function(){var t=this.$state.listener,e=t.setFrom,n=t.moveFrom,r=t.moveTo,i=t.build;this.$drawing.off("pointermove",n).off("pointermove",r).off("pointerdown",e).off("pointerdown",i)},moveFrom:function(t,e){this.$state.from=this.$state.to=[t,e],this.$setDirty()},moveTo:function(t,e){this.$state.to=[t,e],this.$setDirty()},queryOrCreateCorner:function(t,e){var n=this.$drawing.structure;return n.queryCorner(t,e,Ja)||n.createCorner(t,e)}},proxy:function(){return new Va(this)}},Ra),Qa="com.3dnest.spoke.tool.structure",tu="structureTool",eu=Pn({id:Qa,namespace:tu,version:Ha["a"],plugin:Ra,elements:{WallBuilder:Za}}),nu=n("4072"),ru=new WeakMap,iu=function(t){return ru.get(t)},ou=function(){function t(e){Object(L["a"])(this,t),ru.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"activate",value:function(){return iu(this).activate()}},{key:"deactivate",value:function(){return iu(this).deactivate()}},{key:"createFurniture",value:function(t,e,n,r){return iu(this).createFurniture(t,e,n,r)}}]),t}(),au=Wn({created:function(){var t=this;this.createHandler(0,1),this.createHandler(-1,1),this.createHandler(1,1),this.createHandler(-1,0),this.createHandler(1,0),this.createHandler(-1,-1),this.createHandler(0,-1),this.createHandler(1,-1);var e=this.$data.rotater=this.$createElement("Rotater");this.$data.preview=this.$createElement("Preview"),this.$drawing.room.on("element-created",(function(n){n.on("pointerdown",(function(e){t.furnitureAdjust(n,e)})),n.on("focus",(function(e){t.$data.currentFurniture=e.focusing,t.activate()})).on("blur",(function(n){var r=n.holding;t.$data.handlerList.includes(r)||r===e.$proxy||t.deactivate()}))}))},data:function(){return{currentFurniture:null,handlerList:[],rotater:null,preview:null}},methods:{createHandler:function(t,e){this.$data.handlerList.push(this.$createElement("Handler",t,e).$proxy)},activate:function(){var t,e=Object(M["a"])(this.$data.handlerList);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.show()}}catch(r){e.e(r)}finally{e.f()}this.$data.rotater.show(),this.$data.preview.show()},deactivate:function(){this.$data.currentFurniture=null;var t,e=Object(M["a"])(this.$data.handlerList);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hide()}}catch(r){e.e(r)}finally{e.f()}this.$data.rotater.hide(),this.$data.preview.hide()},furnitureAdjust:function(t,e){var n=this,r=this.$drawing,i=e?this.$toGeometry(e.pointerX,e.pointerY):[t.x,t.y],o=i[0]-t.x,a=i[1]-t.y,u=function(e){var r=n.$toGeometry(e.pointerX,e.pointerY);t.setPosition(r[0]-o,r[1]-a)},c=function t(){r.off("pointermove",u),window.removeEventListener("mouseup",t)};r.on("pointermove",u),window.addEventListener("mouseup",c)},createFurniture:function(t,e,n,r){var i=this.$drawing.room.createFurniture(t,e,99999,99999,n,r);return this.furnitureAdjust(i),i}},proxy:function(){return new ou(this)}}),uu=function(t,e,n,r,i,o){return a.project.apply(a,[i,o].concat(Object(A["a"])(c.fromSegment(t,e,n,r))))},cu=function(t,e,n,r,i,a){var u=uu(t,e,n,r,i,a);return o.getLength.apply(o,Object(A["a"])(o.fromTwoPoint.apply(o,[t,e].concat(Object(A["a"])(u)))))},su=function(t,e,n,r,i){var u=o.normalize.apply(o,Object(A["a"])(o.fromTwoPoint(t,e,n,r))),c=Object(W["a"])(u,2),s=c[0],l=c[1],h=a.translate.apply(a,[t,e].concat(Object(A["a"])(o.multiply(s,l,i)))),f=Object(W["a"])(h,2),d=f[0],v=f[1];return[d,v]},lu=new WeakMap,hu=function(t){return lu.get(t)},fu=function(){function t(e){Object(L["a"])(this,t),lu.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){return hu(this).show()}},{key:"hide",value:function(){return hu(this).hide()}}]),t}(),du=Mn({groupIndex:1300,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{xStatus:0,yStatus:0,furniture:null,x:0,y:0,pivotX:0,pivotY:0,rotation:0,listener:E["c"]}},created:function(t,e){var n=this;this.$state.xStatus=t,this.$state.yStatus=e,this.$on("pointerdown",(function(){return n.beginAdjust()})).$on("blur",(function(t){var e=t.focusing;n.$data.handlerList.includes(e)||e===n.$data.rotater.$proxy||n.$plugin.deactivate()}))},render:function(t){if(this.$data.currentFurniture){var e=this.$state,n=e.x,r=e.y,i=e.pivotX,o=e.pivotY,a=e.rotation,u=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawRect(-5,-5,10,10),t.pivot.x=i/u,t.pivot.y=o/u;var c=this.$toCanvas(n,r),s=Object(W["a"])(c,2);t.x=s[0],t.y=s[1],t.rotation=a}},methods:{show:function(){var t=this,e=this.$state.furniture=this.$data.currentFurniture;e.on("dirty",this.$state.listener=function(){return t.furnitureChange(e)}),this.furnitureChange(e)},hide:function(){this.$state.furniture.off("dirty",this.$state.listener),this.$state.furniture=null,this.$state.listener=E["c"],this.$setDirty()},furnitureChange:function(t){var e=this.$state,n=e.xStatus,r=e.yStatus,i=t.width,o=t.height,a=t.x,u=t.y,c=t.rotation;this.setX(a),this.setY(u),this.setPivotX(-n*i/2),this.setPivotY(r*o/2),this.setRotation(c)},setX:function(t){this.$state.x=t,this.$setDirty()},setY:function(t){this.$state.y=t,this.$setDirty()},setPivotX:function(t){this.$state.pivotX=t,this.$setDirty()},setPivotY:function(t){this.$state.pivotY=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentFurniture,n=function(n){var r=t.$state,i=r.xStatus,o=r.yStatus,u=e.x,c=e.y,s=e.width,l=e.height,h=e.rotation,f=t.$toGeometry(n.pointerX,n.pointerY),d=u+i*s/2,v=c+o*l/2,p=a.rotate(d,v,-h,u,c),g=Object(W["a"])(p,2),y=g[0],b=g[1],m=cu(u,c,y,b,y,b),w=cu.apply(void 0,[u,c,y,b].concat(Object(A["a"])(f))),O=a.rotate.apply(a,Object(A["a"])(su(u,c,y,b,w)).concat([h,u,c])),x=Object(W["a"])(O,2),$=x[0],T=x[1],j=i*($-d),k=o*(T-v);t.setPivotX(i*($-u)),t.setPivotY(o*(T-c)),e.setHeight(l+k),e.setWidth(s+j),e.setPosition.apply(e,Object(A["a"])(su(u,c,y,b,(w-m)/2)))},r=function e(){t.$drawing.off("pointermove",n),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",n),window.addEventListener("mouseup",r)}},proxy:function(){return new fu(this)}},au),vu=new WeakMap,pu=function(t){return vu.get(t)},gu=function(){function t(e){Object(L["a"])(this,t),vu.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){return pu(this).show()}},{key:"hide",value:function(){return pu(this).hide()}}]),t}(),yu=300,bu=Mn({groupIndex:1300,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{furniture:null,x:0,y:0,pivotX:0,pivotY:0,rotation:0,listener:E["c"]}},created:function(){var t=this;this.$on("pointerdown",(function(){return t.beginAdjust()})).$on("blur",(function(e){var n=e.focusing;t.$data.handlerList.includes(n)||n===t.$data.rotater.$proxy||t.$plugin.deactivate()}))},render:function(t){if(this.$data.currentFurniture){var e=this.$state,n=e.x,r=e.y,i=e.pivotX,o=e.pivotY,a=e.rotation,u=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).moveTo(0,5).lineTo(0,yu/u-5),t.pivot.x=i/u,t.pivot.y=o/u;var c=this.$toCanvas(n,r),s=Object(W["a"])(c,2);t.x=s[0],t.y=s[1],t.rotation=a}},methods:{show:function(){var t=this,e=this.$state.furniture=this.$data.currentFurniture;e.on("dirty",this.$state.listener=function(){return t.furnitureChange(e)}),this.furnitureChange(e)},hide:function(){this.$state.furniture.off("dirty",this.$state.listener),this.$state.furniture=null,this.$state.listener=E["c"],this.$setDirty()},furnitureChange:function(t){t.width;var e=t.height,n=t.x,r=t.y,i=t.rotation;this.$state.x=n,this.$state.y=r,this.$state.pivotX=0,this.$state.pivotY=e/2+yu,this.setRotation(i)},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentFurniture,n=function(n){var r=e.x,i=e.y,a=t.$toGeometry(n.pointerX,n.pointerY),u=Math.atan2.apply(Math,Object(A["a"])(o.fromTwoPoint.apply(o,[r,i].concat(Object(A["a"])(a)))));t.setRotation(u),e.setRotation(u)},r=function e(){t.$drawing.off("pointermove",n),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",n),window.addEventListener("mouseup",r)}},proxy:function(){return new gu(this)}},au),mu=new WeakMap,wu=function(t){return mu.get(t)},Ou=function(){function t(e){Object(L["a"])(this,t),mu.set(this,e),Object.freeze(this)}return Object(D["a"])(t,[{key:"show",value:function(){return wu(this).show()}},{key:"hide",value:function(){return wu(this).hide()}}]),t}(),xu=Mn({groupIndex:1200,render:function(t){if(this.$data.currentFurniture){var e=this.$data.currentFurniture,n=e.width,r=e.height,i=e.rotation,o=e.x,a=e.y,u=this.$drawing.scale,c=n/u,s=r/u;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).endFill().beginFill(4096759,.2).drawRect(-c/2,-s/2,c,s).endFill(),t.pivot.x=0,t.pivot.y=0;var l=this.$toCanvas(o,a),h=Object(W["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=i}},methods:{show:function(){var t=this,e=this.$data.currentFurniture;e.on("dirty",(function(){t.$setDirty()})),this.$setDirty()},hide:function(){this.$setDirty()}},proxy:function(){return new Ou(this)}},au),$u=Pn({id:"com.3dnest.spoke.room.tool",namespace:"roomTool",version:nu["a"],plugin:au,elements:{Handler:du,Rotater:bu,Preview:xu}});[To,Lo,qo,eu,Pa,$u,va].forEach((function(t){return Ge(t)}));var Tu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mb-0",attrs:{small:"",bordered:"","head-variant":"dark",items:t.items,fields:t.fieldList,hover:""}})],1)},ju=[],ku=(n("6440"),100),Eu={name:"CoreState",props:["drawing"],data:function(){return{width:0,height:0,scale:0,origin:[0,0],pointer:[0,0],virtual:[0,0]}},computed:{items:function(){return[{key:"width(px)",value:this.width},{key:"height(px)",value:this.height},{key:"scale(mm/px)",value:this.scale},{key:"originX(px)",value:this.origin[0]},{key:"originY(px)",value:this.origin[1]},{key:"pointerX(px)",value:this.pointer[0].toFixed(6)},{key:"pointerY(px)",value:this.pointer[1].toFixed(6)},{key:"virtualX(px)",value:this.virtual[0].toFixed(6)},{key:"virtualY(px)",value:this.virtual[1].toFixed(6)}]},fieldList:function(){return[{key:"key",label:"Key"},{key:"value",label:"Value",class:"col-short-number"}]}},mounted:function(){var t=this;this._interval=setInterval((function(){t.flush()}),ku)},destroyed:function(){clearInterval(this._interval)},methods:{flush:function(){this.drawing&&(this.width=this.drawing.width,this.height=this.drawing.height,this.scale=this.drawing.scale,this.origin=this.drawing.origin,this.pointer=this.drawing.pointer,this.virtual=this.drawing.virtual)}}},Su=Eu,Cu=n("a6c2"),Fu=Object(Cu["a"])(Su,Tu,ju,!1,null,null,null),Nu=Fu.exports,Wu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-bottom border-dark"},[t._v(" CoreTool ")])},Mu=[],Pu={name:"CoreTool"},Hu=Pu,Iu=Object(Cu["a"])(Hu,Wu,Mu,!1,null,null,null),Lu=Iu.exports,Du=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateGrid ")])},Ru=[],Au={name:"PluginStateGrid"},_u=Au,Vu=Object(Cu["a"])(_u,Du,Ru,!1,null,null,null),zu=Vu.exports,Xu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateRoom ")])},Yu=[],Uu={name:"PluginStateRoom"},Gu=Uu,Bu=Object(Cu["a"])(Gu,Xu,Yu,!1,null,null,null),Ku=Bu.exports,qu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateRoomTool ")])},Ju=[],Zu={name:"PluginStateRoomTool"},Qu=Zu,tc=Object(Cu["a"])(Qu,qu,Ju,!1,null,null,null),ec=tc.exports,nc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateStructure ")])},rc=[],ic={nameL:"PluginStateStructure"},oc=ic,ac=Object(Cu["a"])(oc,nc,rc,!1,null,null,null),uc=ac.exports,cc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateStructureTool ")])},sc=[],lc={name:"PluginStateStructureTool"},hc=lc,fc=Object(Cu["a"])(hc,cc,sc,!1,null,null,null),dc=fc.exports,vc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateWall ")])},pc=[],gc={name:"PluginStateWall"},yc=gc,bc=Object(Cu["a"])(yc,vc,pc,!1,null,null,null),mc=bc.exports,wc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateWallTool ")])},Oc=[],xc={name:"PluginStateWallTool"},$c=xc,Tc=Object(Cu["a"])($c,wc,Oc,!1,null,null,null),jc=Tc.exports,kc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginToolGrid ")])},Ec=[],Sc={name:"PluginToolGrid"},Cc=Sc,Fc=Object(Cu["a"])(Cc,kc,Ec,!1,null,null,null),Nc=Fc.exports,Wc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginToolRoom ")])},Mc=[],Pc={name:"PluginToolRoom"},Hc=Pc,Ic=Object(Cu["a"])(Hc,Wc,Mc,!1,null,null,null),Lc=Ic.exports,Dc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginToolRoomTool ")])},Rc=[],Ac={name:"PluginToolRoomTool"},_c=Ac,Vc=Object(Cu["a"])(_c,Dc,Rc,!1,null,null,null),zc=Vc.exports,Xc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap mb-1"},[n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"F"}},[n("b-form-input",{model:{value:t.fromX,callback:function(e){t.fromX=e},expression:"fromX"}}),n("b-form-input",{model:{value:t.fromY,callback:function(e){t.fromY=e},expression:"fromY"}})],1),n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"T"}},[n("b-form-input",{model:{value:t.toX,callback:function(e){t.toX=e},expression:"toX"}}),n("b-form-input",{model:{value:t.toY,callback:function(e){t.toY=e},expression:"toY"}})],1),n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.createWall()}}},[t._v("创建")])],1)],1)},Yc=[],Uc={name:"PluginToolStructure",props:["drawing"],data:function(){return{fromX:0,fromY:0,toX:0,toY:0}},methods:{createWall:function(){var t=this.fromX,e=this.fromY,n=this.toX,r=this.toY;if(t!==n||e!==r){var i=this.drawing,o=i.structure.queryCorner(Number(t),Number(e))||i.structure.createCorner(Number(t),Number(e)),a=i.structure.queryCorner(Number(n),Number(r))||i.structure.createCorner(Number(n),Number(r));return i.structure.createWall(o,a)}console.log("from and to can not be same")}}},Gc=Uc,Bc=Object(Cu["a"])(Gc,Xc,Yc,!1,null,null,null),Kc=Bc.exports,qc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.createWall()}}},[t._v("Create Wall")])],1)},Jc=[],Zc={name:"PluginToolStructureTool",props:["drawing"],methods:{createWall:function(){var t=this,e=this.drawing,n=e.structureTool.WallBuilder;n.begin();var r=function(t){var e,n=t.to;(e=t.begin()).setFrom.apply(e,Object(A["a"])(n))};n.on("build",r);var i=function(){t.$nextTick((function(){n.cancel().begin()}))};e.structure.on("room-created",i);var o=function t(o){"Escape"===o.code&&(n.cancel(),n.off("build",r),e.structure.off("room-created",i),window.removeEventListener("keydown",t))};window.addEventListener("keydown",o)}}},Qc=Zc,ts=Object(Cu["a"])(Qc,qc,Jc,!1,null,null,null),es=ts.exports,ns=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginToolWall ")])},rs=[],is={name:"PluginToolWall"},os=is,as=Object(Cu["a"])(os,ns,rs,!1,null,null,null),us=as.exports,cs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap"},[n("b-form-select",{staticClass:"mr-1 w-100",attrs:{options:t.materialList},model:{value:t.selectedMaterial,callback:function(e){t.selectedMaterial=e},expression:"selectedMaterial"}}),n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.createHollow()}}},[t._v("创建")])],1)],1)},ss=[],ls=Math.PI,hs=60,fs=15,ds=10,vs={stateless:{line:0,arcLine:14145753,fill:16777215,windowFill:13421772},hover:{line:8053503,arcLine:15464441,fill:16777215,windowFill:13421772},select:{line:4096759,arcLine:15068665,fill:16777215,windowFill:13421772}},ps=function(t){var e=t.hover,n=t.focus,r=t.select;t.hold;return r||n?vs.select:e?vs.hover:vs.stateless},gs={width:800,render:function(t,e){var n=e.width,r=e.height,i=e.fliped,o=e.scale,a=i?1:0,u=fs/o,c=hs/o,s=ps(e);return t.lineStyle(u,s.arcLine).beginFill(s.fill,.1).arc(n*a,r/2,n,-ls/2*a-ls/2,-ls*a/2).lineTo(n*a,r/2).lineTo(0,r/2-n+a*n).endFill().beginFill(s.fill).lineStyle(u,s.fill).drawRect(0,0,n,r).lineStyle(u,s.line).moveTo(0,0).lineTo(0,r).moveTo(n,0).lineTo(n,r).lineStyle(u,s.line).drawRect((n-c)*a,r/2,c,-n),t.pivot.x=n/2,t.pivot.y=r/2,t}},ys={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=fs/i,a=hs/i,u=ps(e);return t.lineStyle(o,u.arcLine).beginFill(u.fill,.1).arc(0,r/2,n/2,-ls/2,0).lineTo(0,r/2).lineTo(0,(r-n)/2).endFill().beginFill(u.fill,.1).lineStyle(o,u.arcLine).arc(n,r/2,n/2,ls,-ls/2).lineTo(n,r/2).lineTo(n/2,r/2).endFill().beginFill(u.fill).lineStyle(o,u.fill).drawRect(0,0,n,r).lineStyle(o,u.line).moveTo(0,0).lineTo(0,r).moveTo(n,0).lineTo(n,r).drawRect(0,r/2,a,-n/2).drawRect(n,r/2,-a,-n/2),t.pivot.x=n/2,t.pivot.y=r/2,t}},bs={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=e.fliped,a=(e.state,o?-1:1),u=fs/i,c=ds/i,s=ps(e);return t.lineStyle(u,s.line).beginFill(s.fill).drawRect(0,0,n,r).drawRect(0+u+c,r/2,2*n/3,r/4*a).drawRect(n-u-c,r/2,-2*n/3,-r/4*a),t.pivot.x=n/2,t.pivot.y=r/2,t}},ms={width:1450,render:function(t,e){var n=e.width,r=e.height,i=e.fliped,o=e.scale,a=(e.state,i?1:0),u=fs/o,c=ps(e);return t.lineStyle(u,c.line).beginFill(c.fill).drawRect(0,0,n,r).moveTo(0,r/3).lineTo(n,r/3).moveTo(0,2*r/3).lineTo(n,2*r/3).moveTo(n/4+a*n/2,r/3).lineTo(n/4+a*n/2,2*r/3).endFill(),t.pivot.x=n/2,t.pivot.y=r/2,t}},ws={width:2e3,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=(e.state,fs/i),a=ps(e);return t.lineStyle(o,a.fill).beginFill(a.fill).drawRect(0,0,n,r).endFill().lineStyle(o,a.line).drawRect(0,0,n,r/3).drawRect(0,2*r/3,n,r/3),t.pivot.x=n/2,t.pivot.y=r/2,t}},Os={width:800,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=(e.state,fs/i),a=ps(e);return t.lineStyle(o,a.line).beginFill(a.fill).drawRect(0,0,n,r).moveTo(0,r/2).lineTo(n,r/2).endFill(),t.pivot.x=n/2,t.pivot.y=r/2,t}},xs={width:1500,render:function(t,e){var n=e.width,r=e.scale,i=e.sillThickness,o=void 0===i?500/r:i,a=e.height,u=fs/r,c=a,s=ps(e);return t.lineStyle(u,s.line).beginFill(s.windowFill).drawRect(0,-o,n,o).endFill().beginFill(s.fill).moveTo(0,-a).lineTo(0,-o).lineTo(n,-o).lineTo(n,-a).lineTo(n+c,-a).lineTo(n+c,-(o+c)).lineTo(-c,-(o+c)).lineTo(-c,-a).lineTo(0,-a).endFill().moveTo(-c/2,-a).lineTo(-c/2,-(o+c/2)).lineTo(n+c/2,-(o+c/2)).lineTo(n+c/2,-a),t.pivot.x=n/2,t.pivot.y=-a/2,t}},$s={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=fs/i,a=ps(e);return t.lineStyle(o,a.line).beginFill(a.fill).drawRect(0,0,n,r).endFill().moveTo(0,r/2).lineTo(n,r/2).moveTo(0,r/3).lineTo(n,r/3).moveTo(0,2*r/3).lineTo(n,2*r/3).moveTo(n/2,r/3).lineTo(n/2,2*r/3),t.pivot.x=n/2,t.pivot.y=r/2,t}},Ts={render:function(t,e){var n=e.leftWidth,r=e.rightWidth,i=e.leftWallThickness,o=e.rightWallThickness,a=e.scale,u=fs/a,c=ps(e);return t.lineStyle(u,c.line).beginFill(c.fill).moveTo(0,0).lineTo(r,0).lineTo(r,o).lineTo(i,o).lineTo(i,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(i/2,n).lineTo(i/2,o/2).lineTo(r,o/2),t.pivot.x=r/2,t.pivot.y=o/2,t}},js={render:function(t,e){var n=e.leftWidth,r=e.centerWidtn,i=e.rightWidth,o=e.leftWallThickness,a=e.centerWallThickness,u=e.rightWallThickness,c=e.scale,s=fs/c,l=ps(e);return t.lineStyle(s,l.line).beginFill(l.fill).moveTo(0,0).lineTo(r,0).lineTo(r,i).lineTo(r-u,i).lineTo(r-u,a).lineTo(o,a).lineTo(o,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(o/2,n).lineTo(o/2,a/2).lineTo(r-u/2,a/2).lineTo(r-u/2,i),t.pivot.x=r/2,t.pivot.y=a/2,t}},ks={render:function(t,e){var n=e.leftWidth,r=e.rightWidth,i=e.leftWindowThickness,o=e.rightWindowThickness,a=e.leftWallThickness,u=e.rightWallThickness,c=e.scale,s=fs/c,l=ps(e);return t.lineStyle(s,l.line).beginFill(l.windowFill).moveTo(a,u).lineTo(r,u).lineTo(r,u-o).lineTo(a-i,u-o).lineTo(a-i,n).lineTo(a,n).lineTo(a,u).endFill().beginFill(l.fill).moveTo(a-i,u-o).lineTo(r,u-o).lineTo(r,0).lineTo(r+u,0).lineTo(r+u,-o).lineTo(-i,-o).lineTo(-i,n+a).lineTo(0,n+a).lineTo(0,n).lineTo(a-i,n).lineTo(a-i,u-o).endFill().moveTo(0,n+a/2).lineTo(a/2-i,n+a/2).lineTo(a/2-i,u/2-o).lineTo(r+u/2,u/2-o).lineTo(r+u/2,0),t.pivot.x=r/2,t.pivot.y=u/2,t}},Es={render:function(t,e){var n=e.leftWidth,r=e.centerWidtn,i=e.rightWidth,o=e.leftWindowThinkness,a=e.centerWindowThinkness,u=e.rightWindowThinkness,c=e.leftWallThickness,s=e.centerWallThickness,l=e.rightWallThickness,h=e.scale,f=fs/h,d=ps(e);return t.lineStyle(f,d.line).beginFill(d.windowFill).moveTo(c,s).lineTo(r-l,s).lineTo(r-l,i).lineTo(r-l+u,i).lineTo(r-l+u,s-a).lineTo(c-o,s-a).lineTo(c-o,n).lineTo(c,n).lineTo(c,s).endFill().beginFill(d.fill).moveTo(c-o,s-a).lineTo(r+u-l,s-a).lineTo(r+u-l,i).lineTo(r,i).lineTo(r,i+l).lineTo(r+u,i+l).lineTo(r+u,-a).lineTo(-o,-a).lineTo(-o,n+c).lineTo(0,n+c).lineTo(0,n).lineTo(c-o,n).lineTo(c-o,s-a).endFill().moveTo(0,n+c/2).lineTo(c/2-o,n+c/2).lineTo(c/2-o,s/2-a).lineTo(r+u-l/2,s/2-a).lineTo(r+u-l/2,i+l/2).lineTo(r,i+l/2),t.pivot.x=r/2,t.pivot.y=s/2,t}},Ss=[{text:"门",value:"singleDoor",content:m.SingleDoor},{text:"双开门",value:"doubleDoor",content:m.DoubleDoor},{text:"移门",value:"slidingDoor",content:m.SlidingDoor},{text:"子母门",value:"parentDoor",content:m.ParentDoor},{text:"垭口",value:"bealock",content:m.Bealock},{text:"窗",value:"basicWindow",content:w.BasicWindow},{text:"飘窗",value:"boilerWindow",content:w.BoilerWindow},{text:"落地窗",value:"floorWindow",content:w.FloorWindow}],Cs={name:"PluginToolWallTool",props:["drawing"],data:function(){return{selectedMaterial:Ss[0].value}},computed:{materialList:function(){return Ss}},mounted:function(){this.init()},methods:{init:function(){var t,e=Object(M["a"])(Ss);try{for(e.s();!(t=e.n()).done;){var n=t.value;v.register(n.value,n.content)}}catch(r){e.e(r)}finally{e.f()}},createHollow:function(){var t=this.drawing;t.wallTool.createHollow(this.selectedMaterial)}}},Fs=Cs,Ns=Object(Cu["a"])(Fs,cs,ss,!1,null,null,null),Ws=Ns.exports,Ms=[{stateComponent:zu,toolComponent:Nc,title:"Grid"},{stateComponent:uc,toolComponent:Kc,title:"Structure"},{stateComponent:dc,toolComponent:es,title:"StructureTool"},{stateComponent:mc,toolComponent:us,title:"Wall"},{stateComponent:jc,toolComponent:Ws,title:"WallTool"},{stateComponent:Ku,toolComponent:Lc,title:"Room"},{stateComponent:ec,toolComponent:zc,title:"RoomTool"}],Ps="https://qhcmsoss.kujiale.com/ttex/L2HNXEIKN4FT2AABAAAAAAY8.jpg",Hs={name:"Framework",components:{CoreState:Nu,CoreTool:Lu},data:function(){return{spoke:null,drawing:null,stateShowingList:Ms.map((function(){return!1})),toolShowingList:Ms.map((function(){return!1}))}},mounted:function(){this.spoke=b,this.init()},computed:{componentList:function(){return Ms}},methods:{init:function(){var t=window.d=this.drawing=new On,e=t.scale;t.mount(this.$refs["drawing"]),t.on("pointerdown",(function(e){if(null===e.focusing){var n=t.origin,r=[e.pointerX,e.pointerY],i=function(e){var i=[e.pointerX-r[0],e.pointerY-r[1]];t.setOrigin(n[0]+i[0],n[1]+i[1])},o=function e(){t.off("pointermove",i),window.removeEventListener("mouseup",e)};t.on("pointermove",i),window.addEventListener("mouseup",o)}})),window.addEventListener("wheel",(function(n){n.deltaY>0?t.setScaleInMode(e+=1,1):t.setScaleInMode(e=Math.max(1,e-1),1)})),t.structure.on("room-created",(function(t){t.setFloor(Ps)}))},toggleState:function(t){this.$set(this.stateShowingList,t,!this.stateShowingList[t])},toggleTool:function(t){this.$set(this.toolShowingList,t,!this.toolShowingList[t])},createWall:function(){this.drawing.structureTool.buildWall()}}},Is=Hs,Ls=Object(Cu["a"])(Is,T,j,!1,null,null,null),Ds=Ls.exports,Rs={components:{Framework:Ds}},As=Rs,_s=Object(Cu["a"])(As,x,$,!1,null,null,null),Vs=_s.exports,zs=n("7e05"),Xs=n("8f9c");O["default"].use(zs["a"],Xs),O["default"].config.productionTip=!1,new O["default"]({render:function(t){return t(Vs)}}).$mount("#app")},"8f9c":function(t){t.exports=JSON.parse('{"breakpoints":["xs","sm","md","lg","xl","xxl"],"formControls":{"size":"sm"},"BButton":{"variant":"secondary","size":"sm"},"BToast":{"toaster":"b-toaster-top-center","autoHideDelay":3000,"variant":"primary","toastClass":null,"headerClass":null,"bodyClass":null},"BModal":{"cancelVariant":"secondary","okVariant":"primary"},"BFormGroup":{"size":"sm"},"BInputGroup":{"size":"sm"}}')},"90a7":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},afc2:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},ca8e:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},cd4a:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},de44:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')}});