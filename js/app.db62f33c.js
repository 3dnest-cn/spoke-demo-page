(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],h=0,f=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0aa2":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},1227:function(t,e,n){},"2c55":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"3d04":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"3d1c":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"PI",(function(){return Y})),n.d(r,"ROUND",(function(){return X}));var i={};n.r(i),n.d(i,"fromTwoPoint",(function(){return tt})),n.d(i,"dot",(function(){return et})),n.d(i,"multiply",(function(){return nt})),n.d(i,"cross",(function(){return rt})),n.d(i,"getLength",(function(){return it})),n.d(i,"rotate90",(function(){return ot})),n.d(i,"normalize",(function(){return at})),n.d(i,"invert",(function(){return st})),n.d(i,"clone",(function(){return ct})),n.d(i,"rotate",(function(){return ut})),n.d(i,"project",(function(){return lt}));var o={};n.r(o),n.d(o,"fromSegment",(function(){return kt})),n.d(o,"toStandard",(function(){return Nt})),n.d(o,"intersectLine",(function(){return Ft}));var a={};n.r(a),n.d(a,"translate",(function(){return q})),n.d(a,"toLeftOfSegment",(function(){return ht})),n.d(a,"rotate",(function(){return ft})),n.d(a,"project",(function(){return dt})),n.d(a,"distanceToPoint",(function(){return vt})),n.d(a,"distanceToLine",(function(){return pt})),n.d(a,"distanceToSegment",(function(){return Wt}));var s={};n.r(s),n.d(s,"differ",(function(){return Ht}));var c={};n.r(c),n.d(c,"intersectSegment",(function(){return It})),n.d(c,"translate",(function(){return Bt}));var u={};n.r(u),n.d(u,"containsPoint",(function(){return Ut}));var l={};n.r(l),n.d(l,"Vertex",(function(){return Vt})),n.d(l,"HalfEdge",(function(){return Yt})),n.d(l,"Face",(function(){return Xt}));var h={};n.r(h),n.d(h,"allHalfEdgeOfVertex",(function(){return Kt})),n.d(h,"allHalfEdgeOfPath",(function(){return Jt}));var f={};n.r(f),n.d(f,"Struct",(function(){return l})),n.d(f,"Iterator",(function(){return h})),n.d(f,"createVertex",(function(){return Qt})),n.d(f,"getVertexHalfEdgeList",(function(){return te})),n.d(f,"hasNoHalfEdge",(function(){return ee})),n.d(f,"hasOnlyHalfEdge",(function(){return ne})),n.d(f,"getAngleOfHalfEdge",(function(){return re})),n.d(f,"isPathContainsHalfEdge",(function(){return ie})),n.d(f,"isPathContainsVertex",(function(){return oe})),n.d(f,"isTwinInSamePath",(function(){return ae})),n.d(f,"getPathOfHalfEdge",(function(){return se})),n.d(f,"isOuterPath",(function(){return ue})),n.d(f,"isInnerPath",(function(){return le})),n.d(f,"splitHalfEdgeByVertex",(function(){return he})),n.d(f,"getPolygonFromFaceOuter",(function(){return de})),n.d(f,"getFaceOfPoint",(function(){return ge})),n.d(f,"createGlobalFace",(function(){return ye})),n.d(f,"queryChildFaceList",(function(){return pe}));var d={};n.r(d),n.d(d,"EventType",(function(){return be})),n.d(d,"EventListener",(function(){return me})),n.d(d,"PointAxis",(function(){return we})),n.d(d,"Point",(function(){return xe}));var v={};n.r(v),n.d(v,"_",(function(){return $e})),n.d(v,"Element",(function(){return Ee})),n.d(v,"Plugin",(function(){return Se})),n.d(v,"Emitter",(function(){return je})),n.d(v,"Tool",(function(){return Ce})),n.d(v,"ToolProvider",(function(){return Pe})),n.d(v,"Creator",(function(){return Ne}));var p={};n.r(p),n.d(p,"define",(function(){return He}));var g={};n.r(g),n.d(g,"Assert",(function(){return d})),n.d(g,"Proxy",(function(){return v})),n.d(g,"Options",(function(){return p}));var y={};n.r(y),n.d(y,"CENTER",(function(){return sr})),n.d(y,"CURRENT_POINTER",(function(){return cr}));var b={};n.r(b),n.d(b,"define",(function(){return dr}));var m={};n.r(m),n.d(m,"READY",(function(){return pn})),n.d(m,"define",(function(){return vr}));var w={};n.r(w),n.d(w,"Element",(function(){return b})),n.d(w,"Tool",(function(){return m})),n.d(w,"define",(function(){return pr}));var x={};n.r(x),n.d(x,"define",(function(){return gr}));var O={};n.r(O),n.d(O,"register",(function(){return ia})),n.d(O,"HollowProxy",(function(){return aa})),n.d(O,"plugin",(function(){return ca}));var $={};n.r($),n.d($,"register",(function(){return fa})),n.d($,"registerUrl",(function(){return da})),n.d($,"FurnitureProxy",(function(){return pa})),n.d($,"plugin",(function(){return ba}));var j={};n.r(j),n.d(j,"STATE",(function(){return Ka})),n.d(j,"plugin",(function(){return fs}));var T={};n.r(T),n.d(T,"BitmapProxy",(function(){return Ks})),n.d(T,"plugin",(function(){return Zs}));var k={};n.r(k),n.d(k,"PreventDefaultContextMenu",(function(){return ic})),n.d(k,"AdjustViewportByPointerButton",(function(){return oc})),n.d(k,"AdjustZoomByWheel",(function(){return ac}));var E={};n.r(E),n.d(E,"UsingViewer",(function(){return sc})),n.d(E,"UsingAdjuster",(function(){return cc})),n.d(E,"UsingZoomer",(function(){return uc})),n.d(E,"UsingWallCreator",(function(){return lc})),n.d(E,"UsingHollowCreator",(function(){return hc})),n.d(E,"UsingFurnitureCreator",(function(){return fc})),n.d(E,"ResetAllAndFallbackWhenEscape",(function(){return dc}));var S={};n.r(S),n.d(S,"Provider",(function(){return pc}));var C={};n.r(C),n.d(C,"Serializer",(function(){return S})),n.d(C,"Deserializer",(function(){return gc}));var P={};n.r(P),n.d(P,"Utility",(function(){return k})),n.d(P,"Tool",(function(){return E})),n.d(P,"Persistence",(function(){return C}));var N={};n.r(N),n.d(N,"Drawing",(function(){return fr})),n.d(N,"use",(function(){return In})),n.d(N,"PIXI",(function(){return Me})),n.d(N,"SCALE_MODE",(function(){return y})),n.d(N,"Wall",(function(){return O})),n.d(N,"Room",(function(){return $})),n.d(N,"Negative",(function(){return T})),n.d(N,"Bricklayer",(function(){return j})),n.d(N,"Preset",(function(){return P}));var F={};n.r(F),n.d(F,"SingleDoor",(function(){return Du})),n.d(F,"DoubleDoor",(function(){return Iu})),n.d(F,"SlidingDoor",(function(){return Lu})),n.d(F,"ParentDoor",(function(){return Mu})),n.d(F,"Bealock",(function(){return Au}));var W={};n.r(W),n.d(W,"BasicWindow",(function(){return Ru})),n.d(W,"BoilerWindow",(function(){return _u})),n.d(W,"FloorWindow",(function(){return Bu})),n.d(W,"LWindow",(function(){return Uu})),n.d(W,"UWindow",(function(){return Vu})),n.d(W,"LBoilerWindow",(function(){return Yu})),n.d(W,"UBoilerWindow",(function(){return Xu}));n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("1227");var H=n("2b0e"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("framework",{staticClass:"h-100"})},I=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex text-monospace",staticStyle:{"font-size":"12px","user-select":"none"}},[n("div",{staticClass:"d-flex flex-column",staticStyle:{width:"300px"}},[n("core-state",{attrs:{drawing:t.drawing}}),n("div",{staticClass:"h-100 overflow-auto"},t._l(t.componentList,(function(e,r){return n("b-card",{key:r,attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{staticClass:"py-0 text-left",attrs:{block:"",variant:"info"},on:{click:function(e){return t.toggleState(r)}}},[t._v(t._s(e.title))])],1),n("b-collapse",{attrs:{visible:t.stateShowingList[r]}},[n(e.stateComponent,{tag:"component",attrs:{drawing:t.drawing}})],1)],1)})),1)],1),n("div",{ref:"drawing",staticClass:"overflow-hidden",staticStyle:{flex:"1"}}),n("div",{staticStyle:{width:"300px"}},[n("core-tool",{attrs:{drawing:t.drawing}}),n("div",t._l(t.componentList,(function(e,r){return n("b-card",{key:r,attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{staticClass:"py-0 text-left",attrs:{block:"",variant:"dark"},on:{click:function(e){return t.toggleTool(r)}}},[t._v(t._s(e.title))])],1),n("b-collapse",{attrs:{visible:t.toolShowingList[r]}},[n(e.toolComponent,{tag:"component",attrs:{drawing:t.drawing}})],1)],1)})),1)],1)])},M=[],A=(n("d81d"),n("d3b7"),n("159b"),n("ac84")),R=n("2d58"),_=n("2fe6"),B=n("0bd7"),U=(n("99af"),n("dca8"),n("caad"),n("2532"),n("07ac"),n("3338")),V=Math,Y=V.PI,X=2*Y,z=[0,0],G=0,K=1,q=function(t,e,n,r){return z[G]=t+n,z[K]=e+r,z},J=0,Q=1,Z=[0,0],tt=function(t,e,n,r){return Z[J]=n-t,Z[Q]=r-e,Z},et=function(t,e,n,r){return t*n+e*r},nt=function(t,e,n){return Z[J]=t*n,Z[Q]=e*n,Z},rt=function(t,e,n,r){return t*r-e*n},it=function(t,e){return U["c"].sqrt(et(t,e,t,e))},ot=function(t,e){return Z[J]=-e,Z[Q]=t,Z},at=function(t,e){var n=it(t,e);return 0===n&&U["b"].throwError("Zero Vector CAN NOT be normalized."),Z[J]=t/n,Z[Q]=e/n,Z},st=function(t,e){return Z[J]=-t,Z[Q]=-e,Z},ct=(n("fb6a"),function(t){return t.slice(0)}),ut=function(t,e,n){var r=U["c"].cos(n),i=U["c"].sin(n);return Z[J]=t*r-e*i,Z[Q]=t*i+e*r,Z},lt=function(t,e,n,r){var i=at(n,r);return nt.apply(void 0,Object(B["a"])(i).concat([et.apply(void 0,[t,e].concat(Object(B["a"])(i)))]))},ht=function(t,e,n,r,o,a){return rt.apply(i,Object(B["a"])(tt(n,r,o,a)).concat(Object(B["a"])(tt(o,a,t,e))))>0},ft=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return q.apply(void 0,Object(B["a"])(ut.apply(i,Object(B["a"])(tt(r,o,t,e)).concat([n]))).concat([r,o]))},dt=function(t,e,n,r,o,a){if(t===n&&e===r)return z[G]=t,z[K]=e,z;var s=tt(t,e,n,r);if(0===rt.apply(i,Object(B["a"])(s).concat([o,a])))return z[G]=n,z[K]=r,z;var c=et.apply(i,Object(B["a"])(s).concat([o,a]));return q.apply(void 0,[t,e].concat(Object(B["a"])(nt(o,a,c))))},vt=function(t,e,n,r){return it.apply(i,Object(B["a"])(tt(t,e,n,r)))},pt=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return vt.apply(void 0,[t,e].concat(Object(B["a"])(dt.apply(void 0,[t,e].concat(r)))))},gt=n("26a3"),yt=[0,0,1,0],bt=0,mt=1,wt=2,xt=3,Ot=at,$t=tt,jt=ot,Tt=st,kt=function(t,e,n,r){var i=jt.apply(void 0,Object(B["a"])(Ot.apply(void 0,Object(B["a"])($t(t,e,n,r))))),o=Object(gt["a"])(i,2),a=o[0],s=o[1];if(yt[bt]=t,yt[mt]=e,et(a,s,t,e)>=0){var c=Tt(a,s),u=Object(gt["a"])(c,2),l=u[0],h=u[1];yt[wt]=l,yt[xt]=h}else yt[wt]=a,yt[xt]=s;return yt},Et=[0,0,0],St=0,Ct=1,Pt=2,Nt=function(t,e,n,r){return Et[St]=n,Et[Ct]=r,Et[Pt]=et(n,r,t,e),Et},Ft=function(t,e,n,r,i,o,a,s){var c=Nt(t,e,n,r),u=Object(gt["a"])(c,3),l=u[0],h=u[1],f=u[2],d=Nt(i,o,a,s),v=Object(gt["a"])(d,3),p=v[0],g=v[1],y=v[2],b=l*g-h*p,m=f*g-h*y,w=l*y-f*p;return 0===b?null:(0===h?(z[G]=f/l,z[K]=w/b):0===g?(z[G]=y/p,z[K]=w/b):0===l?(z[G]=m/b,z[K]=f/h):0===p?(z[G]=m/b,z[K]=y/g):(z[G]=m/b,z[K]=w/b),z)},Wt=function(t,e,n,r,i,o){return pt.apply(void 0,[t,e].concat(Object(B["a"])(kt(n,r,i,o))))},Ht=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(n?1:-1)*(t-e);return r>=0?r:r+X},Dt=function(t,e,n,r,i,o){return(t-i)*(r-o)-(e-o)*(n-i)},It=function(t,e,n,r,i,o,a,s){var c=Dt(t,e,n,r,i,o),u=Dt(t,e,n,r,a,s);if(c*u>=0)return null;var l=Dt(i,o,a,s,t,e),h=l+c-u;if(l*h>=0)return null;var f=l/(u-c);return z[G]=t+f*(n-t),z[K]=e+f*(r-e),z},Lt=[0,0,0,0],Mt=0,At=1,Rt=2,_t=3,Bt=function(t,e,n,r,i,o){return Lt[Mt]=t+i,Lt[At]=e+o,Lt[Rt]=n+i,Lt[_t]=r+o,Lt},Ut=function(t,e){for(var n=!1,r=t.length,i=0,o=r-1;i<r;o=i++){var a=t[i],s=t[o],c=a.y>e.y!==s.y>e.y&&e.x<(e.y-a.y)/(s.y-a.y)*(s.x-a.x)+a.x;c&&(n=!n)}return n},Vt=Object(R["a"])((function t(e,n){Object(A["a"])(this,t),this.x=e,this.y=n,this.incidentEdge=null})),Yt=Object(R["a"])((function t(){Object(A["a"])(this,t),this.origin=null,this.twin=null,this.incidentFace=null,this.next=null,this.previous=null})),Xt=Object(R["a"])((function t(){Object(A["a"])(this,t),this.outerComponent=null,this.innerComponents=[]})),zt=(n("96cf"),9999),Gt=regeneratorRuntime.mark(Kt);function Kt(t){var e,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e=t.incidentEdge,!U["g"].Not.Null(e)){i.next=8;break}n=e,r=0;case 3:return i.next=5,n;case 5:n=n.twin.next,r++;case 7:if(n!==e&&r<zt){i.next=3;break}case 8:case"end":return i.stop()}}),Gt)}var qt=regeneratorRuntime.mark(Jt);function Jt(t){var e,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e=t,n=0;case 1:return r.next=3,e;case 3:e=e.next,n++;case 5:if(e!==t&&n<zt){r.next=1;break}case 6:case"end":return r.stop()}}),qt)}var Qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Vt(t,e)},Zt=n("0402"),te=function(t){var e,n=[],r=Object(Zt["a"])(Kt(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n},ee=function(t){return U["g"].isNull(t.incidentEdge)},ne=function(t){return!ee(t)&&t.incidentEdge===t.incidentEdge.twin.next},re=function(t){var e=t.origin,n=e.x,r=e.y,i=t.twin.origin,o=i.x,a=i.y;return Math.atan2(a-r,o-n)},ie=function(t,e){var n,r=Object(Zt["a"])(Jt(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i===e)return!0}}catch(o){r.e(o)}finally{r.f()}return!1},oe=function(t,e){var n,r=Object(Zt["a"])(Jt(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.origin===e)return!0}}catch(o){r.e(o)}finally{r.f()}return!1},ae=function(t){return ie(t,t.twin)},se=function(t){var e,n=[],r=Object(Zt["a"])(Jt(t));try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n},ce=(n("aff5"),n("a9e3"),function(t){var e,n,r=null,i=-1/0;e=n=Number.MAX_SAFE_INTEGER;var o,a=Object(Zt["a"])(Jt(t));try{for(a.s();!(o=a.n()).done;){var s=o.value,c=s.origin,u=c.x,l=c.y,h=s.next.origin,f=h.x,d=h.y,v=(d-l)/(f-u);(u<e||u===e&&l<n||u===e&&l===n&&v>i)&&(e=u,n=l,i=v,r=s)}}catch(p){a.e(p)}finally{a.f()}return r}),ue=function(t){var e=ce(t),n=e.previous.twin;return n!==e&&Ht(re(n),re(e))<Math.PI},le=function(t){return!ue(t)},he=function(t,e){var n=t,r=n.twin,i=new Yt,o=new Yt;e.incidentEdge=i,i.origin=o.origin=e,i.incidentFace=n.incidentFace,o.incidentFace=r.incidentFace,i.twin=r,r.twin=i,o.twin=n,n.twin=o;var a=n.next,s=r.next;return i.next=a,n.next=i,i.previous=n,a.previous=i,o.next=s,r.next=o,o.previous=r,s.previous=o,i},fe=function(t){return t.origin},de=function(t){var e=t.outerComponent;return U["g"].isNull(e)?[]:se(e).map(fe)},ve=(n("a434"),function(t,e,n){var r=t.twin.incidentFace;e.includes(r)||(e.push(r),n.push(r))}),pe=function(t){var e,n=[t],r=[],i=Object(Zt["a"])(t.innerComponents);try{for(i.s();!(e=i.n()).done;){var o,a=e.value,s=Object(Zt["a"])(Jt(a));try{for(s.s();!(o=s.n()).done;){var c=o.value;ve(c,n,r)}}catch(p){s.e(p)}finally{s.f()}while(r.length){var u,l=Object(Zt["a"])(r.splice(0));try{for(l.s();!(u=l.n()).done;){var h,f=u.value,d=Object(Zt["a"])(Jt(f.outerComponent));try{for(d.s();!(h=d.n()).done;){var v=h.value;ve(v,n,r)}}catch(p){d.e(p)}finally{d.f()}}}catch(p){l.e(p)}finally{l.f()}}}}catch(p){i.e(p)}finally{i.f()}return n.shift(),n},ge=function t(e,n){var r=!!U["g"].isNull(e.outerComponent)||Ut(de(e),n);if(r){var i,o=Object(Zt["a"])(pe(e));try{for(o.s();!(i=o.n()).done;){var a=i.value,s=t(a,n);if(U["g"].Not.Null(s))return s}}catch(c){o.e(c)}finally{o.f()}return e}return null},ye=function(){return new Xt},be=function(t){U["g"].Not.String(t)&&U["b"].Throw.TypeError("Invalid event `type`, a string expected.")},me=function(t){U["g"].Not.Function(t)&&U["b"].Throw.TypeError("In valid event `listener`, a function expected.")},we=function(t,e){U["g"].Not.Number(t)&&U["b"].Throw.TypeError("Invalid `".concat(e,"`, a number excepted."))},xe=function(t,e){we(t),we(e)},Oe=(n("3ca3"),n("10d1"),n("ddb0"),new WeakMap),$e=function(t){return Oe.get(t)},je=function(){function t(e){Object(A["a"])(this,t),Oe.set(this,e)}return Object(R["a"])(t,[{key:"on",value:function(t,e){return be(t),me(e),$e(this).$on(t,e),this}},{key:"off",value:function(t,e){return be(t),me(e),$e(this).$off(t,e),this}}]),t}(),Te=n("a007"),ke=n("e3fc"),Ee=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){return Object(A["a"])(this,n),e.call(this,t)}return Object(R["a"])(n)}(je),Se=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"options",get:function(){return $e(this).$options}},{key:"setOptions",value:function(){}}]),n}(je),Ce=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"$reset",value:function(){$e(this).$reset()}},{key:"$state",get:function(){return $e(this).$state}}]),n}(je),Pe=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(Ce),r=Object(Zt["a"])(e);try{var i=function(){var e=t.value;n.prototype[e]=function(){return $e(this)[e](),this}};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return n},Ne=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=new t(this);return e?Object.freeze(n):n}},Fe=n("a34f");function We(){this.forceUpdateAll()}var He=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fe["a"](t,e,We)},De=n("c20e"),Ie=(n("4ec9"),n("4743")),Le=n("dcb4"),Me=(n("b0c0"),n("4e82"),n("3a02")),Ae=n("493b"),Re=(n("6062"),n("af93"),p.define()),_e=p.define({capture:!0,autoResizing:!0},{snap:p.define({enable:!0,interval:20}),scale:p.define({max:100,min:1}),style:p.define({backgroundColor:{value:15790320,set:function(t){this.application.renderer.backgroundColor=t}},backgroundOpacity:{value:1,set:function(t){this.application.renderer.backgroundAlpha=t}},fontSize:12}),plugin:Re}),Be=function(t,e){var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n].call(this)}})};for(var r in e)n(r)},Ue=function(t,e){var n=function(n){var r=e[n];t[n]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.call.apply(r,[this].concat(e))}};for(var r in e)n(r)},Ve=new WeakMap,Ye=function(t){return Ve.get(t)},Xe=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){var r;return Object(A["a"])(this,n),r=e.call(this),r.context=null,r.drawing=t,r.elementCollectionMap={},r}return Object(R["a"])(n,[{key:"forceUpdate",value:function(){for(var t in this.elementCollectionMap){var e,n=Object(Zt["a"])(this.elementCollectionMap[t]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.setDirty()}}catch(i){n.e(i)}finally{n.f()}}}}]),n}(Le["a"].Emitter),ze=Xe,Ge=(n("a630"),function(t){return t.context}),Ke=function(t){U["g"].Not.String(t)&&U["b"].Throw.TypeError("Invalid `className`, a string excepted.")},qe=function(){function t(e,n){Object(A["a"])(this,t),this.$id=e,this.$version=n,this.$proxy=this,this.$data=U["e"].freeze({})}return Object(R["a"])(t,[{key:"$drawing",get:function(){return Ye(this).drawing.proxy}},{key:"$getElementList",value:function(t){Ke(t);var e=Ye(this).elementCollectionMap[t];return U["g"].isUndefined(e)&&U["b"].throwError("The Element named `".concat(t,"` is NOT existed in this Plugin.")),Array.from(e.values()).map(Ge)}},{key:"$hideElement",value:function(t){Ke(t);var e=Ye(this).elementCollectionMap;if(t in e){var n,r=Object(Zt["a"])(e[t]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hide()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"$showElement",value:function(t){Ke(t);var e=Ye(this).elementCollectionMap;if(t in e){var n,r=Object(Zt["a"])(e[t]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.show()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"$hideAll",value:function(){for(var t in Ye(this).elementCollectionMap)this.$hideElement(t)}},{key:"$showAll",value:function(){for(var t in Ye(this).elementCollectionMap)this.$showElement(t)}},{key:"$forceUpdate",value:function(){Ye(this).forceUpdate()}},{key:"$toCanvas",value:function(t,e){return d.Point(t,e),Ye(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return d.Point(t,e),Ye(this).drawing.coordinate.toGeometry(t,e)}},{key:"$on",value:function(t,e){return d.EventType(t),d.EventListener(e),Ye(this).on(t,e),this}},{key:"$off",value:function(t,e){return d.EventType(t),d.EventListener(e),Ye(this).off(t,e),this}},{key:"$emit",value:function(t){var e;d.EventType(t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=Ye(this)).emit.apply(e,[t].concat(r)),this}}]),t}(),Je=function(t,e,n,r,i){Re.appendChild(t,n.options);var o=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){var i;for(var o in Object(A["a"])(this,n),i=e.call(this,t),r)i.elementCollectionMap[o]=new Set;return Ve.set(i.context=new a,Object(De["a"])(i)),i}return Object(R["a"])(n)}(ze),a=function(o){Object(Te["a"])(s,o);var a=Object(ke["a"])(s);function s(){var r;return Object(A["a"])(this,s),r=a.call(this,t,e),r.$proxy=n.proxy.call(Object(De["a"])(r)),r.$data=U["e"].seal(n.data()),U["e"].freeze(Object(De["a"])(r)),r}return Object(R["a"])(s,[{key:"$options",get:function(){return this.$drawing.options.plugin[t]}},{key:"$createElement",value:function(t){Ke(t);var e=r[t].Element;U["g"].isUndefined(e)&&U["b"].throwError("The Element named `".concat(t,"` is NOT existed."));for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=Object(Ae["a"])(e,[Ye(this)].concat(i)).context;return this.$emit("element-created",a.$proxy,t),a}},{key:"$createTool",value:function(t){var e=i[t];U["g"].isUndefined(e)&&U["b"].throwError("The Element named `".concat(t,"` is NOT existed."));var n=new e(this),r=n.context;return r.$proxy}}]),s}(qe);return Ue(a.prototype,n.methods),Be(a.prototype,n.getters),o},Qe=n("e5cd"),Ze=n("0384"),tn=new Set,en=new Me["Container"],nn=new WeakMap,rn=function(t){return nn.get(t)},on=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){var r;return Object(A["a"])(this,n),r=e.call(this),r.plugin=t,r.context=null,r.graphics=null,r.isDirty=!1,r._update=U["d"],r.destroyed=!1,r.collection.add(Object(De["a"])(r)),r}return Object(R["a"])(n,[{key:"renderable",get:function(){return!1}},{key:"interactive",get:function(){return!1}},{key:"hoverable",get:function(){return!1}},{key:"focusable",get:function(){return!1}},{key:"selectable",get:function(){return!1}},{key:"draggable",get:function(){return!1}},{key:"drawing",get:function(){return this.plugin.drawing}},{key:"selecting",get:function(){return this.drawing.state.selecting===this}},{key:"hovering",get:function(){return this.drawing.state.hovering===this}},{key:"holding",get:function(){return this.drawing.state.holding===this}},{key:"focusing",get:function(){return this.drawing.state.focusing===this}},{key:"hover",value:function(){U["g"].isNull(this.drawing.state.holding)&&(this.drawing.setHovering(this),this.setDirty())}},{key:"cancelHover",value:function(){this.drawing.setHovering(),this.setDirty()}},{key:"focus",value:function(){var t=this.drawing.state.focusing;t!==this&&(this.drawing.setFocusing(this),an(this,"focus"),this.setDirty())}},{key:"emitBlur",value:function(){an(this,"blur"),this.setDirty()}},{key:"hold",value:function(){this.drawing.setHolding(this),this.setDirty()}},{key:"release",value:function(){this.drawing.setHolding(),this.setDirty()}},{key:"group",get:function(){return en}},{key:"application",get:function(){return this.drawing.application}},{key:"collection",get:function(){return tn}},{key:"show",value:function(){this.graphics.visible=!0,this.setDirty()}},{key:"hide",value:function(){this.graphics.visible=!1,this.setDirty()}},{key:"setDirty",value:function(){this.destroyed||this.isDirty||(this.isDirty=!0,an(this,"dirty"))}},{key:"getBounds",value:function(){return this.graphics.getBounds()}},{key:"update",value:function(){this.isDirty&&(this.isDirty=!1,this.graphics.clear(),this.graphics.visible&&(this._update(this.graphics),an(this,"render")))}},{key:"destroy",value:function(){U["g"].Not.Null(this.graphics)&&(this.graphics.destroy(),this.application.ticker.remove(this.observer)),this.collection.delete(this),an(this,"destroy"),Le["a"].destroy(this),this.destroyed=!0}}]),n}(Le["a"].Emitter),an=function(t,e){t.emit(e,t.drawing.globalEvent.accessor)},sn=on,cn=U["e"].freeze({}),un=function(){function t(){Object(A["a"])(this,t),this.$proxy=this,this.$state=cn}return Object(R["a"])(t,[{key:"$data",get:function(){return rn(this).plugin.context.$data}},{key:"$drawing",get:function(){return rn(this).drawing.proxy}},{key:"$selecting",get:function(){return rn(this).selecting}},{key:"$focusing",get:function(){return rn(this).focusing}},{key:"$hovering",get:function(){return rn(this).hovering}},{key:"$holding",get:function(){return rn(this).holding}},{key:"$visible",get:function(){return rn(this).graphics.visible}},{key:"$isDirty",get:function(){return rn(this).isDirty}},{key:"$getBounds",value:function(){return rn(this).getBounds()}},{key:"$show",value:function(){rn(this).show()}},{key:"$hide",value:function(){rn(this).hide()}},{key:"$setDirty",value:function(){rn(this).setDirty()}},{key:"$destroy",value:function(){rn(this).destroy()}},{key:"$on",value:function(t,e){return d.EventType(t),d.EventListener(e),rn(this).on(t,e),this}},{key:"$off",value:function(t,e){return d.EventType(t),d.EventListener(e),rn(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=rn(this)).emit.apply(e,[t].concat(r)),this}},{key:"$focus",value:function(){var t=rn(this);t.focusable&&t.focus()}},{key:"$toCanvas",value:function(t,e){return d.Point(t,e),rn(this).drawing.coordinate.toCanvas(t,e)}},{key:"$toGeometry",value:function(t,e){return d.Point(t,e),rn(this).drawing.coordinate.toGeometry(t,e)}}]),t}(),ln=un,hn=["pointermove","pointerdown","pointerup","pointerover","pointerout"],fn=function(t,e){var n=U["g"].Not.Null(e.render),r=function(r){Object(Te["a"])(a,r);var o=Object(ke["a"])(a);function a(r){var s,c;Object(A["a"])(this,a),c=o.call(this,r);var u=new i;if(n){var l=new Me["Graphics"];c.observer=function(){return c.update()},c.application.ticker.add(c.observer),c.group.addChild(l),c.graphics=l,c.graphics.name=t,c.graphics.interactive=e.interative,e.interative&&(hn.forEach((function(t){l.on("".concat(t),(function(t){c.drawing.globalEvent.current=t}))})),l.on("pointermove",(function(){return an(Object(De["a"])(c),"pointermove")})).on("pointerover",(function(){return an(Object(De["a"])(c),"pointerover")})).on("pointerout",(function(){return an(Object(De["a"])(c),"pointerout")})).on("pointerdown",(function(){return an(Object(De["a"])(c),"pointerdown")})).on("pointerup",(function(){return an(Object(De["a"])(c),"pointerup")})),e.hoverable&&l.on("pointerover",(function(){return c.hover()})).on("pointerout",(function(){return c.cancelHover()})),e.draggable&&l.on("pointerdown",(function(){return c.hold()})).on("pointerup",(function(){return c.release()})),e.focusable&&l.on("pointerdown",(function(){return c.focus()}))),c._update=e.render.bind(u)}c.context=u,nn.set(u,Object(De["a"])(c));for(var h=arguments.length,f=new Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];return(s=e.created).call.apply(s,[u].concat(f)),c.setDirty(),c}return Object(R["a"])(a,[{key:"renderable",get:function(){return n}},{key:"interactive",get:function(){return this.renderable&&e.interative}},{key:"hoverable",get:function(){return this.interactive&&e.hoverable}},{key:"focusable",get:function(){return this.interactive&&e.focusable}},{key:"selectable",get:function(){return this.interactive&&e.selectable}},{key:"draggable",get:function(){return this.interactive&&e.draggable}},{key:"group",get:function(){return this.plugin.drawing.groupMap.get(a)}},{key:"collection",get:function(){return this.plugin.elementCollectionMap[t]}}]),a}(sn),i=function(n){Object(Te["a"])(i,n);var r=Object(ke["a"])(i);function i(){var t;return Object(A["a"])(this,i),t=r.call(this),t.$proxy=e.proxy.call(Object(De["a"])(t)),t.$state=U["e"].seal(e.state.call(Object(De["a"])(t))),U["e"].freeze(Object(De["a"])(t)),t}return Object(R["a"])(i,[{key:"$name",get:function(){return t}},{key:"$data",get:function(){return this.$plugin.$data}},{key:"$plugin",get:function(){return rn(this).plugin.context}},{key:"$destroy",value:function(){Object(Qe["a"])(Object(Ze["a"])(i.prototype),"$destroy",this).call(this),e.destroy.call(this)}}]),i}(ln);return Be(i.prototype,e.getters),Ue(i.prototype,e.methods),r},dn=(n("a4d3"),n("e01a"),new WeakMap),vn=function(t){return dn.get(t)},pn=Symbol("TOOL_READY"),gn=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){var t;return Object(A["a"])(this,n),t=e.call(this),t.plugin=null,t.context=null,t.busy=!1,t.state=pn,t.eventQueue=[],t}return Object(R["a"])(n,[{key:"reset",value:function(){this.context.$reset(),this.emit("reset"),this.setIdle(pn)}},{key:"setBusy",value:function(){this.busy=!0}},{key:"setIdle",value:function(t){this.busy=!1,this.state=t;var e=this.eventQueue;while(e.length){var r;(r=Object(Qe["a"])(Object(Ze["a"])(n.prototype),"emit",this)).call.apply(r,[this].concat(Object(B["a"])(e.pop())))}}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;this.busy?this.eventQueue.push(e):(i=Object(Qe["a"])(Object(Ze["a"])(n.prototype),"emit",this)).call.apply(i,[this].concat(e));return this}}]),n}(Le["a"].Emitter),yn=gn,bn=function(){function t(){Object(A["a"])(this,t)}return Object(R["a"])(t,[{key:"$state",get:function(){return vn(this).state}},{key:"$plugin",get:function(){return vn(this).plugin}},{key:"$on",value:function(t,e){return d.EventType(t),d.EventListener(e),vn(this).on(t,e),this}},{key:"$off",value:function(t,e){return d.EventType(t),d.EventListener(e),vn(this).off(t,e),this}},{key:"$emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=vn(this)).emit.apply(e,[t].concat(r)),this}}]),t}(),mn=function(t,e){var n=e.data,r=e.actions,i=e.states,o=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){var r;return Object(A["a"])(this,n),r=e.call(this,t),r.plugin=t,r.context=new a(Object(De["a"])(r)),t.$drawing.appendTool(Object(De["a"])(r)),r}return Object(R["a"])(n)}(yn),a=function(r){Object(Te["a"])(o,r);var i=Object(ke["a"])(o);function o(t){var r;return Object(A["a"])(this,o),r=i.call(this),dn.set(Object(De["a"])(r),t),r.$proxy=e.proxy.call(Object(De["a"])(r)),r.$data=U["e"].seal(n.call(Object(De["a"])(r),t.plugin)),U["e"].freeze(Object(De["a"])(r)),r}return Object(R["a"])(o,[{key:"$name",get:function(){return t}},{key:"$reset",value:function(){e.reset.call(this),vn(this).state=pn}}]),o}(bn),s=function(t){var e,n=r[t],o={},s=Object(Zt["a"])(n);try{for(s.s();!(e=s.n()).done;){var c=Object(gt["a"])(e.value,3),u=c[0],l=c[1],h=c[2];o[u]={handler:l,target:h,source:u}}}catch(f){s.e(f)}finally{s.f()}a.prototype[t]=function(){var e=vn(this);e.busy&&U["b"].throwError("It could NOT call an action during another action.");var n=o[this.$state];U["g"].isUndefined(n)&&U["b"].throwError(".".concat(t," can NOT be called from state(=").concat(String(this.$state),")."));var r=n.handler,a=n.target,s=n.source;return i[s].leave.call(this),e.setBusy(),r.call(this),i[a].entry.call(this),e.setIdle(a),this}};for(var c in r)s(c);var u=function(t){var n=e.methods[t];a.prototype[t]=function(){for(var t=this.$state,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=n.call.apply(n,[this].concat(r));return this.$state!==t&&U["b"].throwError("A normal method could NOT be used to transit state."),o}};for(var l in e.methods)u(l);return o},wn=function(){return{}},xn=function(t){var e={data:wn,created:U["d"],methods:{},getters:{},proxy:function(){return this},options:p.define()},n=t.data,r=void 0===n?e.data:n,i=t.created,o=void 0===i?e.created:i,a=t.methods,s=void 0===a?e.methods:a,c=t.getters,u=void 0===c?e.getters:c,l=t.proxy,h=void 0===l?e.proxy:l,f=t.options,d=void 0===f?e.options:f;for(var v in U["g"].Not.Function(r)&&U["b"].Throw.TypeError("Invalid `.data`, a function as constructor expected."),U["g"].Not.Function(o)&&U["b"].Throw.TypeError("Invalid `.created`, a function expected."),U["g"].Not.Object(s)&&U["b"].Throw.TypeError("Invalid `.methods`, an object expected."),s)U["g"].Not.Function(s[v])&&U["b"].Throw.TypeError("Invalid `.methods.".concat(v,"`, a function expected."));for(var g in U["g"].Not.Object(u)&&U["b"].Throw.TypeError("Invalid `.getters`, an object expected."),u)U["g"].Not.Function(u[g])&&U["b"].Throw.TypeError("Invalid `.getters.".concat(g,"`, a function expected."));return U["g"].Not.Function(h)&&U["b"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.data=r,e.created=o,e.methods=s,e.getters=u,e.proxy=h,e.options=d,e},On=function(){return{}},$n=function(t){var e={groupIndex:0,interative:!1,hoverable:!1,focusable:!1,selectable:!1,draggable:!1,state:On,render:null,created:U["d"],destroy:U["d"],methods:{},getters:{},proxy:function(){return this}},n=t.groupIndex,r=void 0===n?e.groupIndex:n,i=t.interative,o=void 0===i?e.interative:i,a=t.hoverable,s=void 0===a?e.hoverable:a,c=t.focusable,u=void 0===c?e.focusable:c,l=t.selectable,h=void 0===l?e.selectable:l,f=t.draggable,d=void 0===f?e.draggable:f,v=t.state,p=void 0===v?e.state:v,g=t.render,y=void 0===g?e.render:g,b=t.created,m=void 0===b?e.created:b,w=t.destroy,x=void 0===w?e.destroy:w,O=t.methods,$=void 0===O?e.methods:O,j=t.getters,T=void 0===j?e.getters:j,k=t.proxy,E=void 0===k?e.proxy:k;for(var S in U["g"].Not.Number(r)&&U["b"].Throw.TypeError("Invalid `.elements[].groupIndex`, a number expected."),U["g"].Not.Boolean(o)&&U["b"].Throw.TypeError("Invalid `.elements[].interative`, a boolean expected."),U["g"].Not.Boolean(s)&&U["b"].Throw.TypeError("Invalid `.elements[].hoverable`, a boolean expected."),U["g"].Not.Boolean(u)&&U["b"].Throw.TypeError("Invalid `.elements[].focusable`, a boolean expected."),U["g"].Not.Boolean(h)&&U["b"].Throw.TypeError("Invalid `.elements[].selectable`, a boolean expected."),U["g"].Not.Boolean(d)&&U["b"].Throw.TypeError("Invalid `.elements[].draggable`, a boolean expected."),U["g"].Not.Function(p)&&U["b"].Throw.TypeError("Invalid `.elements[].state`, a function expected."),U["g"].Not.Function(y)&&U["g"].Not.Null(y)&&U["b"].Throw.TypeError("Invalid `.elements[].render`, a function or null expected."),U["g"].Not.Function(m)&&U["b"].Throw.TypeError("Invalid `.elements[].created`, a function expected."),U["g"].Not.Function(x)&&U["b"].Throw.TypeError("Invalid `.elements[].destroy`, a function expected."),U["g"].Not.Object($)&&U["b"].Throw.TypeError("Invalid `.elements[].methods`, an object as function map expected"),$)U["g"].Not.Function($[S])&&U["b"].Throw.TypeError("Invalid `.elements[].methods.".concat(S,"`, a function expected."));for(var C in U["g"].Not.Object(T)&&U["b"].Throw.TypeError("Invalid `.elements[].getters`, an object as function map expected"),T)U["g"].Not.Function(T[C])&&U["b"].Throw.TypeError("Invalid `.elements[].getters.".concat(C,"`, a function expected."));return U["g"].Not.Function(E)&&U["b"].Throw.TypeError("Invalid `.proxy`, a function as constructor expected."),e.groupIndex=r,e.interative=o,e.hoverable=s,e.focusable=u,e.selectable=h,e.draggable=d,e.state=p,e.render=y,e.created=m,e.destroy=x,e.methods=$,e.getters=T,e.proxy=E,e},jn=(n("1bf2"),function(){return{}}),Tn=[0,function(){return U["b"].throwError("Not implemented.")},0],kn=function(t){U["g"].isArray(t)&&3===t.length&&U["g"].isFunction(t[1])||U["b"].Throw.TypeError("Invalid transition, a [source, function, target] expected.")},En=function(t){if(U["g"].Not.Array(t)&&U["b"].Throw.TypeError("Invalid action transition, an array expected."),0===t.length)return[Tn];if(U["g"].Not.Array(t[0]))return kn(t),[t];var e,n=[],r=Object(Zt["a"])(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;kn(i),n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n},Sn=function(t){var e={};for(var n in U["g"].Not.Object(t)&&U["b"].Throw.TypeError("Invalid tool actions, a plain object expected."),t)e[n]=En(t[n]);return e},Cn=Object.freeze({entry:U["d"],leave:U["d"]}),Pn=function(t){var e={entry:U["d"],leave:U["d"]},n=t.entry,r=void 0===n?e.entry:n,i=t.leave,o=void 0===i?e.leave:i;return U["g"].Not.Function(r)&&U["b"].Throw.TypeError("Invalid operation.entry, a function expected."),U["g"].Not.Function(o)&&U["b"].Throw.TypeError("Invalid operation.leave, a function expected."),e.entry=r,e.leave=o,e},Nn=function(t,e){var n={};for(var r in e){var i=e[r];if(U["g"].isArray(i[0])){var o,a=Object(Zt["a"])(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n[s[0]]=n[s[2]]=Cn}}catch(f){a.e(f)}finally{a.f()}}else n[i[0]]=n[i[2]]=Cn}var c,u=Object(Zt["a"])(U["f"].ownKeys(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,h=t[l];if(U["g"].isUndefined(h))return;U["g"].isObject(h)?n[l]=Pn(h):U["g"].isFunction(h)?n[l]=Pn({entry:h}):U["b"].Throw.TypeError("Invalid state operation, a function or expected.")}}catch(f){u.e(f)}finally{u.f()}return n},Fn=function(t){var e={states:{},actions:{},data:jn,reset:U["d"],methods:{},proxy:function(){return this}},n=t.states,r=void 0===n?e.states:n,i=t.actions,o=void 0===i?e.actions:i,a=t.data,s=void 0===a?e.data:a,c=t.reset,u=void 0===c?e.reset:c,l=t.methods,h=void 0===l?e.methods:l,f=t.proxy,d=void 0===f?e.proxy:f;for(var v in U["g"].Not.Function(s)&&U["b"].Throw.TypeError("Invalid `.tools[].data`, a function expected."),U["g"].Not.Function(u)&&U["b"].Throw.TypeError("Invalid `.tools[].reset`, a function expected."),U["g"].Not.Function(d)&&U["b"].Throw.TypeError("Invalid `.tools[].proxy`, a function expected."),h)U["g"].Not.Function(h[v])&&U["b"].Throw.TypeError("Invalid `.tools[].methods.".concat(v,"`, a function expected."));return e.actions=Sn(o),e.states=Nn(r,o),e.data=s,e.reset=u,e.methods=h,e.proxy=d,e},Wn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={namespace:null,version:null,dependencies:[],plugin:{},elements:{},tools:{}},n=t.id,r=t.version,i=t.namespace,o=void 0===i?e.namespace:i,a=t.dependencies,s=void 0===a?e.dependencies:a,c=t.plugin,u=void 0===c?e.plugin:c,l=t.elements,h=void 0===l?e.elements:l,f=t.tools,d=void 0===f?e.tools:f;if(U["g"].Not.String(n)&&U["b"].Throw.TypeError("Invalid `.id`, a string expected."),U["g"].Not.String(r)&&U["b"].Throw.TypeError("Invalid `.version`, string expected."),U["g"].Not.String(o)&&U["g"].Not.Null(o)&&U["b"].Throw.TypeError("Invalid `.namespace`, a string or null expected."),U["g"].Not.Array(s))U["b"].Throw.TypeError("Invalid `.dependencies`, an array expected.");else{var v,p=Object(Zt["a"])(s);try{for(p.s();!(v=p.n()).done;){var g=Object(gt["a"])(v.value,2),y=g[0],b=g[1];U["g"].Not.String(y)&&U["b"].Throw.TypeError("Invalid `.dependencies[".concat(b,"]`, a string expected."))}}catch(x){p.e(x)}finally{p.f()}}for(var m in U["g"].Not.Object(h)&&U["b"].Throw.TypeError("Invalid `.elements`, an object as map expected."),e.id=n,e.version=r,e.namespace=o,e.dependencies=s,e.plugin=xn(u),h)e.elements[m]=$n(h[m]);for(var w in d)e.tools[w]=Fn(d[w]);return e},Hn=new Map,Dn=[],In=function(t){var e=Wn(t),n=e.id,r=e.namespace,i=e.version,o=e.plugin,a=e.elements,s=e.tools;Dn.some((function(t){return t.id===n}))&&U["b"].throwError("A Plugin id=".concat(n," is used."));var c={},u={};for(var l in a)c[l]={index:a[l].groupIndex,Element:fn(l,a[l])};for(var h in s)u[h]=mn(h,s[h]);var f=Je(n,i,o,c,u);Hn.set(f,o.created),Dn.push({id:n,namespace:r,Plugin:f,Elements:Object.freeze(c)})},Ln=function(t){var e,n=[],r=Object(Zt["a"])(Dn);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.id,a=i.namespace,s=i.Plugin,c=i.Elements,u=new s(t),l=t.Plugin.Proxy[o]=u.context.$proxy;for(var h in t.Plugin.Context[o]=u.context,U["g"].isString(a)&&(U["g"].isUndefined(t.proxy[a])?t.proxy[a]=l:console.warn('Registering namespace "'.concat(a,'" is duplicated.'))),c){var f=new Me["Container"],d=c[h];f.name="".concat(h,"-group"),t.groupMap.set(d.Element,f),n.push({container:f,index:d.index})}n.sort((function(t,e){return t.index-e.index}));var v,p=Object(Zt["a"])(n);try{for(p.s();!(v=p.n()).done;){var g=v.value;t.application.stage.addChild(g.container)}}catch(y){p.e(y)}finally{p.f()}Hn.get(s).call(u.context)}}catch(y){r.e(y)}finally{r.f()}Object.freeze(t.Plugin.Proxy)},Mn={button:0,buttons:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},An=function(t){return U["g"].isNull(t)?null:t.context.$proxy};function Rn(t,e){var n=null,r=U["e"].freeze({get drawing(){return t.proxy},get button(){return Mn.button},get buttons(){return Mn.buttons},get ctrlKey(){return Mn.ctrlKey},get shiftKey(){return Mn.shiftKey},get altKey(){return Mn.altKey},get metaKey(){return Mn.metaKey},get pointerX(){return e.pointer.x},get pointerY(){return e.pointer.y},get virtualX(){return e.virtual.x},get virtualY(){return e.virtual.y},get hovering(){return An(e.hovering)},get focusing(){return An(e.focusing)},get selecting(){return An(e.selecting)},get holding(){return An(e.holding)},stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.data.originalEvent.preventDefault()}});return{get current(){return n},set current(t){n=t},accessor:r}}["mousedown","mouseup","pointerdown","pointerup"].forEach((function(t){Ie["a"].DOCUMENT.addEventListener(t,(function(t){Mn.button=t.button,Mn.buttons=t.buttons}),{capture:!0})})),["keydown","keyup"].forEach((function(t){Ie["a"].addEventListener(Ie["c"].WINDOW,t,(function(t){Mn.ctrlKey=t.ctrlKey,Mn.shiftKey=t.shiftKey,Mn.altKey=t.altKey,Mn.metaKey=t.metaKey}))}));var _n=25,Bn=100,Un=100,Vn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Un;Object(A["a"])(this,t),this.scale=_n,this.originX=e,this.originY=n}return Object(R["a"])(t,[{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n;this.scale=t}},{key:"move",value:function(t,e){this.originX=U["c"].round(t),this.originY=U["c"].round(e)}},{key:"toGeometry",value:function(t,e){var n=this.scale,r=this.originX,i=this.originY;return[(t-r)*n,(i-e)*n]}},{key:"toCanvas",value:function(t,e){var n=this.scale,r=this.originX,i=this.originY;return[r+t/n,i-e/n]}}]),t}(),Yn=function(){return{x:0,y:0}},Xn=function(){return{capturedAt:null,pointer:Yn(),virtual:Yn(),hovering:null,focusing:null,selecting:null,holding:null}},zn=["pointermove","pointerdown","pointerup"];function Gn(t,e,n){var r=new Me["Application"]({antialias:!0,backgroundColor:n.style.backgroundColor,backgroundAlpha:n.style.backgroundOpacity});return r.stage.interactive=!0,r.stage.hitArea=new Me["Rectangle"],r.ticker.add((function(){return t.watchSnap()})).add((function(){return t.watchSize()})),zn.forEach((function(e){r.stage.on("".concat(e),(function(e){t.globalEvent.current=e}))})),r.stage.on("pointerdown",(function(n){Kn(t,"pointerdown");var r=n.target,i=e.focusing;U["g"].Not.Null(i)&&r!==i.graphics&&t.setFocusing()})).on("pointerup",(function(){Kn(t,"pointerup"),t.setHolding()})).on("pointermove",(function(r){if(n.capture){var i=r.data.global,o=i.x,a=i.y,s=e.pointer;s.x===o&&s.y===a||t.setPointer(o,a)}})),r}var Kn=function(t,e){t.emit(e,t.globalEvent.accessor)},qn=(n("4de4"),function(){function t(){Object(A["a"])(this,t),this.store=new Set}return Object(R["a"])(t,[{key:"register",value:function(t){this.store.add(t)}},{key:"remove",value:function(t){this.store.has(t)&&this.store.delete(t)}},{key:"from",value:function(t,e){var n=!1,r=[t,e],i=Array.from(this.store).filter(Qn).sort(Jn),o=function(t,e){d.Point(t,e),r[0]=t,r[1]=e,n=!0};while(!n&&i.length>0)i.pop().handle(t,e,o);return r}}]),t}()),Jn=function(t,e){return t.priority-e.priority},Qn=function(t){return t.active},Zn=function(){function t(){Object(A["a"])(this,t),this.registry=new Set}return Object(R["a"])(t,[{key:"append",value:function(t){this.registry.add(t)}},{key:"reset",value:function(){var t,e=Object(Zt["a"])(this.registry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.reset()}}catch(r){e.e(r)}finally{e.f()}}}]),t}(),tr=new WeakMap,er=function(t){return tr.get(t)},nr=["keydown","keyup"];function rr(t){Ie["a"].addEventListener(Ie["c"].WINDOW,t,this.keyboardEventListener)}function ir(t){Ie["a"].removeEventListener(Ie["c"].WINDOW,t,this.keyboardEventListener)}for(var or,ar=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t){var r;Object(A["a"])(this,n),r=e.call(this,t),tr.set(t,Object(De["a"])(r));var i=r.state=Xn(),o=r.options=new _e(Object(De["a"])(r));return r.destroyed=!1,r.proxy=t,r.containerElement=null,r.keyboardEventListener=function(t){return Kn(Object(De["a"])(r),t.type)},r.application=Gn(Object(De["a"])(r),i,o),r.globalEvent=Rn(Object(De["a"])(r),i),r.coordinate=new Vn,r.snapManager=new qn,r.toolManager=new Zn,r.groupMap=new Map,r.Plugin={Proxy:{},Context:{}},Ln(Object(De["a"])(r)),nr.forEach(rr,Object(De["a"])(r)),r}return Object(R["a"])(n,[{key:"canvasElement",get:function(){return this.application.view}},{key:"watchSize",value:function(){if(this.options.autoResizing){var t=this.application.view,e=t.parentElement,n=e.offsetHeight,r=e.offsetWidth;t.height===n&&t.width===r||this.resize()}}},{key:"watchSnap",value:function(){if(this.options.snap.enable){var t=this.state,e=t.capturedAt,n=t.virtual,r=t.pointer;if(!U["g"].isNull(e)){var i=Date.now();if(i-e>this.options.snap.interval){var o=this.snapManager.from(r.x,r.y),a=Object(gt["a"])(o,2);n.x=a[0],n.y=a[1],Kn(this,"pointermove"),Kn(this,"snap"),this.state.capturedAt=null}}}}},{key:"mount",value:function(t){Ie["a"].appendChild(t,this.canvasElement),this.containerElement=t,Kn(this,"mount"),this.resize()}},{key:"destroy",value:function(){nr.forEach(ir,this),this.keyboardEventListener=null,Ie["a"].removeFromParent(this.canvasElement),Le["a"].destroy(this),this.destroyed=!0}},{key:"resize",value:function(){var t=this.application,e=t.stage,n=t.view,r=this.containerElement,i=r.offsetWidth,o=r.offsetHeight;e.hitArea.width=n.width=i,e.hitArea.height=n.height=o,this.application.renderer.resize(i,o),this.forceUpdateAll(),Kn(this,"resize")}},{key:"setPointer",value:function(t,e){this.state.pointer.x=this.state.virtual.x=t,this.state.pointer.y=this.state.virtual.y=e,this.state.capturedAt=Date.now(),Kn(this,"pointermove")}},{key:"setHovering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.hovering=t}},{key:"setFocusing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.state.focusing;this.state.focusing=t,U["g"].Not.Null(e)&&e.emitBlur()}},{key:"setHolding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.state.holding=t}},{key:"forceUpdateAll",value:function(){for(var t in this.Plugin.Context)this.Plugin.Context[t].$forceUpdate()}}]),n}(Le["a"].Emitter),sr=0,cr=1,ur=function(t){return U["g"].isNull(t)?null:t.context.$proxy},lr=function(t){return[t.x,t.y]},hr=(or={},Object(_["a"])(or,sr,(function(t,e){t.setScale(e)})),Object(_["a"])(or,cr,(function(t,e){t.setScaleByReference.apply(t,[e].concat(Object(B["a"])(t.pointer)))})),or),fr=function(){function t(){Object(A["a"])(this,t),new ar(this),U["e"].freeze(this)}return Object(R["a"])(t,[{key:"options",get:function(){return er(this).options}},{key:"canvasElement",get:function(){return er(this).canvasElement}},{key:"hovering",get:function(){return ur(er(this).state.hovering)}},{key:"selecting",get:function(){return ur(er(this).state.selecting)}},{key:"focusing",get:function(){return ur(er(this).state.focusing)}},{key:"holding",get:function(){return ur(er(this).state.holding)}},{key:"plugins",get:function(){return er(this).Plugin.Proxy}},{key:"pointer",get:function(){return lr(er(this).state.pointer)}},{key:"virtual",get:function(){return lr(er(this).state.virtual)}},{key:"origin",get:function(){var t=er(this).coordinate,e=t.originX,n=t.originY;return[e,n]}},{key:"scale",get:function(){return er(this).coordinate.scale}},{key:"width",get:function(){return er(this).application.view.width}},{key:"height",get:function(){return er(this).application.view.height}},{key:"mount",value:function(t){U["b"].instanceOf(t,HTMLElement)||U["b"].Throw.TypeError("Invalid `element`, a HTMLElement expected."),er(this).mount(t)}},{key:"resize",value:function(){er(this).resize()}},{key:"destroy",value:function(){er(this).destroy()}},{key:"setOrigin",value:function(t,e){d.Point(t,e);var n=er(this);n.coordinate.move(t,e),n.forceUpdateAll()}},{key:"setScale",value:function(t){U["g"].Not.Number(t)&&U["b"].Throw.TypeError("Invalid scale, a number expected.");var e=er(this),n=this.options.scale,r=n.min,i=n.max,o=U["c"].max(r,U["c"].min(i,t));e.coordinate.setScale(o),e.forceUpdateAll()}},{key:"setScaleByReference",value:function(t,e,n){var r,o;d.Point(e,n);var s=er(this),c=this.origin,u=s.coordinate.toGeometry(e,n);this.setScale(t);var l=(r=s.coordinate).toCanvas.apply(r,Object(B["a"])(u)),h=i.fromTwoPoint.apply(i,Object(B["a"])(l).concat([e,n]));(o=s.coordinate).move.apply(o,Object(B["a"])(a.translate.apply(a,Object(B["a"])(c).concat(Object(B["a"])(h))))),s.forceUpdateAll()}},{key:"setScaleInMode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;U["e"].values(y).includes(e)?hr[e](this,t):U["b"].Throw.TypeError("Invalid `mode`, a value of SCALE_MODE expected.")}},{key:"on",value:function(t,e){return er(this).on(t,e),this}},{key:"off",value:function(t,e){return er(this).off(t,e),this}},{key:"registerSnap",value:function(t){er(this).snapManager.register(t)}},{key:"appendTool",value:function(t){er(this).toolManager.append(t)}},{key:"resetAllTool",value:function(){er(this).toolManager.reset()}}]),t}(),dr=function(t){return $n(t)},vr=function(t,e,n){return Fn(U["e"].assign(n,{states:t,actions:e}))},pr=function(t){return xn(t)},gr=function(t){return Wn(t)},yr=v._,br=n("5d77"),mr=(n("9911"),n("ac1f"),n("1276"),function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"x",get:function(){return yr(this).x}},{key:"y",get:function(){return yr(this).y}},{key:"move",value:function(t,e){return g.Assert.Point(t,e),yr(this).move(t,e),this}},{key:"remove",value:function(){return yr(this).remove(),this}},{key:"getAdjacentCornerList",value:function(){return yr(this).getAdjacentCornerList().map(wr)}}]),n}(g.Proxy.Element)),wr=function(t){return t.$proxy},xr=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"thickness",get:function(){return yr(this).$state.thickness}},{key:"thisSurface",get:function(){return yr(this).thisSurface.$proxy}},{key:"thatSurface",get:function(){return yr(this).thatSurface.$proxy}},{key:"setThickness",value:function(t){(U["g"].Not.Number(t)||t<=0)&&U["b"].Throw.TypeError("Invalid `thickness`, a number >0 expected."),yr(this).setThickness(t)}},{key:"remove",value:function(){yr(this).remove()}}]),n}(g.Proxy.Element),Or=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"getOptions",value:function(){return yr(this).$data.optionsGetter}},{key:"createCorner",value:function(t,e){return g.Assert.Point(t,e),yr(this).createCorner(t,e).$proxy}},{key:"removeCorner",value:function(t){return U["b"].instanceOf(t,mr)||U["b"].Throw.TypeError("Invalid `corner`, a CornerProxy expected."),yr(this).removeCorner(yr(t))}},{key:"createWall",value:function(t,e){return Tr(t,e),yr(this).createWall(yr(t),yr(e)).$proxy}},{key:"removeWall",value:function(t){return U["b"].instanceOf(t,xr)||U["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),yr(this).removeWall(yr(t))}},{key:"split",value:function(t,e,n){return g.Assert.Point(e,n),U["b"].instanceOf(t,xr)||U["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected."),yr(this).split(yr(t),e,n).$proxy}},{key:"merge",value:function(t){U["b"].instanceOf(t,mr)||U["b"].Throw.TypeError("Invalid `corner`, a CornerProxy expected.");var e=yr(t);return 2!==e.length&&U["b"].throwError("The Wall number of this Corner is NOT 2."),yr(this).merge(e).$proxy}},{key:"combine",value:function(t){U["b"].instanceOf(t,xr)||U["b"].Throw.TypeError("Invalid `wall`, a WallProxy expected.");var e=yr(t);return yr(this).combine(e).$proxy}},{key:"removeRoom",value:function(){}},{key:"getAllWallList",value:function(){return yr(this).$getElementList("Wall").map($r)}},{key:"getAllRoomList",value:function(){return yr(this).$getElementList("Room").map($r)}},{key:"getRoomByPoint",value:function(t,e){g.Assert.Point(t,e);var n=yr(this).getRoomOfPoint(t,e);return n?n.$proxy:null}},{key:"queryCorner",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;g.Assert.Point(t,e),(U["g"].Not.Number(n)||n<=0)&&U["b"].Throw.TypeError("Invalid `range`, a number >0 expected.");var r=yr(this).queryCorner(t,e,n);return U["g"].isNull(r)?null:r.$proxy}},{key:"mergeAll",value:function(){}},{key:"clearEmplyCorner",value:function(){}}]),n}(g.Proxy.Plugin),$r=function(t){return t.$proxy},jr=["from","to"],Tr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r in jr)U["b"].instanceOf(e[r],mr)||U["b"].Throw.TypeError("Invalid `".concat(jr[r],"`, a CornerProxy excepted."))},kr=g.Options.define,Er=kr({show:!0},{snap:kr({},{corner:kr({active:!0,priority:0,maxDistance:40})}),corner:kr({show:!0,render:null},{style:kr({color:16777215,opacity:.4,radius:5})}),wall:kr({show:!0},{style:kr({opacity:1,color:10066329,hoverColor:13421772}),midline:kr({show:!0,color:16711680,width:1})}),room:kr({show:!0,defaultTexture:null}),surface:kr({opacity:1,borderColor:0,borderWidth:2})}),Sr=function(t,e){var n,i=null,o=r.ROUND,a=Object(Zt["a"])(f.Iterator.allHalfEdgeOfVertex(t));try{for(a.s();!(n=a.n()).done;){var c=n.value,u=s.differ(e,f.getAngleOfHalfEdge(c),!1);u<o&&(o=u,i=c)}}catch(l){a.e(l)}finally{a.f()}return i},Cr=function(t,e,n){if(U["g"].Not.Null(t.incidentEdge)){var r=t.x,i=t.y,o=n.x,a=n.y,s=Math.atan2(a-i,o-r),c=Sr(t,s),u=c.twin;e.previous=u,e.twin.next=u.next,u.next.previous=e.twin,u.next=e}e.origin=t,t.incidentEdge=e},Pr=function(t,e){var n,r=Object(Zt["a"])(f.Iterator.allHalfEdgeOfPath(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;i.incidentFace=e}}catch(o){r.e(o)}finally{r.f()}},Nr=function(t,e){t.twin=e,e.twin=t,t.next=e,e.next=t,t.previous=e,e.previous=t},Fr=function(t,e,n){var r=U["g"].isNull(t.incidentEdge)&&U["g"].isNull(e.incidentEdge),i=new f.Struct.HalfEdge,o=new f.Struct.HalfEdge;Nr(i,o),Cr(t,i,e),Cr(e,o,t);var a=r?f.getFaceOfPoint(n,t):i.previous.incidentFace||i.next.incidentFace,s=a.outerComponent,c=a.innerComponents;if(f.isTwinInSamePath(i)){i.incidentFace=o.incidentFace=a;var u=c.splice(0);f.isPathContainsHalfEdge(i,s)?a.outerComponent=i:c.push(i);var l,h=Object(Zt["a"])(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;f.isPathContainsHalfEdge(i,d)||c.push(d)}}catch(T){h.e(T)}finally{h.f()}}else{var v=new f.Struct.Face,p=f.isOuterPath(o),g=f.isOuterPath(i),y=p?i:o,b=y.twin;Pr(b,v),y.incidentFace=a,v.outerComponent=b;var m=a.innerComponents.splice(0);g===p?a.outerComponent=y:a.innerComponents.push(y);var w,x=Object(Zt["a"])(m);try{for(x.s();!(w=x.n()).done;){var O=w.value,$=O.origin;if(!f.isPathContainsVertex(y,$)&&!f.isPathContainsHalfEdge(b,O)){var j=f.getFaceOfPoint(v,$)?v:a;O.incidentFace!==j&&Pr(O,j),j.innerComponents.push(O)}}}catch(T){x.e(T)}finally{x.f()}}return i},Wr=function(t){t.incidentEdge=null,t.x=0,t.y=0},Hr=function(t){t.origin=null,t.twin=null,t.previous=null,t.next=null,t.incidentFace=null},Dr=function(t){return t.outerComponent=null,t.innerComponents.length=0,t},Ir=function(t){var e=t.twin,n=t.previous,r=t.origin,i=null;return e===n?Wr(r):(n.next=r.incidentEdge=e.next,i=e.next.previous=n),i},Lr=function(t){var e=t.incidentFace,n=t.twin,r=f.isTwinInSamePath(t),i=f.isOuterPath(t),o=Ir(t),a=Ir(n);if(r){var s,c=e.innerComponents,u=c.splice(0),l=[o,a].filter(U["g"].Not.Null).filter((function(t){var n=f.isOuterPath(t);return n?e.outerComponent=t:c.push(t),!n})),h=Object(Zt["a"])(u);try{var d=function(){var e=s.value;e!==t&&e!==n&&l.every((function(t){return!f.isPathContainsHalfEdge(t,e)}))&&c.push(e)};for(h.s();!(s=h.n()).done;)d()}catch($){h.e($)}finally{h.f()}}else{var v,p,g=o.incidentFace,y=a.incidentFace;if(i?(v=y,p=g):(v=g,p=y),f.isOuterPath(o))v.outerComponent=o;else{var b=v.innerComponents,m=v.innerComponents.splice(0).concat(p.innerComponents);b.push(o);var w,x=Object(Zt["a"])(m);try{for(x.s();!(w=x.n()).done;){var O=w.value;O===t||O===n||f.isPathContainsHalfEdge(o,O)||b.push(O)}}catch($){x.e($)}finally{x.f()}}Pr(o,v),Dr(p)}Hr(t),Hr(n)},Mr=function(t){return f.getVertexHalfEdgeList(t).forEach(Lr),t.incidentEdge=null,t},Ar=function(t){var e=t.incidentEdge.twin,n=e.next.twin,r=e.next.next,i=n.next.next;return Hr(e.twin),Hr(n.twin),Wr(t),e.twin=n,n.twin=e,e.next=r,n.next=i,r.previous=e,i.previous=n,e},Rr=function(t){var e=t.incidentFace;if(e.outerComponent===t)e.outerComponent=t.next;else{var n=e.innerComponents,r=n.indexOf(t);-1!==r&&(n[r]=t.next)}},_r=function(t){var e=t.twin,n=t.origin,r=e.origin,i=f.hasOnlyHalfEdge(n),o=f.hasOnlyHalfEdge(r);Rr(t),Rr(e);var a=n;if(i)if(o)Lr(t);else{var s=[n.x,n.y];r.x=s[0],r.y=s[1],Mr(n),a=r}else if(o)Mr(r);else{var c,u=Object(Zt["a"])(f.Iterator.allHalfEdgeOfVertex(r));try{for(u.s();!(c=u.n()).done;){var l=c.value;l.origin=n}}catch(d){u.e(d)}finally{u.f()}n.incidentEdge=t.next,t.previous.next=t.next,t.next.previous=t.previous;var h=t.twin;h.previous.next=h.next,h.next.previous=h.previous,Hr(t),Hr(h),Wr(r)}return a},Br="c",Ur="d",Vr="D",Yr="Rg",Xr="_D",zr="_Rg",Gr=new WeakMap,Kr=function(t){return Gr.get(t)},qr=function(t,e,n,r,i){function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(A["a"])(this,o),Gr.set(t,this),this[Br]=e}return Object(R["a"])(o,[{key:t,get:function(){return U["g"].isNull(this[Br])}},{key:e,value:function(){this[Br]=null,this[Xr]()}},{key:n,value:function(){this[zr]()}},{key:r,value:function(){}},{key:i,value:function(){}}]),o}(Ur,Vr,Yr,Xr,zr),Jr=function(){function t(){Object(A["a"])(this,t)}return Object(R["a"])(t,[{key:"mesh",get:function(){var t=Kr(this);return t[Ur]?null:t[Br].$}},{key:"destroyed",get:function(){return Kr(this)[Ur]}}]),t}(),Qr="v",Zr="F",ti="H",ei="E",ni="M",ri="e",ii="v",oi="f",ai="g",si="mv",ci="mf",ui="mh",li="CV",hi="M",fi="L",di="S",vi="G",pi="C",gi="LV",yi="RV",bi="RE",mi="HV",wi="HE",xi="HF",Oi="TV",$i="TH",ji="TF",Ti="PF",ki="AE",Ei="AV",Si="AF",Ci="F",Pi="FV",Ni="FE",Fi="FF",Wi="l",Hi="VC",Di="VD",Ii="EC",Li="ED",Mi="FC",Ai="FD",Ri="HC",_i="HD",Bi="t",Ui="he",Vi="v",Yi="e",Xi="f",zi="n",Gi="p",Ki="b",qi=new WeakMap,Ji=function(t){return qi.get(t)},Qi=function(t){return t[Yi]},Zi=function(t,e,n,r,i,o,a){Object(Te["a"])(c,t);var s=Object(ke["a"])(c);function c(t,e,n,r){var i;return Object(A["a"])(this,c),i=s.call(this,t,e),qi.set(t,Object(De["a"])(i)),i.$=t,i[Qr]=f.createVertex(n,r),i[Yr](),i}return Object(R["a"])(c,[{key:e,value:function(){var t=this[Br];t[ii].add(this),t[si].set(this[Qr],this)}},{key:n,value:function(){this[Qr]=null}},{key:r,value:function(){return f.getVertexHalfEdgeList(this[Qr]).map(this[Br][$i])}},{key:i,value:function(){return this[ti]().map(Qi)}},{key:o,value:function(){var t,e=new Set,n=Object(Zt["a"])(f.Iterator.allHalfEdgeOfVertex(this[Qr]));try{for(n.s();!(t=n.n()).done;){var r=t.value;e.add(r.incidentFace)}}catch(i){n.e(i)}finally{n.f()}return Array.from(e).map(this[Br][ji])}},{key:a,value:function(t,e){this[Qr].x=t,this[Qr].y=e}}]),c}(qr,zr,Xr,ti,ei,Zr,ni),to=function(t){return t.$},eo=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t,r,i){var o;return Object(A["a"])(this,n),o=e.call(this),new Zi(Object(De["a"])(o),t,r,i),Object.seal(Object(De["a"])(o)),o}return Object(R["a"])(n,[{key:"x",get:function(){return Ji(this)[Qr].x}},{key:"y",get:function(){return Ji(this)[Qr].y}},{key:"move",value:function(t,e){return U["g"].Not.Number(t)&&U["b"].Throw.TypeError("Vertex.x MUST be a number."),U["g"].Not.Number(e)&&U["b"].Throw.TypeError("Vertex.y MUST be a number."),Ji(this)[ni](t,e),this}},{key:"getFaceList",value:function(){return Ji(this)[Zr]().map(to)}},{key:"getHalfEdgeList",value:function(){return Ji(this)[ti]().map(to)}},{key:"getEdgeList",value:function(){return Ji(this)[ei]().map(to)}}]),n}(Jr),no="if",ro="af",io="iv",oo="av",ao="ih",so="ah",co=new WeakMap,uo=function(t){return co.get(t)},lo=function(t,e,n,r,i,o,a,s){Object(Te["a"])(u,t);var c=Object(ke["a"])(u);function u(t,e,n){var r;return Object(A["a"])(this,u),r=c.call(this,t,e),co.set(t,Object(De["a"])(r)),r.$=t,r[ao]=n,n[Yi]=n[Ki][Yi]=Object(De["a"])(r),r[Yr](),r}return Object(R["a"])(u,[{key:e,value:function(){this[Br][ri].add(this)}},{key:n,value:function(){this[ao]=null}},{key:r,get:function(){return this[ao][Xi]}},{key:i,get:function(){return this[so][Xi]}},{key:o,get:function(){return this[ao][Vi]}},{key:a,get:function(){return this[so][Vi]}},{key:s,get:function(){return this[ao][Ki]}}]),u}(qr,zr,Xr,no,ro,io,oo,so),ho=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t,r){var i;return Object(A["a"])(this,n),i=e.call(this),new lo(Object(De["a"])(i),t,r),Object.freeze(Object(De["a"])(i)),i}return Object(R["a"])(n,[{key:"thisFace",get:function(){return uo(this)[no].$}},{key:"thatFace",get:function(){return uo(this)[ro].$}},{key:"thisVertex",get:function(){return uo(this)[io].$}},{key:"thatVertex",get:function(){return uo(this)[oo].$}},{key:"thisHalfEdge",get:function(){return uo(this)[ao].$}},{key:"thatHalfEdge",get:function(){return uo(this)[so].$}}]),n}(Jr),fo="f",vo="H",po="C",go="O",yo="P",bo=new WeakMap,mo=function(t){return bo.get(t)},wo=function(t,e,n,r,i,o,a){Object(Te["a"])(c,t);var s=Object(ke["a"])(c);function c(t,e,n){var r;return Object(A["a"])(this,c),r=s.call(this,t,e),bo.set(t,Object(De["a"])(r)),r.$=t,r[fo]=n,r}return Object(R["a"])(c,[{key:e,value:function(){var t=this[Br];t[oi].add(this),t[ci].set(this[fo],this)}},{key:n,value:function(){this[fo]=null}},{key:r,value:function(){return f.getPathOfHalfEdge(this[fo].outerComponent)}},{key:i,value:function(){return this[vo]().map(this[Br][$i])}},{key:o,value:function(){return f.queryChildFaceList(this[fo]).map(this[Br][ji])}},{key:a,value:function(t,e){var n=f.getPolygonFromFaceOuter(this[fo]);return u.containsPoint(n,{x:t,y:e})}}]),c}(qr,zr,Xr,vo,go,po,yo),xo=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t,r){var i;return Object(A["a"])(this,n),i=e.call(this),new wo(Object(De["a"])(i),t,r),Object.freeze(Object(De["a"])(i)),i}return Object(R["a"])(n,[{key:"getChildFaceList",value:function(){return mo(this)[po]().map(to)}},{key:"getOuterHalfEdgeList",value:function(){return mo(this)[go]().map(to)}},{key:"containsPoint",value:function(t,e){return mo(this)[yo](t,e)}}]),n}(Jr),Oo=function(t){return new xo(t,f.createGlobalFace())},$o=new WeakMap,jo=function(t){return $o.get(t)},To=function(t,e,n,r,i,o,a,s,c){Object(Te["a"])(l,t);var u=Object(ke["a"])(l);function l(t,e,n){var r;return Object(A["a"])(this,l),r=u.call(this,t,e),$o.set(t,Object(De["a"])(r)),r.$=t,r[Ui]=n,r[Yi]=null,r[zr](),r}return Object(R["a"])(l,[{key:e,value:function(){this[Br][ui].set(this[Ui],this)}},{key:n,value:function(){this[Ui]=null,this[Yi]=null}},{key:r,get:function(){return this[Ui].twin}},{key:i,get:function(){return this[Br][Oi](this[Ui].origin)}},{key:o,get:function(){return this[Br][ji](this[Ui].incidentFace)}},{key:a,get:function(){return this[Br][$i](this[Ui].next)}},{key:s,get:function(){return this[Br][$i](this[Ui].previous)}},{key:c,get:function(){return this[Br][$i](this[Bi])}}]),l}(qr,zr,Xr,Bi,Vi,Xi,zi,Gi,Ki),ko=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(t,r){var i;return Object(A["a"])(this,n),i=e.call(this),new To(Object(De["a"])(i),t,r),Object.freeze(Object(De["a"])(i)),i}return Object(R["a"])(n,[{key:"vertex",get:function(){return jo(this)[Vi].$}},{key:"edge",get:function(){return jo(this)[Yi].$}},{key:"face",get:function(){return jo(this)[Xi].$}},{key:"next",get:function(){return jo(this)[zi].$}},{key:"previous",get:function(){return jo(this)[Gi].$}},{key:"back",get:function(){return jo(this)[Ki].$}}]),n}(Jr),Eo=new WeakMap,So=function(t){return Eo.get(t)},Co=function(t,e,n,r,i,o,a,s,c,u,l,h,d,v,p,g,y,b,m,w){function x(t){var e;Object(A["a"])(this,x),Eo.set(t,this),this.$=t,this[ri]=new Set,this[ii]=new Set;var n=this[si]=new Map,r=this[ai]=mo(Oo(this));this[oi]=new Set;var i=this[ci]=new Map,o=this[ui]=new Map;this[$i]=function(t){return o.get(t)};var a=r[fo];this[ji]=function(t){return a===t?r:i.get(t)},this[Oi]=function(t){return n.get(t)},this[Wi]=(e={},Object(_["a"])(e,Hi,U["d"]),Object(_["a"])(e,Di,U["d"]),Object(_["a"])(e,Ii,U["d"]),Object(_["a"])(e,Li,U["d"]),Object(_["a"])(e,Mi,U["d"]),Object(_["a"])(e,Ai,U["d"]),Object(_["a"])(e,Ri,U["d"]),Object(_["a"])(e,_i,U["d"]),e)}return Object(R["a"])(x,[{key:t,value:function(t,e){var n=new eo(this,t,e);return this[Wi][Hi](n),n}},{key:e,value:function(t,e,n){t[ni](e,n)}},{key:n,value:function(t,e){var n=this[ai][fo],r=t[Qr],i=e[Qr],o=Fr(r,i,n),a=o.twin,s=o.incidentFace,c=a.incidentFace;if(s!==c){var u=this[ji](s)?c:s,l=new xo(this,u);mo(l)[Yr](),this[Wi][Mi](l)}var h=new ko(this,o),f=new ko(this,a),d=new ho(this,jo(h));return this[Wi][Ri](h),this[Wi][Ri](f),this[Wi][Ii](d),d}},{key:r,value:function(t,e){var n=f.splitHalfEdgeByVertex(t[ao][Ui],e[Qr]),r=t[ao][Bi],i=new ko(this,n),o=new ko(this,r),a=new ho(this,jo(i));return t[so][Yi]=t,this[Wi][Ri](i),this[Wi][Ri](o),this[Wi][Ii](a),a}},{key:i,value:function(t){var e=t[Qr],n=f.getVertexHalfEdgeList(e);2!==n.length&&U["b"].throwError("The MeshHalfEdge number of this MeshVertex is NOT 2.");var r=this[$i](e.incidentEdge.twin.next)[Yi],i=this[$i](e.incidentEdge)[Yi],o=this[$i](Ar(e));o[Ki][Yi]=i,i[ao]=o,r[ao]=n[0];var a,s=Object(Zt["a"])(n);try{for(s.s();!(a=s.n()).done;){var c=a.value;this[$i](c)[Yi]=r}}catch(u){s.e(u)}finally{s.f()}return this[Ni](),this[si].delete(t[Qr]),this[ii].delete(t),this[Wi][Di](t.$),i}},{key:o,value:function(t){var e=t[ao],n=e[Ui],r=_r(n);return this[Ci](),this[Oi](r)}},{key:a,value:function(t){Mr(t[Qr]),this[Ni](),this[Fi]()}},{key:s,value:function(t){this[gi](t),t[Vr](),this[si].delete(t[Qr]),this[ii].delete(t),this[Wi][Di](t.$)}},{key:c,value:function(t){Lr(t[ao][Ui]),this[Ci]()}},{key:u,value:function(t){return this[ii].has(t)}},{key:l,value:function(t){return this[ri].has(t)}},{key:h,value:function(t){return this[oi].has(t)}},{key:d,value:function(){return Array.from(this[ri])}},{key:v,value:function(){return Array.from(this[oi])}},{key:p,value:function(){return Array.from(this[ii])}},{key:g,value:function(t,e){var n=this[ai],r=n[fo],i=f.getFaceOfPoint(r,{x:t,y:e});return i===r?n:this[ji](i)}},{key:y,value:function(){this[Pi](),this[Ni](),this[Fi]()}},{key:b,value:function(){var t,e=this[si],n=this[ii],r=[],i=Object(Zt["a"])(e);try{for(i.s();!(t=i.n()).done;){var o=Object(gt["a"])(t.value,2),a=o[0],s=o[1];U["g"].isNull(a.incidentEdge)&&(n.delete(s),s[Vr](),r.push(a),this[Wi][Di](s.$))}}catch(h){i.e(h)}finally{i.f()}for(var c=0,u=r;c<u.length;c++){var l=u[c];e.delete(l)}}},{key:m,value:function(){var t,e=this[ui],n=this[ri],r=[],i=new Set,o=Object(Zt["a"])(e);try{for(o.s();!(t=o.n()).done;){var a=Object(gt["a"])(t.value,2),s=a[0],c=a[1];if(U["g"].isNull(s.twin)){var u=c[Yi];n.delete(u),u[Vr](),c[Vr](),r.push(s),i.add(u),this[Wi][_i](c.$)}}}catch(g){o.e(g)}finally{o.f()}for(var l=0,h=r;l<h.length;l++){var f=h[l];e.delete(f)}var d,v=Object(Zt["a"])(i);try{for(v.s();!(d=v.n()).done;){var p=d.value;this[Wi][Li](p.$)}}catch(g){v.e(g)}finally{v.f()}}},{key:w,value:function(){var t,e=this[ci],n=this[oi],r=[],i=Object(Zt["a"])(e);try{for(i.s();!(t=i.n()).done;){var o=Object(gt["a"])(t.value,2),a=o[0],s=o[1];U["g"].isNull(a.outerComponent)&&(n.delete(s),s[Vr](),r.push(a),this[Wi][Ai](s.$))}}catch(h){i.e(h)}finally{i.f()}for(var c=0,u=r;c<u.length;c++){var l=u[c];e.delete(l)}}}]),x}(li,hi,fi,di,vi,pi,gi,yi,bi,mi,wi,xi,ki,Si,Ei,Ti,Ci,Pi,Ni,Fi),Po=function(){function t(){Object(A["a"])(this,t),new Co(this),U["e"].seal(this)}return Object(R["a"])(t,[{key:"globalFace",get:function(){return So(this)[ai].$}},{key:"createVertex",value:function(t,e){return U["g"].Not.Number(t)&&U["b"].throwError("The `x` MUST be a number."),U["g"].Not.Number(e)&&U["b"].throwError("The `y` MUST be a number."),So(this)[li](t,e)}},{key:"moveVertex",value:function(t,e,n){U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),U["g"].Not.Number(e)&&U["b"].Throw.TypeError("Vertex.x MUST be a number."),U["g"].Not.Number(n)&&U["b"].Throw.TypeError("Vertex.y MUST be a number.");var r=So(this),i=Ji(t);return r[mi](i)||U["b"].throwError("The `vertex` does NOT belong to this mesh."),r[hi](i,e,n)}},{key:"link",value:function(t,e){U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `thisVertex` MUST be a MeshVertex."),U["b"].instanceOf(e,eo)||U["b"].Throw.TypeError("The `thatVertex` MUST be a MeshVertex.");var n=So(this),r=Ji(t),i=Ji(e);return n[mi](r)||U["b"].throwError("The `thisVertex` does NOT belong to this mesh."),n[mi](i)||U["b"].throwError("The `thatVertex` does NOT belong to this mesh."),n[fi](r,i)}},{key:"split",value:function(t,e){U["b"].instanceOf(t,ho)||U["b"].Throw.TypeError("The `edge` MUST be a MeshEdge."),U["b"].instanceOf(e,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var n=So(this),r=uo(t),i=Ji(e);return n[wi](r)||U["b"].throwError("The `edge` does NOT belong to this mesh."),n[mi](i)||U["b"].throwError("The `vertex` does NOT belong to this mesh."),n[di](r,i)}},{key:"merge",value:function(t){U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=So(this)[vi](Ji(t));return U["g"].isNull(e)?null:e.$}},{key:"combine",value:function(t){U["b"].instanceOf(t,ho)||U["b"].Throw.TypeError("The `edge` MUST be a MeshEdge.");var e=So(this)[pi](uo(t));return U["g"].isUndefined(e)?null:e.$}},{key:"clearVertex",value:function(t){U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=So(this),n=Ji(t);e[mi](n)||U["b"].throwError("The `vertex` does NOT belong to this mesh."),e[gi](n)}},{key:"removeVertex",value:function(t){U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex.");var e=So(this),n=Ji(t);e[mi](n)||U["b"].throwError("The `vertex` does NOT belong to this mesh."),e[yi](n)}},{key:"removeEdge",value:function(t){U["b"].instanceOf(t,ho)||U["b"].Throw.TypeError("The `edge` MUST be a MeshEdge.");var e=So(this),n=uo(t);e[wi](n)||U["b"].throwError("The `edge` does NOT belong to this mesh."),e[bi](n)}},{key:"getAllVertexList",value:function(){return So(this)[Ei]().map(to)}},{key:"getAllEdgeList",value:function(){return So(this)[ki]().map(to)}},{key:"getAllFaceList",value:function(){return So(this)[Si]().map(to)}},{key:"hasVertex",value:function(t){return U["b"].instanceOf(t,eo)||U["b"].Throw.TypeError("The `vertex` MUST be a MeshVertex."),So(this)[mi](Ji(t))}},{key:"hasEdge",value:function(t){return U["b"].instanceOf(t,ho)||U["b"].Throw.TypeError("The `edge` MUST be a MeshEdge."),So(this)[wi](uo(t))}},{key:"hasFace",value:function(t){return U["b"].instanceOf(t,xo)||U["b"].Throw.TypeError("The `face` MUST be a MeshFace."),So(this)[xi](mo(t))}},{key:"getFaceOfPoint",value:function(t,e){return U["g"].Not.Number(t)&&U["b"].Throw.TypeError("The `x` MUST be a number."),U["g"].Not.Number(e)&&U["b"].Throw.TypeError("The `y` MUST be a number."),So(this)[Ti](t,e).$}},{key:"flush",value:function(){So(this)[Ci]()}},{key:"flushVertex",value:function(){So(this)[Pi]()}}]),t}(),No=function(){var t=Object(gt["a"])(Wo[Fo],2),e=t[0],n=t[1];U["e"].defineProperty(Po.prototype,e,{get:function(){return So(this)[Wi][n]},set:function(t){U["g"].Not.Function(t)&&U["b"].Throw.TypeError("listener MUST be a function."),So(this)[Wi][n]=t}})},Fo=0,Wo=[["onVertexCreate",Hi],["onVertexDestroy",Di],["onEdgeCreate",Ii],["onEdgeDestroy",Li],["onFaceCreate",Mi],["onFaceDestroy",Ai],["onHalfEdgeCreate",Ri],["onHalfEdgeDestroy",_i]];Fo<Wo.length;Fo++)No();function Ho(){return{mesh:new Po,vertexToCorner:new Map,edgeToWall:new Map,faceToRoom:new Map,halfEdgeToSurface:new Map}}var Do=w.define({options:Er,data:Ho,proxy:g.Proxy.Creator(Or),created:function(){var t=this,e=this.$data,n=e.mesh,r=e.vertexToCorner,i=e.edgeToWall,o=e.halfEdgeToSurface,s=e.faceToRoom;n.onFaceCreate=function(e){return t.$createElement("Room",e)},n.onEdgeCreate=function(e){return t.$createElement("Wall",e)},n.onVertexCreate=function(e){return t.$createElement("Corner",e)},n.onHalfEdgeCreate=function(e){return t.$createElement("Surface",e)},n.onFaceDestroy=function(t){s.get(t).$destroy(),s.delete(t)},n.onVertexDestroy=function(t){r.get(t).$destroy(),r.delete(t)},n.onEdgeDestroy=function(t){i.get(t).$destroy(),i.delete(t)},n.onHalfEdgeDestroy=function(t){o.get(t).$destroy(),o.delete(t)},this.$on("element-created",(function(e,n){t.$emit("".concat(n.toLowerCase(),"-created"),e)}));var c=this.$options.snap;this.$drawing.registerSnap({name:"structure-corner",get priority(){return c.corner.priority},get active(){return c.corner.active},handle:function(e,n,i){var o,s=Object(Zt["a"])(r);try{for(s.s();!(o=s.n()).done;){var u=Object(gt["a"])(o.value,1),l=u[0],h=t.$toCanvas(l.x,l.y),f=a.distanceToPoint.apply(a,[e,n].concat(Object(B["a"])(h)));if(f<c.corner.maxDistance)return i.apply(void 0,Object(B["a"])(h))}}catch(d){s.e(d)}finally{s.f()}}})},methods:{assertNoCornerAt:function(t,e){this.queryCorner(t,e)&&U["b"].throwError("It could NOT create a new `Corner` in same place")},createCorner:function(t,e){this.assertNoCornerAt(t,e);var n=this.$data,r=n.mesh,i=n.vertexToCorner;return i.get(r.createVertex(t,e))},removeCorner:function(t){return t.remove()},createWall:function(t,e){var n=this.$data,r=n.mesh,i=n.edgeToWall;return i.get(r.link(t.vertex,e.vertex))},removeWall:function(t){t.remove()},split:function(t,e,n){this.assertNoCornerAt(e,n);var r=t.thisSurface.corner,i=t.thatSurface.corner,o=this.$data,a=o.mesh,s=o.edgeToWall,c=this.createCorner(e,n),u=a.split(t.$state.edge,c.vertex);return r.updateSurface(),i.updateSurface(),s.get(u)},merge:function(t){var e=this.$data,n=e.mesh,r=e.edgeToWall,i=n.merge(t.$state.vertex),o=r.get(i);return o.thisSurface.corner.updateSurface(),o.thatSurface.corner.updateSurface(),o},combine:function(t){var e=this.$data,n=e.mesh,r=e.vertexToCorner,i=n.combine(t.$state.edge),o=r.get(i);return o.updateAllSiblingSurface(),o},queryCorner:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=Object(Zt["a"])(this.$data.vertexToCorner);try{for(o.s();!(n=o.n()).done;){var a=Object(gt["a"])(n.value,2),s=a[0],c=a[1],u=i.fromTwoPoint(s.x,s.y,t,e);if(i.getLength.apply(i,Object(B["a"])(u))<r)return c}}catch(l){o.e(l)}finally{o.f()}return null},queryWall:function(t,e){},getRoomOfPoint:function(t,e){var n=this.$data,r=n.mesh,i=n.faceToRoom;return i.get(r.getFaceOfPoint(t,e))}}}),Io=function(t,e,n,r,o){var a=i.fromTwoPoint(t,e,n,r),s=i.normalize.apply(i,Object(B["a"])(a)),c=i.rotate90.apply(i,Object(B["a"])(s)),u=i.multiply.apply(i,Object(B["a"])(c).concat([o]));return i.clone(u)},Lo=function(t){return[t.x,t.y]},Mo=function(t){return t.back.vertex},Ao=function(t){return t.updateSurface()};function Ro(t){return this.get(t)}var _o=w.Element.define({proxy:g.Proxy.Creator(mr),groupIndex:1e3,interative:!0,hoverable:!0,render:function(t){var e=this.$plugin.$options.corner.style,n=e.color,r=e.opacity,i=e.radius,o=this.$state.vertex,a=o.x,s=o.y,c=this.$toCanvas(a,s),u=Object(gt["a"])(c,2),l=u[0],h=u[1];t.beginFill(n,r).drawCircle(0,0,i).endFill(),t.x=l,t.y=h},created:function(t){this.$data.vertexToCorner.set(this.$state.vertex=t,this)},state:function(){return{vertex:null}},getters:{x:function(){return this.vertex.x},y:function(){return this.vertex.y},vertex:function(){return this.$state.vertex},length:function(){return 2}},methods:{move:function(t,e){var n=this.$plugin.queryCorner(t,e);U["g"].Not.Null(n)&&n!==this&&U["b"].throwError("It could NOT move the Corner to the same <".concat(t,", ").concat(e,"> place.")),this.$state.vertex.move(t,e),this.updateAllSiblingSurface(),this.$setDirty()},remove:function(){var t=this.$state.vertex,e=this.$data,n=e.mesh,r=e.vertexToCorner,i=t.getHalfEdgeList().map(Mo).map(Ro,r);n.removeVertex(t);var o,a=Object(Zt["a"])(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateSurface()}}catch(c){a.e(c)}finally{a.f()}return this},getAdjacentCornerList:function(){return this.$state.vertex.getHalfEdgeList().map(Mo).map(Ro,this.$data.vertexToCorner)},updateAllSiblingSurface:function(){this.getAdjacentCornerList().concat([this]).forEach(Ao)},updateSurface:function(){var t=this.$data,e=t.edgeToWall,n=t.halfEdgeToSurface,r=this.$state.vertex,s=r.getHalfEdgeList(),u=s.length;for(var l in s){var h=s[(l+u-1)%u],f=s[l],d=e.get(h.edge),v=e.get(f.edge),p=f.vertex,g=f.next,y=f.previous,b=Lo(y.vertex),m=Lo(p),w=Lo(g.vertex),x=Io.apply(void 0,Object(B["a"])(b).concat(Object(B["a"])(m),[d.$state.thickness/2])),O=Io.apply(void 0,Object(B["a"])(m).concat(Object(B["a"])(w),[v.$state.thickness/2])),$=i.clone(a.translate.apply(a,Object(B["a"])(m).concat(Object(B["a"])(x)))),j=i.clone(a.translate.apply(a,Object(B["a"])(m).concat(Object(B["a"])(O)))),T=[].concat(Object(B["a"])(a.translate.apply(a,Object(B["a"])(b).concat(Object(B["a"])(x)))),Object(B["a"])($)),k=[].concat(Object(B["a"])(j),Object(B["a"])(a.translate.apply(a,Object(B["a"])(w).concat(Object(B["a"])(O))))),E=c.intersectSegment.apply(c,Object(B["a"])(T).concat(Object(B["a"])(k))),S=n.get(f),C=n.get(y);if(U["g"].isNull(E)){var P=o.intersectLine.apply(o,Object(B["a"])($).concat(Object(B["a"])(x),Object(B["a"])(j),Object(B["a"])(O)));U["g"].isNull(P)?(C.setTarget.apply(C,Object(B["a"])($)),S.setOrigin.apply(S,Object(B["a"])(j))):(C.setTarget.apply(C,Object(B["a"])(P)),S.setOrigin.apply(S,Object(B["a"])(P)))}else C.setTarget.apply(C,Object(B["a"])(E)),S.setOrigin.apply(S,Object(B["a"])(E));v.$setDirty()}}}},Do),Bo=w.Element.define({proxy:g.Proxy.Creator(xr),groupIndex:900,interative:!0,selectable:!0,hoverable:!0,render:function(t){var e,n,r,i=this.$plugin.$options.wall,o=i.midline,a=i.style,s=a.color,c=a.hoverColor,u=this.$state.edge,l=u.thisVertex,h=u.thatVertex,f=[l.x,l.y],d=[h.x,h.y],v=this.thisSurface,p=this.thatSurface;((e=t.beginFill(this.$hovering?c:s)).drawPolygon.apply(e,Object(B["a"])(this.$toCanvas.apply(this,f)).concat(Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(v.origin))),Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(v.target))),Object(B["a"])(this.$toCanvas.apply(this,d)),Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(p.origin))),Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(p.target))))).endFill(),o.show)&&(n=(r=t.lineStyle(o.width,o.color)).moveTo.apply(r,Object(B["a"])(this.$toCanvas.apply(this,f)))).lineTo.apply(n,Object(B["a"])(this.$toCanvas.apply(this,d)))},created:function(t){var e=this,n=t.thisVertex,r=t.thatVertex,i=this.$data,o=i.edgeToWall,a=i.vertexToCorner;o.set(this.$state.edge=t,this),a.get(n).updateSurface(),a.get(r).updateSurface(),this.$on("dirty",(function(){var t=e.thisSurface,n=e.thatSurface,r=t.room,i=n.room;U["g"].Not.Null(r)&&r.$setDirty(),U["g"].Not.Null(i)&&i.$setDirty(),t.emitChange(),n.emitChange()}))},state:function(){return{type:0,thickness:300,edge:null}},getters:{thisSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thisHalfEdge)},thatSurface:function(){return this.$data.halfEdgeToSurface.get(this.$state.edge.thatHalfEdge)}},methods:{setThickness:function(t){this.$state.thickness=t,this.thisSurface.corner.updateSurface(),this.thatSurface.corner.updateSurface(),this.$setDirty()},remove:function(){var t=this.thisSurface.corner,e=this.thatSurface.corner;return this.$data.mesh.removeEdge(this.$state.edge),t.updateSurface(),e.updateSurface(),this.$proxy}}},Do),Uo=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"back",get:function(){return yr(this).back.$proxy}},{key:"previous",get:function(){return yr(this).previous.$proxy}},{key:"next",get:function(){return yr(this).next.$proxy}},{key:"corner",get:function(){return yr(this).corner.$proxy}},{key:"wall",get:function(){return yr(this).wall.$proxy}},{key:"room",get:function(){return yr(this).room.$proxy}},{key:"origin",get:function(){return yr(this).origin}},{key:"target",get:function(){return yr(this).target}},{key:"originSafe",get:function(){return this.origin.slice(0)}},{key:"targetSafe",get:function(){return this.target.slice(0)}}]),n}(g.Proxy.Element),Vo=function(t,e,n){n[0]=t,n[1]=e},Yo=w.Element.define({proxy:g.Proxy.Creator(Uo),groupIndex:920,state:function(){return{halfEdge:null,origin:[0,0],target:[0,0]}},render:function(t){var e,n,r,i=this.$state,o=i.origin,a=i.target;(e=(n=(r=t.lineStyle(1.5,2236962)).moveTo.apply(r,Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(o))))).lineTo.apply(n,Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(a))))).lineTo.apply(e,Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(this.next.origin))))},created:function(t){this.$data.halfEdgeToSurface.set(this.$state.halfEdge=t,this)},getters:{next:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.next)},previous:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.previous)},back:function(){return this.$data.halfEdgeToSurface.get(this.$state.halfEdge.back)},corner:function(){return this.$data.vertexToCorner.get(this.$state.halfEdge.vertex)},wall:function(){return this.$data.edgeToWall.get(this.$state.halfEdge.edge)},room:function(){var t=this.$state.halfEdge.face,e=this.$data.faceToRoom.get(t);return U["g"].isUndefined(e)?null:e},origin:function(){return this.$state.origin},target:function(){return this.$state.target}},methods:{setOrigin:function(t,e){return Vo(t,e,this.$state.origin),this.$setDirty(),this},setTarget:function(t,e){return Vo(t,e,this.$state.target),this.$setDirty(),this},emitChange:function(){this.$emit("change")}}},Do),Xo=n("7580"),zo=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"area",get:function(){return 0}},{key:"bounds",get:function(){return yr(this).$getBounds()}},{key:"setFloor",value:function(t){return yr(this).setFloor(t)}},{key:"getOuterSurfaceList",value:function(){return yr(this).getOuterSurfaceList()}}]),n}(g.Proxy.Element),Go=Me;function Ko(t){return this.get(t)}var qo=w.Element.define({proxy:g.Proxy.Creator(zo),groupIndex:800,interative:!0,selectable:!0,hoverable:!0,render:function(t){var e,n=[],r=this.$drawing,i=r.origin,o=r.scale,a=this.$state.face.getOuterHalfEdgeList().map(Ko,this.$data.halfEdgeToSurface),s=Object(Zt["a"])(a);try{for(s.s();!(e=s.n()).done;){var c=e.value;n.push.apply(n,Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(c.origin))).concat(Object(B["a"])(this.$toCanvas.apply(this,Object(B["a"])(c.target)))))}}catch(u){s.e(u)}finally{s.f()}this.$plugin.$options.room.show&&(this.$state.floor&&t.beginTextureFill({texture:this.$state.floor,matrix:Object(Ae["a"])(Go.Matrix,[5/o,0,0,5/o].concat(Object(B["a"])(i)))}),t.drawPolygon(n).endFill())},state:function(){return{face:null,floor:null}},created:function(t){this.$data.faceToRoom.set(this.$state.face=t,this)},methods:{setFloor:function(t){var e=this;return Object(Xo["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Go.Texture.fromURL(t);case 2:e.$state.floor=n.sent,e.$setDirty();case 4:case"end":return n.stop()}}),n)})))()},getOuterSurfaceList:function(){var t=this.$data.halfEdgeToSurface,e=this.$state.face;return e.getOuterHalfEdgeList().map((function(e){return t.get(e).$proxy}))}}},Do),Jo="com.3dnest.spoke.structure",Qo="structure",Zo=x.define({id:Jo,namespace:Qo,version:br["a"],plugin:Do,elements:{Corner:_o,Wall:Bo,Surface:Yo,Room:qo}}),ta=n("e2a8"),ea=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"createHollow",value:function(t,e,n){return yr(this).createHollow(t,e,n)}}]),n}(g.Proxy.Plugin),na=w.define({proxy:g.Proxy.Creator(ea),methods:{createHollow:function(t,e,n){return this.$createElement("Hollow",t,e,n)}}}),ra={},ia=function(t,e){U["g"].Not.String(t)&&U["b"].Throw.TypeError("Invalid `name`, a string expected."),U["g"].Not.Function(e.render)&&U["b"].Throw.TypeError("Invalid `material`, a function expected."),t in ra&&U["a"].warn('Duplicated material name="'.concat(t,'". The original is replaced.')),ra[t]=e},oa=function(t){return ra[t]},aa=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"name",get:function(){return yr(this).name}},{key:"surface",get:function(){return yr(this).surface}},{key:"width",get:function(){return yr(this).width}},{key:"offset",get:function(){return yr(this).offset}},{key:"materialName",get:function(){return yr(this).materialName}},{key:"flip",value:function(){yr(this).flip()}},{key:"toggleSurface",value:function(){yr(this).toggleSurface()}},{key:"setSurface",value:function(t){yr(this).setSurface(t)}},{key:"setMaterial",value:function(t){yr(this).setMaterial(t)}},{key:"setOffset",value:function(t){yr(this).setOffset(t)}},{key:"setWidth",value:function(t){yr(this).setWidth(t)}},{key:"remove",value:function(){yr(this).remove()}}]),n}(g.Proxy.Element),sa=w.Element.define({groupIndex:1100,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{name:"Hollow",surface:null,offset:0,materialName:"",fliped:!1,width:0,listener:U["d"]}},getters:{name:function(){return this.$state.name},surface:function(){return this.$state.surface},width:function(){return this.$state.width},offset:function(){return this.$state.offset},materialName:function(){return this.$state.materialName}},created:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.$state.listener=function(){return n.$setDirty()},this.setMaterial(t),this.setSurface(e),this.setOffset(r),this.setWidth(oa(t).width)},destroy:function(){var t=this.$state.surface;t.off&&t.off("change",this.$state.listener)},render:function(t){var e=this.$state,n=e.surface,r=e.width,o=e.fliped,s=e.offset,c=e.materialName,u=this.$drawing.scale,l=n.corner,h=n.back.corner,f={width:r/u,height:n.wall.thickness/u,fliped:o,scale:u,hover:this.$hovering,focus:this.$focusing,hold:this.$holding};oa(c).render(t,f);var d=this.$toCanvas(l.x,l.y),v=this.$toCanvas(h.x,h.y),p=i.normalize.apply(i,Object(B["a"])(i.fromTwoPoint.apply(i,Object(B["a"])(d).concat(Object(B["a"])(v))))),g=Object(gt["a"])(p,2),y=g[0],b=g[1],m=a.translate.apply(a,Object(B["a"])(d).concat(Object(B["a"])(i.multiply(y,b,s/u)))),w=Object(gt["a"])(m,2);t.x=w[0],t.y=w[1],t.rotation=U["c"].atan2(b,y)},methods:{flip:function(){this.$state.fliped=!this.$state.fliped,this.$setDirty()},toggleSurface:function(){var t=this.$state.surface.corner,e=this.$state.surface.back.corner,n=i.getLength.apply(i,Object(B["a"])(i.fromTwoPoint(t.x,t.y,e.x,e.y)));this.setOffset(n-this.$state.offset),this.setSurface(this.$state.surface.back)},setSurface:function(t){var e=this.$state.surface;e&&e.off&&this.$state.surface.off("change",this.$state.listener),t&&t.on&&t.on("change",this.$state.listener),this.$state.surface=t,this.$setDirty()},setMaterial:function(t){this.$state.materialName=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},remove:function(){this.$destroy()}},proxy:function(){return new aa(this)}},na),ca=x.define({id:"com.3dnest.spoke.wall",namespace:"wall",version:ta["a"],plugin:na,elements:{Hollow:sa}}),ua=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"createFurniture",value:function(t,e,n,r,i){return yr(this).createFurniture(t,e,n,r,i)}}]),n}(g.Proxy.Plugin),la=w.define({proxy:g.Proxy.Creator(ua),methods:{createFurniture:function(t,e,n,r,i){return this.$createElement("Furniture",t,e,n,r,i).$proxy}}}),ha=(n("cb29"),{}),fa=function(t,e){U["g"].Not.String(t)&&U["b"].Throw.TypeError("Invalid `name`, a string expected."),U["g"].Not.Function(e)&&U["b"].Throw.TypeError("Invalid `material`, a function expected."),t in ha&&U["a"].warn('Duplicated material name="'.concat(t,'". The original is replaced.')),ha[t]=e},da=function(){var t=Object(Xo["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Me.Texture.fromURL(n);case 2:r=t.sent,fa(e,(function(t,e){var n=e.width,i=e.height,o=n>0?n:r.width,a=i>0?i:r.height;t.beginTextureFill({texture:r,matrix:new Me.Matrix(o/r.width,0,0,a/r.height,0,0)}).drawRect(0,0,o,a)}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),va=function(t){return t in ha||U["a"].warn('material name="'.concat(t,'" is not exist.')),ha[t]},pa=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"width",get:function(){return yr(this).width}},{key:"height",get:function(){return yr(this).height}},{key:"rotation",get:function(){return yr(this).rotation}},{key:"x",get:function(){return yr(this).x}},{key:"y",get:function(){return yr(this).y}},{key:"room",get:function(){return yr(this).room}},{key:"setFill",value:function(t){yr(this).setFill(t)}},{key:"setRoom",value:function(t){yr(this).setRoom(t)}},{key:"setWidth",value:function(t){yr(this).setWidth(t)}},{key:"setHeight",value:function(t){yr(this).setHeight(t)}},{key:"setOffset",value:function(t,e){yr(this).setOffet(t,e)}},{key:"setRotation",value:function(t){yr(this).setRotation(t)}},{key:"setPosition",value:function(t,e){yr(this).setPosition(t,e)}},{key:"remove",value:function(){yr(this).remove()}}]),n}(g.Proxy.Element),ga=w.Element.define({proxy:g.Proxy.Creator(pa),groupIndex:1200,interative:!0,focusable:!0,draggable:!0,state:function(){return{fill:"",width:0,height:0,room:null,offsetX:0,offsetY:0,x:0,y:0,rotation:0,listener:U["d"]}},getters:{width:function(){return this.$state.width},height:function(){return this.$state.height},rotation:function(){return this.$state.rotation},x:function(){return this.$state.x},y:function(){return this.$state.y},room:function(){return this.$state.room}},created:function(t,e,n,r,i){this.setWidth(t),this.setHeight(e),this.setFill(i),this.setPosition(n,r)},destroy:function(){var t=this.$state.room;t&&t.off&&t.off("dirty",this.$state.listener)},render:function(t){var e=this.$state,n=e.width,r=e.height,i=e.rotation,o=e.fill,a=this.$drawing.scale,s={width:n/a,height:r/a};t.drawRect(0,0,s.width,s.height),t.pivot.x=s.width/2,t.pivot.y=s.height/2;var c=va(o);c&&c(t,s);var u=this.$toCanvas(this.$state.x,this.$state.y),l=Object(gt["a"])(u,2);t.x=l[0],t.y=l[1],t.rotation=i},methods:{setFill:function(t){this.$state.fill=t,this.$setDirty()},setRoom:function(t){var e=this;t!==this.$state.room&&(t?(this.$state.room=t,t.on("dirty",this.$state.listener=function(){return e.$setDirty()}),this.$setDirty()):this.$state.room=null)},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},setPosition:function(t,e){var n=this.$state.room,r=n?this.$toGeometry(n.bounds.left,n.bounds.bottom):[0,0],i=Object(gt["a"])(r,2),o=i[0],a=i[1];this.$state.x=t,this.$state.y=e,this.$state.offsetX=t-o,this.$state.offsetY=e-a,this.$setDirty()},setOffset:function(t,e){var n=this.$state.room,r=n?this.$toGeometry(n.bounds.left,n.bounds.bottom):[0,0],i=Object(gt["a"])(r,2),o=i[0],a=i[1];this.$state.offsetX=t,this.$state.offsetY=e;var s=[o+t,a+e];this.$state.x=s[0],this.$state.y=s[1],this.$setDirty()},remove:function(){this.$destroy()}}},la),ya=n("a55c"),ba=x.define({id:"com.3dnest.spoke.room",namespace:"room",version:ya["a"],plugin:la,elements:{Furniture:ga}}),ma=n("0aa2"),wa=g.Options.define,xa=wa({enabled:!0},{rectangular:wa({enabled:!0,referenceUnit:50},{style:wa({color:255,lineWidth:1}),snap:wa({enabled:!0})})}),Oa=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(g.Proxy.Plugin),$a=w.define({options:xa,proxy:g.Proxy.Creator(Oa),data:function(){return{layerList:[]}},created:function(){var t=this.$createElement("RectangularGrid");this.$data.layerList.push(t)}}),ja=(n("6b93"),n("7db0"),[5,2,1]),Ta=function(t,e,n){return t.moveTo(0,e).lineTo(n,e)},ka=function(t,e,n){return t.moveTo(e,0).lineTo(e,n)},Ea=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(g.Proxy.Element),Sa=w.Element.define({proxy:g.Proxy.Creator(Ea),groupIndex:0,render:function(t){var e=this.$plugin.$options,n=e.rectangular.style,r=this.$drawing,i=r.width,o=r.height,a=r.scale,s=r.origin,c=Object(gt["a"])(s,2),u=c[0],l=c[1],h=this.getUnitInMM(),f=function(t){return h*t/a};t.lineStyle(n.lineWidth,n.color,1,0);var d=0,v=0;for(d=1;(v=f(d))<u;d++)ka(t,U["c"].round(u-v),o);for(d=1;(v=f(d))<i-u;d++)ka(t,U["c"].round(u+v),o);for(d=1;(v=f(d))<l;d++)Ta(t,U["c"].round(l-v),i);for(d=1;(v=f(d))<o-l;d++)Ta(t,U["c"].round(l+v),i);t.lineStyle(1,16711680,1,0).moveTo(0,l).lineTo(i,l).moveTo(u,0).lineTo(u,o)},created:function(){var t=this,e=this.$plugin.$options;this.$drawing.registerSnap({name:"grid-point",priority:-1/0,get active(){return e.enabled&&e.rectangular.enabled&&e.rectangular.snap.enabled},handle:function(e,n,r){var i=t.getUnitInMM(),o=t.$toGeometry(e,n),a=o.map(Ca,i),s=t.$toCanvas.apply(t,Object(B["a"])(a));r.apply(void 0,Object(B["a"])(s))}})},methods:{getUnitInMM:function(){var t=this.$plugin.$options.rectangular.referenceUnit,e=t*this.$drawing.scale,n=U["c"].pow(10,U["c"].floor(U["c"].log10(e)));return ja.find(Pa,U["c"].round(e/n))*n}}},$a);function Ca(t){return U["c"].round(t/this)*this}function Pa(t){return this>=t}var Na,Fa,Wa=4,Ha=w.Element.define({groupIndex:1e4,created:function(){var t=this;this.$drawing.on("snap",(function(){return t.$setDirty()}))},render:function(t){t.lineStyle(1,13421772).moveTo(-Wa,-Wa).lineTo(Wa,Wa).moveTo(Wa,-Wa).lineTo(-Wa,Wa);var e=Object(gt["a"])(this.$drawing.virtual,2);t.x=e[0],t.y=e[1]}},$a),Da=x.define({id:"com.3dnest.spoke.grid",namespace:"grid",version:ma["a"],plugin:$a,elements:{RectangularGrid:Sa,Crosshair:Ha}}),Ia=n("3d04"),La=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"WallBuilder",get:function(){return yr(this).$data.builder}},{key:"Mover",get:function(){return yr(this).$data.mover}},{key:"Spliter",get:function(){return yr(this).$data.spliter}}]),n}(g.Proxy.Plugin),Ma=g.Options.define,Aa=Ma({},{spliter:Ma({},{interaction:Ma({distance:50})})}),Ra=w.define({options:Aa,proxy:g.Proxy.Creator(La),data:function(){return{builder:null,mover:null,spliter:null}},created:function(){U["e"].assign(this.$data,{builder:this.$createTool("Builder"),mover:this.$createTool("Mover"),spliter:this.$createTool("Spliter")})}}),_a=5,Ba=65280,Ua=w.Element.define({groupIndex:1200,state:function(){var t=[0,0],e=[0,0];return{from:t,to:e,picking:t}},render:function(t){var e,n=this.$state,r=n.from,i=n.to,o=n.picking;if(o===r)(e=t.beginFill(Ba)).drawCircle.apply(e,Object(B["a"])(r).concat([_a]));else if(o===i){var a,s,c,u;(a=(s=(c=(u=t.lineStyle(20,10066329,1,.5)).moveTo.apply(u,Object(B["a"])(r))).lineTo.apply(c,Object(B["a"])(i)).lineStyle(0).beginFill(Ba)).drawCircle.apply(s,Object(B["a"])(r).concat([_a]))).drawCircle.apply(a,Object(B["a"])(i).concat([_a]))}},created:function(){var t=this;this.$hide(),this.$drawing.on("pointermove",(function(e){var n=t.$state,r=n.picking,i=n.from,o=n.to,a=e.virtualX,s=e.virtualY;t.$visible&&(r===i?(i[0]=o[0]=a,i[1]=o[1]=s):(o[0]=a,o[1]=s),t.$setDirty())}))},methods:{pickFrom:function(){this.$state.picking=this.$state.from,this.$setDirty()},pickTo:function(){this.$state.picking=this.$state.to,this.$setDirty()}}},Ra),Va=w.Element.define({groupIndex:1150,interative:!0,state:function(){return{point:[0,0],adjacentList:[]}},created:function(){var t=this;this.$hide(),this.$on("pointerdown",(function(e){e.stopPropagation();var n=function(e){t.$state.point=[e.virtualX,e.virtualY],t.$setDirty()},r=function e(){t.$drawing.off("pointermove",n),Ie["a"].removeEventListener(Ie["c"].WINDOW,"mouseup",e),t.$emit("stop")};t.$drawing.on("pointermove",n),Ie["a"].addEventListener(Ie["c"].WINDOW,"mouseup",r),t.$emit("start")}))},render:function(t){var e,n=this.$state,r=n.adjacentList,i=n.point,o=this.$drawing.structure.options.corner.style.radius;(e=t.beginFill(0)).drawCircle.apply(e,Object(B["a"])(i).concat([o])).lineStyle(2,0);var a,s=Object(Zt["a"])(r);try{for(s.s();!(a=s.n()).done;){var c,u,l,h=a.value,f=this.$toCanvas.apply(this,Object(B["a"])(h));(c=(u=(l=t.beginFill(16777215)).drawCircle.apply(l,Object(B["a"])(f).concat([o]))).moveTo.apply(u,Object(B["a"])(f))).lineTo.apply(c,Object(B["a"])(i))}}catch(d){s.e(d)}finally{s.f()}},methods:{setPointer:function(t){this.$state.point=t,this.$setDirty()},setAdjacentList:function(t){this.$state.adjacentList=t,this.$setDirty()}}},Ra),Ya=w.Element.define({groupIndex:1210,state:function(){return{breakpoint:[0,0],segment:[0,0,0,0]}},render:function(t){var e,n=this.$state,r=n.segment,i=n.breakpoint,o=Object(gt["a"])(r,4),a=o[0],s=o[1],c=o[2],u=o[3];(e=t.lineStyle(1,0).moveTo(a,s).lineTo(c,u)).drawCircle.apply(e,Object(B["a"])(i).concat([5]))},created:function(){this.$hide()},methods:{setBreakpoint:function(t){this.$state.breakpoint=t,this.$setDirty()},setSegment:function(t){this.$state.segment=t,this.$setDirty()}}},Ra),Xa=w.Tool.READY,za=Symbol("PickupFrom"),Ga=Symbol("PickupTo"),Ka={PICKUP_FROM:za,PICKUP_TO:Ga},qa=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"setThickness",value:function(){}},{key:"setAlignment",value:function(){}}]),n}(g.Proxy.ToolProvider(["build","pick","drop"])),Ja=w.Tool.define((Na={},Object(_["a"])(Na,za,(function(){this.$data.indicator.$show(),this.$data.indicator.pickFrom()})),Object(_["a"])(Na,Ga,(function(){this.$data.indicator.pickTo()})),Object(_["a"])(Na,Xa,(function(){this.$data.indicator.pickFrom(),this.$data.indicator.$hide()})),Na),{build:[Ga,function(){var t,e=this.$data,n=e.indicator,r=e.from,i=(t=this.$plugin).$toGeometry.apply(t,Object(B["a"])(n.$state.to)),o=this.$plugin.$drawing.structure,a=this.queryOrCreateCorner.apply(this,Object(B["a"])(r)),s=this.queryOrCreateCorner.apply(this,Object(B["a"])(i));o.createWall(a,s),this.$emit("end"),this.$emit("build")},Xa],pick:[[Xa,U["d"],za],[za,function(){var t,e=this.$data.indicator;this.$data.from=(t=this.$plugin).$toGeometry.apply(t,Object(B["a"])(e.$state.from))},Ga]],drop:[[Ga,U["d"],za],[za,U["d"],Xa],[Xa,U["d"],Xa]]},{proxy:g.Proxy.Creator(qa),data:function(t){var e=t.$createElement("WallBuilder");return{indicator:e,thickness:200,from:[0,0]}},reset:function(){this.$data.indicator.close(),this.$emit("end")},methods:{queryOrCreateCorner:function(t,e){var n=this.$plugin.$drawing.structure,r=n.queryCorner(t,e,Qa);return r||n.createCorner(t,e)}}}),Qa=10,Za=w.Tool.READY,ts=Symbol("MoverWaiting"),es=Symbol("MoverActive"),ns=Symbol("MoverBusy"),rs=function(t){return U["b"].instanceOf(t,mr)},is=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"setCorner",value:function(t){rs(t)&&U["b"].Throw.TypeError("Invalid corner, a Strucure.CornerProxy expected."),yr(this).setCorner(t)}}]),n}(g.Proxy.ToolProvider(["open","close"])),os=w.Tool.define((Fa={},Object(_["a"])(Fa,es,(function(){this.$data.indicator.$show()})),Object(_["a"])(Fa,ts,(function(){this.$data.indicator.$hide(),this.$data.corner=null})),Fa),{open:[[Za,U["d"],ts],[ts,U["d"],ts]],close:[[ts,U["d"],Za],[Za,U["d"],Za]],capture:[ts,function(){var t=this.$data,e=t.indicator,n=t.corner,r=n.getAdjacentCornerList().map(as);e.setPointer(this.$plugin.$toCanvas(n.x,n.y)),e.setAdjacentList(r)},es],release:[es,U["d"],ts],start:[es,U["d"],ns],move:[ns,function(){var t,e=this.$data,n=e.indicator,r=e.corner;r.move.apply(r,Object(B["a"])((t=this.$plugin).$toGeometry.apply(t,Object(B["a"])(n.$state.point))))},ts]},{proxy:g.Proxy.Creator(is),data:function(t){var e=this,n=t.$createElement("CornerAdjuster"),r={corner:null,indicator:n};return n.$on("start",(function(){return e.start()})).$on("stop",(function(){return e.move()})),this.$plugin.$drawing.structure.on("corner-created",(function(t){t.on("pointerover",(function(){e.$state===ts&&(e.$data.corner=t,e.capture())}))})),n.$on("pointerout",(function(){e.$state===es&&e.release()})),r},reset:function(){this.$data.indicator.$hide(),this.$data.corner=null}}),as=function(t){return[t.x,t.y]},ss=w.Tool.READY,cs=Symbol("SpliterDetecting"),us=Symbol("SpliterDetected"),ls=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(g.Proxy.ToolProvider(["open","close"])),hs=w.Tool.define(Object(_["a"])({},us,{entry:function(){this.$data.indicator.$show()},leave:function(){this.$data.indicator.$hide()}}),{open:[ss,U["d"],cs],found:[[cs,U["d"],us],[us,U["d"],us]],lost:[[us,U["d"],cs],[cs,U["d"],cs]],close:[[cs,U["d"],ss],[us,U["d"],ss]]},{proxy:g.Proxy.Creator(ls),data:function(t){var e=this,n=t.$createElement("WallSpliter"),r=t.$options,i=t.$drawing,s=i.structure,c=Date.now(),u=null,l=[0,0];return i.on("pointermove",(function(t){if(e.$state!==ss){var i=Date.now();if(!(i-c<15)){c=i;var h,f=t.pointerX,d=t.pointerY,v=[f,d],p=Object(Zt["a"])(s.getAllWallList());try{for(p.s();!(h=p.n()).done;){var g=h.value,y=g.thisSurface.corner,b=g.thatSurface.corner,m=[].concat(Object(B["a"])(e.$plugin.$toCanvas(y.x,y.y)),Object(B["a"])(e.$plugin.$toCanvas(b.x,b.y))),w=a.distanceToSegment.apply(a,v.concat(Object(B["a"])(m)));if(w<r.spliter.interaction.distance)return l=a.project.apply(a,v.concat(Object(B["a"])(o.fromSegment.apply(o,Object(B["a"])(m))))),u=g,n.setBreakpoint(l),n.setSegment(m),void e.found()}}catch(x){p.e(x)}finally{p.f()}e.lost()}}})).on("pointerup",(function(){var t;e.$state===us&&s.split.apply(s,[u].concat(Object(B["a"])((t=e.$plugin).$toGeometry.apply(t,Object(B["a"])(l)))))})),{indicator:n}},reset:function(){this.close()}}),fs=x.define({id:"com.3dnest.spoke.tool.structure",namespace:"structureTool",version:Ia["a"],plugin:Ra,elements:{WallBuilder:Ua,WallSpliter:Ya,CornerAdjuster:Va},tools:{Builder:Ja,Mover:os,Spliter:hs}}),ds=n("7970"),vs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"addAdapter",value:function(t,e){return yr(this).addAdapter(t,e)}},{key:"activate",value:function(t){return yr(this).activate(t)}},{key:"deactivate",value:function(){return yr(this).deactivate()}}]),n}(g.Proxy.Plugin),ps=w.define({proxy:g.Proxy.Creator(vs),data:function(){return{element:null,transformer:null,adapterRegistry:new Map}},created:function(){var t=this,e=this.$drawing;this.$data.transformer=this.$createTool("TransformerTool"),e.on("pointerup",(function(){var n=e.focusing;n?t.activate(n):t.deactivate()}))},methods:{addAdapter:function(t,e){this.$data.adapterRegistry.set(t,e)},activate:function(t){var e=this.$data.adapterRegistry.get(t.constructor);e?(this.$data.element=t,this.$data.transformer.activate()):this.deactivate()},deactivate:function(){this.$data.element=null,this.$data.transformer.deactivate()}}}),gs=function(t,e,n,r,i,s){return a.project.apply(a,[i,s].concat(Object(B["a"])(o.fromSegment(t,e,n,r))))},ys=function(t,e,n,r,o,a){var s=gs(t,e,n,r,o,a);return i.getLength.apply(i,Object(B["a"])(i.fromTwoPoint.apply(i,[t,e].concat(Object(B["a"])(s)))))},bs=function(t,e,n,r,o){var s=i.normalize.apply(i,Object(B["a"])(i.fromTwoPoint(t,e,n,r))),c=Object(gt["a"])(s,2),u=c[0],l=c[1],h=a.translate.apply(a,[t,e].concat(Object(B["a"])(i.multiply(u,l,o)))),f=Object(gt["a"])(h,2),d=f[0],v=f[1];return[d,v]},ms=w.Element.define({groupIndex:1300,interative:!0,state:function(){return{xStatus:0,yStatus:0,active:!1,x:0,y:0,width:0,height:0,rotation:0}},created:function(t,e){var n=this;this.$state.xStatus=t,this.$state.yStatus=e,this.$on("pointerdown",(function(t){t.stopPropagation(),n.beginAdjust()}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.xStatus,r=e.yStatus,i=e.x,o=e.y,a=e.width,s=e.height,c=e.rotation,u=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawRect(-5,-5,10,10),t.pivot.x=-n*a/2/u,t.pivot.y=r*s/2/u;var l=this.$toCanvas(i,o),h=Object(gt["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=c}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},updateState:function(t,e,n,r,i){this.setPosition(t,e),this.setWidth(n),this.setHeight(r),this.setRotation(i)},beginAdjust:function(){var t=this,e=this.$data.element,n=this.$data.adapterRegistry.get(e.constructor),r=function(r){var i=t.$state,o=i.xStatus,s=i.yStatus,c=i.x,u=i.y,l=i.width,h=i.height,f=i.rotation,d=t.$toGeometry(r.pointerX,r.pointerY),v=c+o*l/2,p=u+s*h/2,g=a.rotate(v,p,-f,c,u),y=Object(gt["a"])(g,2),b=y[0],m=y[1],w=ys(c,u,b,m,b,m),x=ys.apply(void 0,[c,u,b,m].concat(Object(B["a"])(d))),O=a.rotate.apply(a,Object(B["a"])(bs(c,u,b,m,x)).concat([f,c,u])),$=Object(gt["a"])(O,2),j=$[0],T=$[1],k=o*(j-v),E=s*(T-p),S=l+k,C=h+E,P=bs(c,u,b,m,(x-w)/2),N=Object(gt["a"])(P,2),F=N[0],W=N[1];t.setWidth(S),t.setHeight(C),n.setWidth(e,S),n.setHeight(e,C),n.setPosition(e,F,W),t.$emit("update",{x:F,y:W,width:S,height:C,rotation:f})},i=function e(){t.$drawing.off("pointermove",r),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",r),window.addEventListener("mouseup",i)}}},ps),ws=30,xs=w.Element.define({groupIndex:1300,interative:!0,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.beginAdjust()}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,r=e.y,i=e.height,o=e.rotation,a=this.$drawing.scale;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).moveTo(0,5).lineTo(0,ws-5),t.pivot.x=0,t.pivot.y=i/a/2+ws;var s=this.$toCanvas(n,r),c=Object(gt["a"])(s,2);t.x=c[0],t.y=c[1],t.rotation=o}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},updateState:function(t,e,n,r,i){this.setPosition(t,e),this.setWidth(n),this.setHeight(r),this.setRotation(i)},beginAdjust:function(){var t=this,e=this.$data.element,n=this.$data.adapterRegistry.get(e.constructor),r=function(r){var o=t.$state,a=o.x,s=o.y,c=o.width,u=o.height,l=t.$toGeometry(r.pointerX,r.pointerY),h=Math.atan2.apply(Math,Object(B["a"])(i.fromTwoPoint.apply(i,[a,s].concat(Object(B["a"])(l)))));t.setRotation(h),n.setRotation(e,h),t.$emit("update",{x:a,y:s,width:c,height:u,rotation:h})},o=function e(){t.$drawing.off("pointermove",r),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",r),window.addEventListener("mouseup",o)}}},ps),Os=w.Element.define({groupIndex:1200,interative:!0,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0}},created:function(){var t=this;this.$on("pointerdown",(function(e){e.stopPropagation(),t.elementAdjust(e)}))},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,r=e.y,i=e.width,o=e.height,a=e.rotation,s=this.$drawing.scale,c=i/s,u=o/s;t.lineStyle(1,16711680).beginFill(4096759,.01).drawRect(-c/2,-u/2,c,u).endFill(),t.pivot.x=0,t.pivot.y=0;var l=this.$toCanvas(n,r),h=Object(gt["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=a}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},updateState:function(t,e,n,r,i){this.setPosition(t,e),this.setWidth(n),this.setHeight(r),this.setRotation(i)},elementAdjust:function(t){var e=this,n=this.$drawing,r=this.$data.element,i=this.$data.adapterRegistry.get(r.constructor),o=i.getPosition(r),a=Object(gt["a"])(o,2),s=a[0],c=a[1],u=i.getWidth(r),l=i.getHeight(r),h=i.getRotation(r),f=this.$state,d=f.width,v=f.height,p=f.rotation,g=t?this.$toGeometry(t.pointerX,t.pointerY):[s,c],y=g[0]-s,b=g[1]-c,m=!0,w=n.structure.getAllRoomList(),x=w.map((function(t){return t.getOuterSurfaceList().map((function(t){return t.origin}))})),O=w.map((function(t){return t.getOuterSurfaceList().map((function(t){return t.back.origin}))})),$=function(t){var n=e.$toGeometry(t.pointerX,t.pointerY),o=n[0]-y,a=n[1]-b,s=e.$drawing.structure.getRoomByPoint(o,a);if(e.setPosition(o,a),r.setRoom){if(e.$data.element&&x.length){var c=$s(e.$state.x,e.$state.y,u,l,h);m=js(c,x,O)}m&&(i.setPosition(r,o,a),r.setRoom(s),e.$emit("update",{x:o,y:a,width:d,height:v,rotation:p}))}else i.setPosition(r,o,a),e.$emit("update",{x:o,y:a,width:d,height:v,rotation:p})},j=function(){n.off("pointermove",$),window.removeEventListener("mouseup",T),window.removeEventListener("keydown",k)},T=function(){var t=e.$data.element;t&&e.setPosition.apply(e,Object(B["a"])(i.getPosition(t))),j()},k=function(t){"Escape"===t.code&&e.$data.creatingFurniture&&(e.$data.creatingFurniture.remove(),j())};n.on("pointermove",$),window.addEventListener("mouseup",T),window.addEventListener("keydown",k)}}},ps),$s=function(t,e,n,r,i){var o=[[t-n/2,e+r/2],[t+n/2,e+r/2],[t+n/2,e-r/2],[t-n/2,e-r/2]];return o.map((function(n){return a.rotate.apply(a,Object(B["a"])(n).concat([i,t,e])).slice(0)}))},js=function(t,e,n){var r=t.map((function(t){var r=e.find((function(e){return u.containsPoint(Ts(e),{x:t[0],y:t[1]})})),i=n.find((function(e){return u.containsPoint(Ts(e),{x:t[0],y:t[1]})}));return r||(i?"wall":"blank")}));return!r.find((function(t){return"wall"===t}))&&!r.some((function(t){return t!==r[0]}))},Ts=function(t){return t.map((function(t){return{x:t[0],y:t[1]}}))},ks=w.Element.define({groupIndex:1250,state:function(){return{active:!1,x:0,y:0,width:0,height:0,rotation:0}},render:function(t){if(this.$state.active){var e=this.$state,n=e.x,r=e.y,i=e.width,o=e.height,a=e.rotation,s=this.$drawing.scale,c=i/s,u=o/s;t.lineStyle(1,4096759).beginFill(16777215).drawCircle(0,0,5).endFill().beginFill(4096759,.2).drawRect(-c/2,-u/2,c,u).endFill(),t.pivot.x=0,t.pivot.y=0;var l=this.$toCanvas(n,r),h=Object(gt["a"])(l,2);t.x=h[0],t.y=h[1],t.rotation=a}},methods:{show:function(){this.$state.active=!0,this.$setDirty()},hide:function(){this.$state.active=!1,this.$setDirty()},updateState:function(t,e,n,r,i){this.$state.x=t,this.$state.y=e,this.$state.width=n,this.$state.height=r,this.$state.rotation=i,this.$setDirty()}}},ps),Es=w.Tool.READY,Ss=Symbol("Show"),Cs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(g.Proxy.ToolProvider(["activate","deactivate"])),Ps=[[-1,1],[0,1],[1,1],[-1,0],[1,0],[-1,-1],[0,-1],[1,-1]],Ns=w.Tool.define(Object(_["a"])({},Ss,(function(){this.updateState()})),{activate:[[Es,function(){var t,e=Object(Zt["a"])(this.$data.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.show()}}catch(r){e.e(r)}finally{e.f()}this.$data.rotater.show(),this.$data.previewer.show(),this.$data.outline.show()},Ss],[Ss,U["d"],Ss]],deactivate:[[Ss,function(){var t,e=Object(Zt["a"])(this.$data.handlers);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.hide()}}catch(r){e.e(r)}finally{e.f()}this.$data.rotater.hide(),this.$data.previewer.hide(),this.$data.outline.hide()},Es],[Es,U["d"],Es]]},{proxy:g.Proxy.Creator(Cs),data:function(t){var e=Ps.map((function(o){var a=t.$createElement.apply(t,["Handler"].concat(Object(B["a"])(o)));return a.$on("update",(function(t){var o,a=t.x,s=t.y,c=t.width,u=t.height,l=t.rotation,h=Object(Zt["a"])(e);try{for(h.s();!(o=h.n()).done;){var f=o.value;f.updateState(a,s,c,u,l)}}catch(d){h.e(d)}finally{h.f()}n.updateState(a,s,c,u,l),r.updateState(a,s,c,u,l),i.updateState(a,s,c,u,l)})),a})),n=t.$createElement("Rotater"),r=t.$createElement("Previewer"),i=t.$createElement("Outline");return n.$on("update",(function(t){var n,o=t.x,a=t.y,s=t.width,c=t.height,u=t.rotation,l=Object(Zt["a"])(e);try{for(l.s();!(n=l.n()).done;){var h=n.value;h.updateState(o,a,s,c,u)}}catch(f){l.e(f)}finally{l.f()}r.updateState(o,a,s,c,u),i.updateState(o,a,s,c,u)})),r.$on("update",(function(t){var r,o=t.x,a=t.y,s=t.width,c=t.height,u=t.rotation,l=Object(Zt["a"])(e);try{for(l.s();!(r=l.n()).done;){var h=r.value;h.updateState(o,a,s,c,u)}}catch(f){l.e(f)}finally{l.f()}n.updateState(o,a,s,c,u),i.updateState(o,a,s,c,u)})),{handlers:e,rotater:n,previewer:r,outline:i}},methods:{updateState:function(){var t,e=this.$plugin.$data.element,n=this.$plugin.$data.adapterRegistry.get(e.constructor),r=n.getPosition(e),i=Object(gt["a"])(r,2),o=i[0],a=i[1],s=n.getWidth(e),c=n.getHeight(e),u=n.getRotation(e),l=Object(Zt["a"])(this.$data.handlers);try{for(l.s();!(t=l.n()).done;){var h=t.value;h.updateState(o,a,s,c,u)}}catch(f){l.e(f)}finally{l.f()}this.$data.rotater.updateState(o,a,s,c,u),this.$data.previewer.updateState(o,a,s,c,u),this.$data.outline.updateState(o,a,s,c,u)}},reset:function(){}}),Fs=x.define({id:"com.3dnest.spoke.transformer",namespace:"transformer",version:ds["a"],plugin:ps,elements:{Handler:ms,Rotater:xs,Previewer:Os,Outline:ks},tools:{TransformerTool:Ns}}),Ws=n("c5c2"),Hs=50,Ds=function(t,e){var n=t.corner,r=t.back.corner,o=i.normalize.apply(i,Object(B["a"])(i.fromTwoPoint(n.x,n.y,r.x,r.y))),s=Object(gt["a"])(o,2),c=s[0],u=s[1],l=a.translate.apply(a,[n.x,n.y].concat(Object(B["a"])(i.multiply(c,u,e)))),h=Object(gt["a"])(l,2),f=h[0],d=h[1];return[f,d]},Is=function(t,e,n){var r=t.corner,i=t.back.corner;return a.project.apply(a,[e,n].concat(Object(B["a"])(o.fromSegment(r.x,r.y,i.x,i.y))))},Ls=function(t,e,n){var r=t.corner,o=Is(t,e,n);return i.getLength.apply(i,Object(B["a"])(i.fromTwoPoint.apply(i,[r.x,r.y].concat(Object(B["a"])(o)))))},Ms=function(t,e,n,r,o){var s=null,c=null,u=0;if(t.forEach((function(t){var r=Is(t.thisSurface,e,n),o=Object(gt["a"])(r,2),a=o[0],s=o[1],l=Math.min(t.thisSurface.corner.x,t.thatSurface.corner.x),h=Math.max(t.thisSurface.corner.x,t.thatSurface.corner.x),f=Math.min(t.thisSurface.corner.y,t.thatSurface.corner.y),d=Math.max(t.thisSurface.corner.y,t.thatSurface.corner.y);if(!(a<l||a>h||s<f||s>d)){var v=i.getLength.apply(i,Object(B["a"])(i.fromTwoPoint(e,n,a,s)));(!c||v<u)&&(c=t,u=v)}})),!c||u/r>Hs)o.corner.x=e,o.corner.y=n,o.back.corner.x=e+10,o.back.corner.y=n,s=o;else{var l=c.thisSurface,h=c.thatSurface;s=a.toLeftOfSegment(e,n,h.corner.x,h.corner.y,l.corner.x,l.corner.y)?h:l}return s},As=function(t,e,n){this.name="virtual",this.corner={x:t,y:e},this.back={corner:{x:t+10,y:e}},this.wall={thickness:n}},Rs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"activate",value:function(){return yr(this).activate()}},{key:"deactivate",value:function(){return yr(this).deactivate()}},{key:"createHollow",value:function(t){return yr(this).createHollow(t)}}]),n}(g.Proxy.Plugin),_s=w.define({created:function(){var t=this,e=this.$data.headHandler=this.$createElement("HeadHandler"),n=this.$data.rearHandler=this.$createElement("RearHandler");this.$drawing.wall.on("element-created",(function(r){t.bindHollow(r),r.on("focus",(function(e){t.$data.currentHollow=e.focusing,t.activate()})).on("blur",(function(r){var i=r.holding;i!==e.$proxy&&i!==n.$proxy&&t.deactivate()}))}))},data:function(){return{currentHollow:null,headHandler:null,rearHandler:null,virtualSurface:new As(0,0,200),creatingHollow:null}},methods:{activate:function(){this.$data.headHandler.show(),this.$data.rearHandler.show()},deactivate:function(){this.$data.currentHollow=null,this.$data.headHandler.hide(),this.$data.rearHandler.hide()},bindHollow:function(t){var e=this;t.on("pointerdown",(function(n){e.$data.creatingHollow||e.hollowAdjust(t,n)}))},hollowAdjust:function(t,e){var n=this,r=this.$drawing,i=e?Ls.apply(void 0,[t.surface].concat(Object(B["a"])(this.$toGeometry(e.pointerX,e.pointerY))))-t.offset:0,o=t.surface,a=t.offset,s=r.structure.getAllWallList(),c=function(e){var r=n.$toGeometry(e.pointerX,e.pointerY),o=Ms.apply(void 0,[s].concat(Object(B["a"])(r),[n.$drawing.scale,n.$data.virtualSurface]));if("virtual"===o.name)return t.setSurface(o),void t.setOffset(0);var a=Ls.apply(void 0,[o].concat(Object(B["a"])(r)))-i,c=Ls.apply(void 0,[o].concat(Object(B["a"])(o.originSafe))),u=Ls.apply(void 0,[o].concat(Object(B["a"])(o.targetSafe))),l=Ls.apply(void 0,[o].concat(Object(B["a"])(o.back.originSafe))),h=Ls.apply(void 0,[o].concat(Object(B["a"])(o.back.targetSafe))),f=Math.max(c,h)+t.width/2,d=Math.min(u,l)-t.width/2,v=a<f?f:a>d?d:a;t.setSurface(o),t.setOffset(v)},u=function(){r.off("pointermove",c),window.removeEventListener("mouseup",l),window.removeEventListener("keydown",h),n.$data.creatingHollow=null},l=function(){"virtual"!==t.surface.name||n.$data.creatingHollow||(t.setSurface(o),t.setOffset(a)),u()},h=function(t){"Escape"===t.code&&n.$data.creatingHollow&&(n.$data.creatingHollow.remove(),u())};r.on("pointermove",c),window.addEventListener("mouseup",l),window.addEventListener("keydown",h)},createHollow:function(t){var e=this.$data.virtualSurface;e.corner.x=1e5,e.back.corner.x=100001;var n=this.$data.creatingHollow=this.$drawing.wall.createHollow(t,e);return n.setOffset(-n.$state.width),this.hollowAdjust(n.$proxy),n}},proxy:function(){return new Rs(this)}}),Bs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"show",value:function(){return yr(this).show()}},{key:"hide",value:function(){return yr(this).hide()}}]),n}(g.Proxy.Element),Us=w.Element.define({groupIndex:1200,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,offset:0}},created:function(){var t=this;this.$on("pointerdown",(function(){return t.beginAdjust()})).$on("blur",(function(e){var n=t.$data,r=n.headHandler,i=n.rearHandler,o=e.focusing;o!==r.$proxy&&o!==i.$proxy&&t.$plugin.deactivate()}))},destroy:function(){},render:function(t){if(this.$data.currentHollow){var e=this.$state,n=e.surface,r=e.offset,i=this.$toCanvas.apply(this,Object(B["a"])(Ds(n,r))),o=Object(gt["a"])(i,2),a=o[0],s=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawCircle(a,s,5)}},methods:{show:function(){var t=this,e=this.$data.currentHollow;e.on("dirty",(function(n){n.holding!==e&&n.focusing!==e||t.hollowChange(e)})),this.hollowChange(e)},hide:function(){this.setSurface(null),this.setOffset(0)},hollowChange:function(t){var e=t.surface,n=t.offset,r=t.width;this.setSurface(e),this.setOffset(n-r/2)},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentHollow,n=e.offset,r=e.width,i=function(i){var o=t.$toGeometry(i.pointerX,i.pointerY),a=Ls.apply(void 0,[t.$state.surface].concat(Object(B["a"])(o))),s=n-r/2-a;t.setOffset(a),e.setWidth(r+s),e.setOffset(n-s/2)},o=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",o)}},proxy:function(){return new Bs(this)}},_s),Vs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"show",value:function(){return yr(this).show()}},{key:"hide",value:function(){return yr(this).hide()}}]),n}(g.Proxy.Element),Ys=w.Element.define({groupIndex:1200,interative:!0,hoverable:!0,focusable:!0,draggable:!0,state:function(){return{surface:null,offset:0}},created:function(){var t=this;this.$on("pointerdown",(function(){return t.beginAdjust()})).$on("blur",(function(e){var n=t.$data,r=n.headHandler,i=n.rearHandler,o=e.focusing;o!==r.$proxy&&o!==i.$proxy&&t.$plugin.deactivate()}))},destroy:function(){},render:function(t){if(this.$data.currentHollow){var e=this.$state,n=e.surface,r=e.offset,i=this.$toCanvas.apply(this,Object(B["a"])(Ds(n,r))),o=Object(gt["a"])(i,2),a=o[0],s=o[1];t.lineStyle(this.$hovering||this.$holding?2:1,this.$hovering||this.$holding?16777215:4096759).beginFill(4096759,.5).drawRect(a-5,s-5,10,10)}},methods:{show:function(){var t=this,e=this.$data.currentHollow;e.on("dirty",(function(n){n.holding!==e&&n.focusing!==e||t.hollowChange(e)})),this.hollowChange(e)},hide:function(){this.setSurface(null),this.setOffset(0)},hollowChange:function(t){var e=t.surface,n=t.offset,r=t.width;this.setSurface(e),this.setOffset(n+r/2)},setSurface:function(t){this.$state.surface=t,this.$setDirty()},setOffset:function(t){this.$state.offset=t,this.$setDirty()},beginAdjust:function(){var t=this,e=this.$data.currentHollow,n=e.offset,r=e.width,i=function(i){var o=t.$toGeometry(i.pointerX,i.pointerY),a=Ls.apply(void 0,[t.$state.surface].concat(Object(B["a"])(o))),s=a-n-r/2;t.setOffset(a),e.setWidth(r+s),e.setOffset(n+s/2)},o=function e(){t.$drawing.off("pointermove",i),window.removeEventListener("mouseup",e)};this.$drawing.on("pointermove",i),window.addEventListener("mouseup",o)}},proxy:function(){return new Vs(this)}},_s),Xs=x.define({id:"com.3dnest.spoke.hammer",namespace:"hammer",version:Ws["a"],plugin:_s,elements:{HeadHandler:Us,RearHandler:Ys}}),zs=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"createBitmap",value:function(t,e,n){return yr(this).createBitmap(t,e,n)}}]),n}(g.Proxy.Plugin),Gs=w.define({proxy:g.Proxy.Creator(zs),methods:{createBitmap:function(t,e,n){var r=this;return Object(Xo["a"])(regeneratorRuntime.mark((function i(){var o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Me.Texture.fromURL(t);case 2:return o=i.sent,a=r.$drawing.scale,i.abrupt("return",r.$createElement("Bitmap",o,e||o.width*a,n||o.height*a).$proxy);case 5:case"end":return i.stop()}}),i)})))()}}}),Ks=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n,[{key:"width",get:function(){return yr(this).width}},{key:"height",get:function(){return yr(this).height}},{key:"rotation",get:function(){return yr(this).rotation}},{key:"x",get:function(){return yr(this).x}},{key:"y",get:function(){return yr(this).y}},{key:"alpha",get:function(){return yr(this).alpha}},{key:"setWidth",value:function(t){yr(this).setWidth(t)}},{key:"setHeight",value:function(t){yr(this).setHeight(t)}},{key:"setRotation",value:function(t){yr(this).setRotation(t)}},{key:"setPosition",value:function(t,e){yr(this).setPosition(t,e)}},{key:"setAlpha",value:function(t){yr(this).setAlpha(t)}},{key:"remove",value:function(){yr(this).remove()}}]),n}(g.Proxy.Element),qs=Me,Js=w.Element.define({proxy:g.Proxy.Creator(Ks),groupIndex:-100,interative:!0,focusable:!0,draggable:!0,state:function(){return{name:"Bitmap",texture:null,width:0,height:0,x:0,y:0,rotation:0,alpha:1}},getters:{width:function(){return this.$state.width},height:function(){return this.$state.height},rotation:function(){return this.$state.rotation},x:function(){return this.$state.x},y:function(){return this.$state.y},alpha:function(){return this.$state.alpha}},created:function(t,e,n){this.setTexture(t),this.setWidth(e),this.setHeight(n)},destroy:function(){},render:function(t){var e=this.$state,n=e.texture,r=e.width,i=e.height,o=e.x,a=e.y,s=e.rotation,c=e.alpha,u=this.$drawing.scale,l=r/u,h=i/u,f=l>0?l:n.width,d=h>0?h:n.height;t.pivot.x=l/2,t.pivot.y=h/2,t.beginTextureFill({texture:n,alpha:c,matrix:new qs.Matrix(f/n.width,0,0,d/n.height,0,0)}).drawRect(0,0,f,d);var v=this.$toCanvas(o,a),p=Object(gt["a"])(v,2);t.x=p[0],t.y=p[1],t.rotation=s},methods:{setTexture:function(t){this.$state.texture=t,this.$setDirty()},setWidth:function(t){this.$state.width=t,this.$setDirty()},setHeight:function(t){this.$state.height=t,this.$setDirty()},setRotation:function(t){this.$state.rotation=t,this.$setDirty()},setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()},setAlpha:function(t){this.$state.alpha=t,this.$setDirty()},remove:function(){this.$destroy()}}},Gs),Qs=n("3d1c"),Zs=x.define({id:"com.3dnest.spoke.negative",namespace:"negative",version:Qs["a"],plugin:Gs,elements:{Bitmap:Js}}),tc=n("2c55"),ec=w.define({proxy:function(){var t=this;return{setPosition:function(e,n){t.setPosition(e,n)}}},data:function(){return{compass:null}},created:function(){this.$data.compass=this.$createElement("Element")},methods:{setPosition:function(t,e){this.$data.compass.setPosition(t,e)}}}),nc=w.Element.define({proxy:function(){},state:function(){return{x:100,y:100}},render:function(t){var e=this.$state,n=e.x,r=e.y;t.beginFill(16777215).drawCircle(n,r,40)},methods:{setPosition:function(t,e){this.$state.x=t,this.$state.y=e,this.$setDirty()}}}),rc=x.define({id:"com.3dnest.spoke.compass",namespace:"compass",version:tc["a"],plugin:ec,elements:{Element:nc}}),ic=function(t){t.canvasElement.addEventListener("contextmenu",Ie["b"].preventDefault)},oc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t.on("pointerdown",(function(n){if(n.button===e){var r=Object(gt["a"])(t.origin,2),i=r[0],o=r[1],a=n.pointerX,s=n.pointerY,c=function(e){var n=e.pointerX,r=e.pointerY;t.setOrigin(i+n-a,o+r-s)},u=function e(){t.off("pointermove",c),Ie["a"].removeEventListener(Ie["c"].WINDOW,"mouseup",e)};t.on("pointermove",c),Ie["a"].addEventListener(Ie["c"].WINDOW,"mouseup",u)}}))},ac=function(t){Ie["a"].addEventListener(t.canvasElement,"wheel",(function(e){e.deltaY>0?t.setScaleInMode(t.scale+1,1):t.setScaleInMode(t.scale-1,1)}))},sc=function(){},cc=function(){},uc=function(){},lc=function(){},hc=function(){},fc=function(){},dc=function(){},vc=Object(R["a"])((function t(){Object(A["a"])(this,t)})),pc=function(){var t=function(t){Object(Te["a"])(n,t);var e=Object(ke["a"])(n);function n(){return Object(A["a"])(this,n),e.apply(this,arguments)}return Object(R["a"])(n)}(vc);return t},gc=n("5821");[Zo,ca,ba,fs,Fs,Xs,Da,Zs,rc].forEach((function(t){return In(t)}));var yc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mb-0",attrs:{small:"",bordered:"","head-variant":"dark",items:t.items,fields:t.fieldList,hover:""}})],1)},bc=[],mc=(n("b680"),100),wc={name:"CoreState",props:["drawing"],data:function(){return{width:0,height:0,scale:0,origin:[0,0],pointer:[0,0],virtual:[0,0],geometry:[0,0]}},computed:{items:function(){return[{key:"width",value:this.width,unit:"px"},{key:"height",value:this.height,unit:"px"},{key:"scale",value:this.scale,unit:"mm/px"},{key:"originX",value:this.origin[0],unit:"px"},{key:"originY",value:this.origin[1],unit:"px"},{key:"pointerX",value:this.pointer[0].toFixed(2),unit:"px"},{key:"pointerY",value:this.pointer[1].toFixed(2),unit:"px"},{key:"virtualX",value:this.virtual[0].toFixed(2),unit:"px"},{key:"virtualY",value:this.virtual[1].toFixed(2),unit:"px"},{key:"geometryX",value:this.geometry[0].toFixed(2),unit:"mm"},{key:"geometryY",value:this.geometry[1].toFixed(2),unit:"mm"}]},fieldList:function(){return[{key:"key",label:"Key"},{key:"value",label:"Value",class:"col-short-number"},{key:"unit",label:"Unit",class:"col-tiny-string"}]}},mounted:function(){var t=this;this._interval=setInterval((function(){return t.flush()}),mc)},destroyed:function(){clearInterval(this._interval)},methods:{flush:function(){this.width=this.drawing.width,this.height=this.drawing.height,this.scale=this.drawing.scale,this.origin=this.drawing.origin,this.pointer=this.drawing.pointer,this.virtual=this.drawing.virtual}}},xc=wc,Oc=n("0c7c"),$c=Object(Oc["a"])(xc,yc,bc,!1,null,null,null),jc=$c.exports,Tc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.example()}}},[t._v("example")])],1)},kc=[],Ec=100,Sc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ec;return new Promise((function(e){return setTimeout(e,t)}))},Cc={name:"CoreTool",props:["drawing"],methods:{example:function(){var t=this;return Object(Xo["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o,a,s,c,u,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.drawing,r=n.structure.createCorner(-2e3,3e3),i=n.structure.createCorner(5e3,3e3),o=n.structure.createCorner(5e3,-1500),a=n.structure.createCorner(-2e3,-1500),s=n.structure.createWall(r,i),e.next=8,Sc();case 8:return c=n.structure.createWall(i,o),e.next=11,Sc();case 11:return u=n.structure.createWall(o,a),e.next=14,Sc();case 14:return l=n.structure.createWall(a,r),e.next=17,Sc();case 17:return n.setOrigin(500,500),e.next=20,Sc();case 20:return n.setScale(15),e.next=23,Sc();case 23:return n.wall.createHollow("singleDoor",s.thisSurface,1500),e.next=26,Sc();case 26:return n.wall.createHollow("boilerWindow",c.thisSurface,2e3),e.next=29,Sc();case 29:return n.wall.createHollow("singleDoor",u.thisSurface,1500),e.next=32,Sc();case 32:return n.wall.createHollow("basicWindow",l.thisSurface,1500),e.next=35,Sc();case 35:return h=window.room=s.thatSurface.room,n.room.createFurniture(2e3,2e3,2e3,1e3,"bed",h),e.next=39,Sc();case 39:case"end":return e.stop()}}),e)})))()}}},Pc=Cc,Nc=Object(Oc["a"])(Pc,Tc,kc,!1,null,null,null),Fc=Nc.exports,Wc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateGrid ")])},Hc=[],Dc={name:"PluginStateGrid"},Ic=Dc,Lc=Object(Oc["a"])(Ic,Wc,Hc,!1,null,null,null),Mc=Lc.exports,Ac=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateRoom ")])},Rc=[],_c={name:"PluginStateRoom"},Bc=_c,Uc=Object(Oc["a"])(Bc,Ac,Rc,!1,null,null,null),Vc=Uc.exports,Yc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateStructure ")])},Xc=[],zc={nameL:"PluginStateStructure"},Gc=zc,Kc=Object(Oc["a"])(Gc,Yc,Xc,!1,null,null,null),qc=Kc.exports,Jc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateStructureTool ")])},Qc=[],Zc={name:"PluginStateStructureTool"},tu=Zc,eu=Object(Oc["a"])(tu,Jc,Qc,!1,null,null,null),nu=eu.exports,ru=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateWall ")])},iu=[],ou={name:"PluginStateWall"},au=ou,su=Object(Oc["a"])(au,ru,iu,!1,null,null,null),cu=su.exports,uu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateHammer ")])},lu=[],hu={name:"PluginStateHammer"},fu=hu,du=Object(Oc["a"])(fu,uu,lu,!1,null,null,null),vu=du.exports,pu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(" PluginStateNegative ")])},gu=[],yu={name:"PluginStateNegative"},bu=yu,mu=Object(Oc["a"])(bu,pu,gu,!1,null,null,null),wu=mu.exports,xu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[t._v(" PluginToolGrid ")])},Ou=[],$u={name:"PluginToolGrid",props:["drawing"],data:function(){return{showing:!0}},methods:{toggle:function(){var t=this.drawing;this.showing=!this.showing,this.showing?t.grid.hide():t.grid.show()}}},ju=$u,Tu=Object(Oc["a"])(ju,xu,Ou,!1,null,null,null),ku=Tu.exports,Eu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap"},[n("b-form-select",{staticClass:"mr-1 w-100",attrs:{options:t.materialList},model:{value:t.selectedMaterial,callback:function(e){t.selectedMaterial=e},expression:"selectedMaterial"}}),n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"W"}},[n("b-form-input",{staticStyle:{width:"4em"},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}})],1),n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"H"}},[n("b-form-input",{staticStyle:{width:"4em"},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.createFurniture()}}},[t._v("New")])],1)],1)},Su=[],Cu=Math.PI,Pu=60,Nu=15,Fu=10,Wu={stateless:{line:0,arcLine:14145753,fill:16777215,windowFill:13421772},hover:{line:8053503,arcLine:15464441,fill:16777215,windowFill:13421772},select:{line:4096759,arcLine:15068665,fill:16777215,windowFill:13421772}},Hu=function(t){var e=t.hover,n=t.focus,r=t.select;return r||n?Wu.select:e?Wu.hover:Wu.stateless},Du={width:800,render:function(t,e){var n=e.width,r=e.height,i=e.fliped,o=e.scale,a=i?1:0,s=Nu/o,c=Pu/o,u=Hu(e);return t.lineStyle(s,u.arcLine).beginFill(u.fill,.1).arc(n*a,r/2,n,-Cu/2*a-Cu/2,-Cu*a/2).lineTo(n*a,r/2).lineTo(0,r/2-n+a*n).endFill().beginFill(u.fill).lineStyle(s,u.fill).drawRect(0,0,n,r).lineStyle(s,u.line).moveTo(0,0).lineTo(0,r).moveTo(n,0).lineTo(n,r).lineStyle(s,u.line).drawRect((n-c)*a,r/2,c,-n),t.pivot.x=n/2,t.pivot.y=r/2,t}},Iu={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=Nu/i,a=Pu/i,s=Hu(e);return t.lineStyle(o,s.arcLine).beginFill(s.fill,.1).arc(0,r/2,n/2,-Cu/2,0).lineTo(0,r/2).lineTo(0,(r-n)/2).endFill().beginFill(s.fill,.1).lineStyle(o,s.arcLine).arc(n,r/2,n/2,Cu,-Cu/2).lineTo(n,r/2).lineTo(n/2,r/2).endFill().beginFill(s.fill).lineStyle(o,s.fill).drawRect(0,0,n,r).lineStyle(o,s.line).moveTo(0,0).lineTo(0,r).moveTo(n,0).lineTo(n,r).drawRect(0,r/2,a,-n/2).drawRect(n,r/2,-a,-n/2),t.pivot.x=n/2,t.pivot.y=r/2,t}},Lu={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=e.fliped,a=o?-1:1,s=Nu/i,c=Fu/i,u=Hu(e);return t.lineStyle(s,u.line).beginFill(u.fill).drawRect(0,0,n,r).drawRect(0+s+c,r/2,2*n/3,r/4*a).drawRect(n-s-c,r/2,-2*n/3,-r/4*a),t.pivot.x=n/2,t.pivot.y=r/2,t}},Mu={width:1450,render:function(t,e){var n=e.width,r=e.height,i=e.fliped,o=e.scale,a=i?1:0,s=Nu/o,c=Hu(e);return t.lineStyle(s,c.line).beginFill(c.fill).drawRect(0,0,n,r).moveTo(0,r/3).lineTo(n,r/3).moveTo(0,2*r/3).lineTo(n,2*r/3).moveTo(n/4+a*n/2,r/3).lineTo(n/4+a*n/2,2*r/3).endFill(),t.pivot.x=n/2,t.pivot.y=r/2,t}},Au={width:2e3,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=Nu/i,a=Hu(e);return t.lineStyle(o,a.fill).beginFill(a.fill).drawRect(0,0,n,r).endFill().lineStyle(o,a.line).drawRect(0,0,n,r/3).drawRect(0,2*r/3,n,r/3),t.pivot.x=n/2,t.pivot.y=r/2,t}},Ru={width:800,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=Nu/i,a=Hu(e);return t.lineStyle(o,a.line).beginFill(a.fill).drawRect(0,0,n,r).moveTo(0,r/2).lineTo(n,r/2).endFill(),t.pivot.x=n/2,t.pivot.y=r/2,t}},_u={width:1500,render:function(t,e){var n=e.width,r=e.scale,i=e.sillThickness,o=void 0===i?500/r:i,a=e.height,s=Nu/r,c=a,u=Hu(e);return t.lineStyle(s,u.line).beginFill(u.windowFill).drawRect(0,-o,n,o).endFill().beginFill(u.fill).moveTo(0,-a).lineTo(0,-o).lineTo(n,-o).lineTo(n,-a).lineTo(n+c,-a).lineTo(n+c,-(o+c)).lineTo(-c,-(o+c)).lineTo(-c,-a).lineTo(0,-a).endFill().moveTo(-c/2,-a).lineTo(-c/2,-(o+c/2)).lineTo(n+c/2,-(o+c/2)).lineTo(n+c/2,-a),t.pivot.x=n/2,t.pivot.y=-a/2,t}},Bu={width:1500,render:function(t,e){var n=e.width,r=e.height,i=e.scale,o=Nu/i,a=Hu(e);return t.lineStyle(o,a.line).beginFill(a.fill).drawRect(0,0,n,r).endFill().moveTo(0,r/2).lineTo(n,r/2).moveTo(0,r/3).lineTo(n,r/3).moveTo(0,2*r/3).lineTo(n,2*r/3).moveTo(n/2,r/3).lineTo(n/2,2*r/3),t.pivot.x=n/2,t.pivot.y=r/2,t}},Uu={render:function(t,e){var n=e.leftWidth,r=e.rightWidth,i=e.leftWallThickness,o=e.rightWallThickness,a=e.scale,s=Nu/a,c=Hu(e);return t.lineStyle(s,c.line).beginFill(c.fill).moveTo(0,0).lineTo(r,0).lineTo(r,o).lineTo(i,o).lineTo(i,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(i/2,n).lineTo(i/2,o/2).lineTo(r,o/2),t.pivot.x=r/2,t.pivot.y=o/2,t}},Vu={render:function(t,e){var n=e.leftWidth,r=e.centerWidtn,i=e.rightWidth,o=e.leftWallThickness,a=e.centerWallThickness,s=e.rightWallThickness,c=e.scale,u=Nu/c,l=Hu(e);return t.lineStyle(u,l.line).beginFill(l.fill).moveTo(0,0).lineTo(r,0).lineTo(r,i).lineTo(r-s,i).lineTo(r-s,a).lineTo(o,a).lineTo(o,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(o/2,n).lineTo(o/2,a/2).lineTo(r-s/2,a/2).lineTo(r-s/2,i),t.pivot.x=r/2,t.pivot.y=a/2,t}},Yu={render:function(t,e){var n=e.leftWidth,r=e.rightWidth,i=e.leftWindowThickness,o=e.rightWindowThickness,a=e.leftWallThickness,s=e.rightWallThickness,c=e.scale,u=Nu/c,l=Hu(e);return t.lineStyle(u,l.line).beginFill(l.windowFill).moveTo(a,s).lineTo(r,s).lineTo(r,s-o).lineTo(a-i,s-o).lineTo(a-i,n).lineTo(a,n).lineTo(a,s).endFill().beginFill(l.fill).moveTo(a-i,s-o).lineTo(r,s-o).lineTo(r,0).lineTo(r+s,0).lineTo(r+s,-o).lineTo(-i,-o).lineTo(-i,n+a).lineTo(0,n+a).lineTo(0,n).lineTo(a-i,n).lineTo(a-i,s-o).endFill().moveTo(0,n+a/2).lineTo(a/2-i,n+a/2).lineTo(a/2-i,s/2-o).lineTo(r+s/2,s/2-o).lineTo(r+s/2,0),t.pivot.x=r/2,t.pivot.y=s/2,t}},Xu={render:function(t,e){var n=e.leftWidth,r=e.centerWidtn,i=e.rightWidth,o=e.leftWindowThinkness,a=e.centerWindowThinkness,s=e.rightWindowThinkness,c=e.leftWallThickness,u=e.centerWallThickness,l=e.rightWallThickness,h=e.scale,f=Nu/h,d=Hu(e);return t.lineStyle(f,d.line).beginFill(d.windowFill).moveTo(c,u).lineTo(r-l,u).lineTo(r-l,i).lineTo(r-l+s,i).lineTo(r-l+s,u-a).lineTo(c-o,u-a).lineTo(c-o,n).lineTo(c,n).lineTo(c,u).endFill().beginFill(d.fill).moveTo(c-o,u-a).lineTo(r+s-l,u-a).lineTo(r+s-l,i).lineTo(r,i).lineTo(r,i+l).lineTo(r+s,i+l).lineTo(r+s,-a).lineTo(-o,-a).lineTo(-o,n+c).lineTo(0,n+c).lineTo(0,n).lineTo(c-o,n).lineTo(c-o,u-a).endFill().moveTo(0,n+c/2).lineTo(c/2-o,n+c/2).lineTo(c/2-o,u/2-a).lineTo(r+s-l/2,u/2-a).lineTo(r+s-l/2,i+l/2).lineTo(r,i+l/2),t.pivot.x=r/2,t.pivot.y=u/2,t}},zu=[{text:"门",value:"singleDoor",content:F.SingleDoor},{text:"双开门",value:"doubleDoor",content:F.DoubleDoor},{text:"移门",value:"slidingDoor",content:F.SlidingDoor},{text:"子母门",value:"parentDoor",content:F.ParentDoor},{text:"垭口",value:"bealock",content:F.Bealock},{text:"窗",value:"basicWindow",content:W.BasicWindow},{text:"飘窗",value:"boilerWindow",content:W.BoilerWindow},{text:"落地窗",value:"floorWindow",content:W.FloorWindow}],Gu=[{text:"床",value:"bed",url:"https://qhyxpicoss.kujiale.com/r/2020/03/30/L4D1111ENDDVAXSVUGEJKFNNVCQD3WKVY8_199x225.png"},{text:"沙发",value:"sofa",url:"https://qhrenderpicoss.kujiale.com/r/2021/04/15/L4D1111ENDDV7Y72IBEJKVNWMVXL3WKVY8_303x104.png"}],Ku={name:"PluginToolRoom",props:["drawing"],data:function(){return{selectedMaterial:Gu[0].value,width:1e3,height:1e3}},computed:{materialList:function(){return Gu}},mounted:function(){this.init()},methods:{init:function(){var t,e=Object(Zt["a"])(Gu);try{for(e.s();!(t=e.n()).done;){var n=t.value;$.registerUrl(n.value,n.url)}}catch(r){e.e(r)}finally{e.f()}},createFurniture:function(){var t=this.drawing;t.room.createFurniture(this.width,this.height,0,0,this.selectedMaterial)}}},qu=Ku,Ju=Object(Oc["a"])(qu,Eu,Su,!1,null,null,null),Qu=Ju.exports,Zu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap mb-1"},[n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"F"}},[n("b-form-input",{model:{value:t.fromX,callback:function(e){t.fromX=e},expression:"fromX"}}),n("b-form-input",{model:{value:t.fromY,callback:function(e){t.fromY=e},expression:"fromY"}})],1),n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"T"}},[n("b-form-input",{model:{value:t.toX,callback:function(e){t.toX=e},expression:"toX"}}),n("b-form-input",{model:{value:t.toY,callback:function(e){t.toY=e},expression:"toY"}})],1),n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.createWall()}}},[t._v("New")])],1)],1)},tl=[],el={name:"PluginToolStructure",props:["drawing"],data:function(){return{fromX:0,fromY:0,toX:0,toY:0}},methods:{createWall:function(){var t=this.fromX,e=this.fromY,n=this.toX,r=this.toY;if(t!==n||e!==r){var i=this.drawing,o=i.structure.queryCorner(Number(t),Number(e))||i.structure.createCorner(Number(t),Number(e)),a=i.structure.queryCorner(Number(n),Number(r))||i.structure.createCorner(Number(n),Number(r));return i.structure.createWall(o,a)}console.log("from and to can not be same")}}},nl=el,rl=Object(Oc["a"])(nl,Zu,tl,!1,null,null,null),il=rl.exports,ol=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.createWall()}}},[t._v("Create Wall")]),n("b-form-radio-group",{attrs:{options:t.radiosOptionsList,buttons:"",stacked:"","button-variant":"outline-primary"},model:{value:t.enabled,callback:function(e){t.enabled=e},expression:"enabled"}})],1)},al=[],sl={WALL_BUILDER:0,WALL_SPLITER:1,CORNER_ADJUSTER:2},cl={name:"PluginToolStructureTool",props:["drawing"],data:function(){return{enabled:!1}},computed:{radiosOptionsList:function(){return[{text:"Idle",value:null},{text:"WallBuilder",value:sl.WALL_BUILDER},{text:"WallSpliter",value:sl.WALL_SPLITER},{text:"CornerAdjuster",value:sl.CORNER_ADJUSTER}]}},methods:{createWall:function(){!1===this.enabled?(this.enabled=!0,this.drawing.structureTool.WallBuilder.pick()):this.enabled=!1}},mounted:function(){var t=this,e=this.drawing,n=e.structureTool.WallBuilder;e.on("pointerdown",(function(e){if(2===e.button)return n.drop();t.enabled&&(n.$state===j.STATE.PICKUP_TO?n.build():n.pick())})),n.on("build",(function(){return n.pick()}))}},ul=cl,ll=Object(Oc["a"])(ul,ol,al,!1,null,null,null),hl=ll.exports,fl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hollow,expression:"hollow"}],staticClass:"mt-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap"},[n("b-form-select",{staticClass:"mr-1 w-100",attrs:{options:t.materialList},on:{change:t.changeHollowMaterial},model:{value:t.hollowInfo.materialName,callback:function(e){t.$set(t.hollowInfo,"materialName",e)},expression:"hollowInfo.materialName"}}),n("b-input-group",{staticClass:"mr-1 flex-nowrap",attrs:{prepend:"width"}},[n("b-form-input",{staticStyle:{width:"5em"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeHollowWidth.apply(null,arguments)}},model:{value:t.hollowInfo.width,callback:function(e){t.$set(t.hollowInfo,"width",e)},expression:"hollowInfo.width"}})],1),n("b-button",{staticClass:"mr-1 text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.flipHollow()}}},[t._v("flip")])],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.hollow,expression:"!hollow"}]},[t._v("No Focusing Hollow")])])},dl=[],vl=(n("9129"),100),pl={name:"CoreTool",props:["drawing"],data:function(){return{hollow:null,hollowInfo:{width:0,widthClone:0,materialName:""}}},computed:{materialList:function(){return zu}},mounted:function(){var t=this;this._interval=setInterval((function(){t.flush()}),vl)},destroyed:function(){clearInterval(this._interval)},methods:{flush:function(){this.drawing&&this.drawing.focusing&&"Hollow"===this.drawing.focusing.name?(this.hollow=this.drawing.focusing,this.initHollow()):this.hollow=null},initHollow:function(){var t=this.hollow,e=Math.round(t.width);e!==this.hollowInfo.widthClone&&(this.hollowInfo.width=e),this.hollowInfo.materialName=t.materialName,this.hollowInfo.widthClone=e},flipHollow:function(){this.hollow.flip()},changeHollowWidth:function(){var t=Number(this.hollowInfo.width);Number.isNaN(t)||this.hollow.setWidth(t)},changeHollowMaterial:function(){this.hollow.setMaterial(this.hollowInfo.materialName)}}},gl=pl,yl=Object(Oc["a"])(gl,fl,dl,!1,null,null,null),bl=yl.exports,ml=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap"},[n("b-form-select",{staticClass:"mr-1 w-100",attrs:{options:t.materialList},model:{value:t.selectedMaterial,callback:function(e){t.selectedMaterial=e},expression:"selectedMaterial"}}),n("b-button",{staticClass:"text-nowrap",attrs:{variant:"info"},on:{click:function(e){return t.createHollow()}}},[t._v("New")])],1)],1)},wl=[],xl={name:"PluginToolHammer",props:["drawing"],data:function(){return{selectedMaterial:zu[0].value}},computed:{materialList:function(){return zu}},mounted:function(){this.init()},methods:{init:function(){var t,e=Object(Zt["a"])(zu);try{for(e.s();!(t=e.n()).done;){var n=t.value;O.register(n.value,n.content)}}catch(r){e.e(r)}finally{e.f()}},createHollow:function(){var t=this.drawing;t.hammer.createHollow(this.selectedMaterial)}}},Ol=xl,$l=Object(Oc["a"])(Ol,ml,wl,!1,null,null,null),jl=$l.exports,Tl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-1"},[n("b-button-toolbar",{staticClass:"flex-nowrap mb-1"},[n("b-button",{staticClass:"text-nowrap mr-1",staticStyle:{"min-width":"50px"},attrs:{variant:"info"},on:{click:t.createBitmap}},[t._v("New")]),n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:t.currentBitmap,expression:"currentBitmap"}],staticStyle:{width:"40px"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.alphaChange.apply(null,arguments)}},model:{value:t.alpha,callback:function(e){t.alpha=e},expression:"alpha"}}),n("b-form-input",{directives:[{name:"show",rawName:"v-show",value:t.currentBitmap,expression:"currentBitmap"}],attrs:{type:"range",min:"0",max:"1",step:"0.1"},on:{change:t.alphaChange},model:{value:t.alpha,callback:function(e){t.alpha=e},expression:"alpha"}})],1)],1)},kl=[],El=100,Sl={name:"PluginToolNegative",props:["drawing"],data:function(){return{currentBitmap:null,alpha:1}},mounted:function(){var t=this;this._interval=setInterval((function(){t.flush()}),El)},destroyed:function(){clearInterval(this._interval)},methods:{flush:function(){var t=this.drawing.focusing;t instanceof T.BitmapProxy?t!==this.currentBitmap&&(this.currentBitmap=t,this.alpha=t.alpha):this.currentBitmap=null},createBitmap:function(){var t=this;return Object(Xo["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.drawing,r="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec",n.negative.createBitmap(r);case 3:case"end":return e.stop()}}),e)})))()},alphaChange:function(){this.currentBitmap.setAlpha(this.alpha)}}},Cl=Sl,Pl=Object(Oc["a"])(Cl,Tl,kl,!1,null,null,null),Nl=Pl.exports,Fl=[{stateComponent:Mc,toolComponent:ku,title:"Grid"},{stateComponent:qc,toolComponent:il,title:"Structure"},{stateComponent:nu,toolComponent:hl,title:"StructureTool"},{stateComponent:cu,toolComponent:bl,title:"Wall"},{stateComponent:vu,toolComponent:jl,title:"Hammer"},{stateComponent:Vc,toolComponent:Qu,title:"Room"},{stateComponent:wu,toolComponent:Nl,title:"Negative"}],Wl="https://qhcmsoss.kujiale.com/ttex/L2HNXEIKN4FT2AABAAAAAAY8.jpg",Hl={getPosition:function(t){return[t.x,t.y]},setPosition:function(t,e,n){t.setPosition(e,n)},getWidth:function(t){return t.width},setWidth:function(t,e){t.setWidth(e)},getHeight:function(t){return t.height},setHeight:function(t,e){t.setHeight(e)},getRotation:function(t){return t.rotation},setRotation:function(t,e){t.setRotation(e)}},Dl={name:"Framework",components:{CoreState:jc,CoreTool:Fc},data:function(){return{spoke:null,drawing:new fr,bitmap:null,stateShowingList:Fl.map((function(){return!1})),toolShowingList:Fl.map((function(){return!1}))}},mounted:function(){this.spoke=N,this.init()},computed:{componentList:function(){return Fl}},methods:{init:function(){var t=window.d=this.drawing;t.mount(this.$refs["drawing"]),P.Utility.AdjustViewportByPointerButton(t),P.Utility.PreventDefaultContextMenu(t),P.Utility.AdjustZoomByWheel(t),t.transformer.addAdapter($.FurnitureProxy,Hl),t.transformer.addAdapter(T.BitmapProxy,Hl),t.structure.on("room-created",(function(t){t.setFloor(Wl)}))},toggleState:function(t){this.$set(this.stateShowingList,t,!this.stateShowingList[t])},toggleTool:function(t){this.$set(this.toolShowingList,t,!this.toolShowingList[t])},createWall:function(){this.drawing.structureTool.buildWall()}}},Il=Dl,Ll=Object(Oc["a"])(Il,L,M,!1,null,null,null),Ml=Ll.exports,Al={components:{Framework:Ml}},Rl=Al,_l=Object(Oc["a"])(Rl,D,I,!1,null,null,null),Bl=_l.exports,Ul=n("5f5b"),Vl=n("8f9c");window.PIXI=Me,H["default"].use(Ul["a"],Vl),H["default"].config.productionTip=!1,new H["default"]({render:function(t){return t(Bl)}}).$mount("#app")},5821:function(t,e){},"5d77":function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},7970:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},"8f9c":function(t){t.exports=JSON.parse('{"breakpoints":["xs","sm","md","lg","xl","xxl"],"formControls":{"size":"sm"},"BButton":{"variant":"secondary","size":"sm"},"BToast":{"toaster":"b-toaster-top-center","autoHideDelay":3000,"variant":"primary","toastClass":null,"headerClass":null,"bodyClass":null},"BModal":{"cancelVariant":"secondary","okVariant":"primary"},"BFormGroup":{"size":"sm"},"BInputGroup":{"size":"sm"}}')},a55c:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},c5c2:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')},e2a8:function(t){t.exports=JSON.parse('{"a":"0.0.0"}')}});